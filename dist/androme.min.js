!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){this.wrapped=e}function i(e){var t,i;function r(t,i){try{var o=e[t](i),l=o.value,s=l instanceof n;Promise.resolve(s?l.wrapped:l).then(function(e){s?r("next",e):a(o.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):i=null}this._invoke=function(e,n){return new Promise(function(a,o){var l={key:e,arg:n,resolve:a,reject:o,next:null};i?i=i.next=l:(t=i=l,r(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=c(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function d(e,t){return p(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||v()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){if(Array.isArray(e))return e}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var y,b,E,x,A,k,T,w,S,I=function(){function e(t){r(this,e),this._children=[],Array.isArray(t)&&this.replace(t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._children,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"item",value:function(e,t){return void 0===e||void 0===t?void 0===e?this._children[this._children.length-1]:this._children[e]:e>=0&&e<this._children.length?(this._children[e]=t,t):void 0}},{key:"append",value:function(e){this._children.push(e)}},{key:"remove",value:function(e){for(var t=0;t<this.list.length;t++)if(e===this.list[t])return this.list.splice(t,1);return[]}},{key:"contains",value:function(e){return this._children.includes(e)}},{key:"replace",value:function(e){this._children=e}},{key:"duplicate",value:function(){return this._children.slice()}},{key:"clear",value:function(){return this._children.length=0,this}},{key:"each",value:function(e){return this._children.forEach(e),this}},{key:"find",value:function(e,t){return this._children.find("string"==typeof e?function(n){return n[e]===t}:e)}},{key:"filter",value:function(e){return this._children.filter(e)}},{key:"map",value:function(e){return this._children.map(e)}},{key:"sort",value:function(e){return this._children.sort(e),this}},{key:"every",value:function(e){return this.length>0&&this._children.every(e)}},{key:"some",value:function(e){return this.length>0&&this._children.some(e)}},{key:"list",get:function(){return this._children}},{key:"length",get:function(){return this._children.length}}]),e}();!function(e){e[e.NONE=0]="NONE",e[e.CHROME=2]="CHROME",e[e.SAFARI=4]="SAFARI",e[e.EDGE=8]="EDGE",e[e.FIREFOX=16]="FIREFOX"}(y||(y={})),function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"}(b||(b={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"}(E||(E={})),function(e){e[e.NONE=0]="NONE",e[e.EXCLUDE=2]="EXCLUDE",e[e.EXTENDABLE=4]="EXTENDABLE",e[e.HORIZONTAL=8]="HORIZONTAL",e[e.VERTICAL=16]="VERTICAL",e[e.ABSOLUTE=32]="ABSOLUTE",e[e.FLOAT=64]="FLOAT",e[e.SEGMENTED=128]="SEGMENTED",e[e.PERCENT=256]="PERCENT",e[e.TOP=512]="TOP",e[e.RIGHT=1024]="RIGHT",e[e.BOTTOM=2048]="BOTTOM",e[e.LEFT=4096]="LEFT",e[e.SINGLE=8192]="SINGLE",e[e.MULTILINE=16384]="MULTILINE",e[e.SPACE=32768]="SPACE"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"}(A||(A={})),function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.LOCALIZATION=128]="LOCALIZATION",e[e.ALL=254]="ALL"}(k||(k={})),function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.SVG=6]="SVG",e[e.TEXT=7]="TEXT",e[e.IMAGE=8]="IMAGE",e[e.BUTTON=9]="BUTTON",e[e.INLINE=10]="INLINE",e[e.LINE=11]="LINE",e[e.SPACE=12]="SPACE",e[e.BLOCK=13]="BLOCK",e[e.WEB_VIEW=14]="WEB_VIEW",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.RADIO_GROUP=17]="RADIO_GROUP",e[e.GRID=18]="GRID",e[e.RELATIVE=19]="RELATIVE",e[e.CONSTRAINT=20]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=21]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=22]="SCROLL_VERTICAL"}(T||(T={})),function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"}(w||(w={})),function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"}(S||(S={}));var N=Object.freeze({get USER_AGENT(){return y},get APP_FRAMEWORK(){return b},get APP_SECTION(){return E},get NODE_ALIGNMENT(){return x},get NODE_RESOURCE(){return A},get NODE_PROCEDURE(){return k},get NODE_STANDARD(){return T},get BOX_STANDARD(){return w},get CSS_STANDARD(){return S}}),R=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],L=["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],C={ACCESSIBILITY:"androme.accessibility",CUSTOM:"androme.custom",EXTERNAL:"androme.external",GRID:"androme.grid",LIST:"androme.list",ORIGIN:"androme.origin",PERCENT:"androme.percent",SPRITE:"androme.sprite",TABLE:"androme.table"},O={CSS_URL:/url\("?(.*?)"?\)/,URI:/^[A-Za-z]+:\/\//},_=Object.freeze({MAP_ELEMENT:{INPUT:T.NONE,PLAINTEXT:T.TEXT,HR:T.LINE,SVG:T.SVG,IMG:T.IMAGE,SELECT:T.SELECT,RANGE:T.RANGE,TEXT:T.EDIT,PASSWORD:T.EDIT,NUMBER:T.EDIT,EMAIL:T.EDIT,SEARCH:T.EDIT,URL:T.EDIT,CHECKBOX:T.CHECKBOX,RADIO:T.RADIO,BUTTON:T.BUTTON,SUBMIT:T.BUTTON,RESET:T.BUTTON,TEXTAREA:T.EDIT,IFRAME:T.WEB_VIEW},BLOCK_ELEMENT:R,INLINE_ELEMENT:L,EXT_NAME:C,DOM_REGEX:O}),M="ABCDEFGHIJKLMNOPQRSTUVWXYZ",B=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function F(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.sort(function(e,n){for(var r=0;r<i.length;r++){var a=D(e,n,i[r]);if(a&&a[0]!==a[1])return 0===t?a[0]>a[1]?1:-1:a[0]<a[1]?1:-1}return 0})}function D(e,t,n){for(var i=n.split("."),r=e,a=t,o=Array.isArray(s=i),l=0,s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}if(void 0===r[u]||void 0===a[u])return(void 0!==r[u]||void 0!==a[u])&&(void 0!==r[u]?[1,0]:[0,1]);r=r[u],a=a[u]}return isNaN(parseInt(r))&&isNaN(parseInt(a))?[r,a]:[H(r),H(a)]}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=(e=e.replace(RegExp("^".concat(t,"+")),"")).match(RegExp("(".concat(t,"[a-z])"),"g"));return n&&n.forEach(function(t){return e=e.replace(t,t[1].toUpperCase())}),e}function G(e){return e?e.replace(/[^\w]/g,"_").trim():""}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function H(e){return e&&parseInt(e)||0}function z(e){return e&&parseFloat(e)||0}function U(e,t){if(se(e)){if(Z(e))return"".concat(Math.round(e),"px");var n=parseFloat(e);if(!isNaN(n)){var i=e.match(/(pt|em)/);if(i)switch(i[0]){case"pt":n*=4/3;break;case"em":n*=parseInt(U(t))||16}return"".concat(n,"px")}}return"0px"}function X(e){for(var t="";e>=M.length;){var n=Math.floor(e/M.length);n>1&&n<=M.length?(t+=M.charAt(n-1),e-=n*M.length):n>M.length&&(t+=X(n*M.length),e-=n*M.length);var i=e%M.length;t+=M.charAt(i),e-=i+M.length}return t=M.charAt(e)+t}function W(e){for(var t=(""+e).split(""),n="",i=3;i--;)n=(B[parseInt(t.pop()||"")+10*i]||"")+n;return"M".repeat(parseInt(t.join("")))+n}function j(e){return"".concat(isNaN(e=parseFloat(e))?0:Math.round(e),"px")}function Y(e,t){return(e&t)===t}function Z(e){return/^-?\d+(\.\d+)?$/.test((""+e).trim())}function q(e){return"string"==typeof e&&""!==e}function K(e){return Array.isArray(e)&&e.length>0}function Q(e){return!!q(e)&&/^-?[\d.]+(px|pt|em)$/.test(e.trim())}function $(e){return/^\d+(\.\d+)?%$/.test(e)}function J(e,t){return!!e&&e.split(arguments.length>2&&void 0!==arguments[2]?arguments[2]:",").map(function(e){return e.trim()}).includes(t)}function ee(e){if(!O.URI.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,i=[],r=0;e.split("/").forEach(function(e){".."===e?r++:i.push(e)}),(n=t=t.slice(0,Math.max(t.length-r,0))).push.apply(n,i),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function te(e){return e?e.trim():""}function ne(e,t){return e?ie(re(e,t),t):""}function ie(e,t){return e?e.replace(RegExp("^".concat(t,"+"),"g"),""):""}function re(e,t){return e?e.replace(RegExp("".concat(t,"+$"),"g"),""):""}function ae(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)}function oe(e){return e.substring(e.lastIndexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")+1)}function le(e,n){var i=[];if("object"===t(n))for(var r in n){var a=n[r];se(e[a])&&i.push([a,e[a]])}else{var o=function(e){return e===n};for(var l in/^\*.+\*$/.test(n)?o=function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?o=function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)&&(o=function(e){return e.startsWith(n.replace(/\*/,""))}),e)o(l)&&i.push([l,e[l]])}return i}function se(e){return null!=e&&""!==(""+e).trim()}function ue(e,t){return e===t||Math.floor(e)===Math.floor(t)||Math.ceil(e)===Math.ceil(t)||Math.ceil(e)===Math.floor(t)||Math.floor(e)===Math.ceil(t)}function he(e,t){for(var n=[],i=[],r=Array.isArray(o=e),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var s=l;t(s)?n.push(s):i.push(s)}return[n,i]}function ce(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return F.apply(void 0,[e,0].concat(n))}var fe=Object.freeze({formatString:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e},convertUnderscore:function(e){var t=(e=e.charAt(0).toLowerCase()+e.substring(1)).match(/([a-z][A-Z])/g);return t&&t.forEach(function(t){return e=e.replace(t,"".concat(t[0],"_").concat(t[1].toLowerCase()))}),e},convertCamelCase:P,convertWord:G,capitalize:V,convertInt:H,convertFloat:z,convertPercent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(e<=1?Math.min(0===t?Math.round(100*e):parseFloat((100*e).toFixed(t)),100):e,"%")},convertPX:U,convertAlpha:X,convertRoman:W,convertEnum:function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;r++){var a=i[r];if(e===t[a])return n[a]}return""},formatPX:j,hasBit:Y,isNumber:Z,isString:q,isArray:K,isUnit:Q,isPercent:$,includes:J,optional:function(e,n,i){var r,a=!1;if(e&&"object"===t(e)){r=e;var o=n.split("."),l=0;do{r=r[o[l]]}while(null!=r&&++l<o.length&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r);a=null!=r&&l===o.length}switch(i){case"object":return a?r:void 0;case"number":return a&&!isNaN(parseInt(r))?parseInt(r):0;case"boolean":return a&&!0===r;default:return a?""+r:""}},resolvePath:ee,trimNull:te,trimString:ne,trimStart:ie,trimEnd:re,repeat:ae,indexOf:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var a=e.indexOf(n[r]);if(-1!==a)return a}return-1},lastIndexOf:oe,hasSameValue:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=0;a<i.length;a++){var o=D(e,t,i[a]);if(!o||o[0]!==o[1])return!1}return!0},searchObject:le,hasValue:se,withinRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>=e-n&&t<=e+n},withinFraction:ue,overwriteDefault:function(e){for(var n=e,i=0;i<(arguments.length<=1?0:arguments.length-1)-1;i++){var r=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];if(i===(arguments.length<=1?0:arguments.length-1)-2)se(n[r])||(n[r]=i+1+1<1||arguments.length<=i+1+1?void 0:arguments[i+1+1]);else{if(!q(r))break;if("object"===t(n[r]))n=e[r];else{if(void 0!==e[r])break;e[r]={},n=e[r]}}}},partition:he,sortAsc:ce,sortDesc:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return F.apply(void 0,[e,1].concat(n))}});function de(e){var t=y.CHROME;return-1!==navigator.userAgent.indexOf("Edge")?t=y.EDGE:-1!==navigator.userAgent.indexOf("Firefox")?t=y.FIREFOX:-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari")&&(t=y.SAFARI),Y(e,t)}function ge(){return{top:0,left:0,right:0,bottom:0}}function pe(){return Object.assign({width:0,height:0},{top:0,left:0,right:0,bottom:0})}function me(e,t,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?$(e)?H(e)/100:parseFloat(U(e,n))/t:$(e)?Math.round(t*(H(e)/100)):parseInt(U(e,n))}function ve(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()).filter(function(e){return!(0===Math.round(e.width)&&ue(e.left,e.right))}),i=pe(),r=!1;if(n.length>0){i=ye(n[0]);for(var a=new Set([i.top]),o=new Set([i.bottom]),l=1;l<n.length;l++){var s=n[l];a.add(s.top),o.add(s.bottom),i.width+=s.width,i.right=Math.max(s.right,i.right),i.height=Math.max(s.height,i.height)}a.size>1&&o.size>1&&(i.top=Math.min.apply(null,Array.from(a)),i.bottom=Math.max.apply(null,Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(r=!0))}return[i,r]}function ye(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function be(e){if(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=De(e),n=Be(e,"style");if(n)return n;if(t){if(t.style)return t.style;if(t.plainText)return t.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var i=getComputedStyle(e);return Me(e,"style",i),i}}return{}}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},r=De(e),a=be(e);return["Top","Left","Right","Bottom"].forEach(function(e){var o=0;["padding","margin"].forEach(function(n){var l=n+e,s=H((r||a)[l]);(t||0!==s)&&(i[l]=s),o+=s}),n&&(i["padding".concat(e)]=o,t?i["margin".concat(e)]=0:delete i["margin".concat(e)])}),i}function xe(e){var t=e.match(O.CSS_URL);return t?ee(t[1]):""}function Ae(e,t,n,i){for(var r="",a=e.parentElement;a&&(void 0===i||!i.includes(a.tagName))&&(("inherit"===(r=be(a)[t]||"")||n&&n.some(function(e){return-1!==r.indexOf(e)}))&&(r=""),a!==document.body&&!r);)a=a.parentElement;return r}function ke(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return!("#"===e.nodeName.charAt(0)||!i.includes(be(e)[t]))||!!e.parentElement&&i.includes(be(e.parentElement)[t])}function Te(e,t){if(Oe(e)&&e.parentElement){var n=De(e),i=be(e);return i&&i[t]===be(e.parentElement)[t]&&(!n||!n.styleMap[t])}return!1}function we(e,t){return e.getAttribute(t)||be(e)[P(t)]||""}function Se(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0,right:0,bottom:0,horizontal:"left",vertical:"top",originalX:"",originalY:""},o=e.split(" ");return 4===o.length?o.forEach(function(e,o){switch(o){case 0:a.horizontal=e;break;case 2:a.vertical=e;break;case 1:case 3:var l=me(e,1===o?t.width:t.height,n,r);1===o?i?"right"===a.horizontal?(a.originalX=$(e)?"".concat(100-parseInt(e),"%"):j(t.width-parseInt(U(e,n))),a.right=l,a.left=r?1-l:t.width-l):(a.left=l,a.originalX=e):"center"!==a.horizontal&&(a[a.horizontal]=l):i?"bottom"===a.vertical?(a.originalY=$(e)?"".concat(100-parseInt(e),"%"):j(t.height-parseInt(U(e,n))),a.bottom=l,a.top=r?1-l:t.height-l):(a.top=l,a.originalY=e):"center"!==a.vertical&&(a[a.vertical]=l)}}):2===o.length&&o.forEach(function(e,o){var l=0===o?t.width:t.height,s=0===o?"left":"top",u=0===o?"originalX":"originalY",h=me(e,l,n,r);if($(e))a[s]=h,a[u]=e;else if(/^[a-z]+$/.test(e)){if(a[0===o?"horizontal":"vertical"]=e,i)switch(e){case"left":case"top":a[u]="0%";break;case"right":case"bottom":a[s]=r?1:l,a[u]="100%";break;case"center":a[s]=r?.5:Math.round(l/2),a[u]="50%"}}else a[s]=h,a[u]=e}),a}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=-1;function r(e){return i++!==t&&e.some(function(e){if("#text"===e.nodeName){if(Ne(e,n)||ke(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return!0}else if(e instanceof HTMLElement&&e.childNodes.length>0&&r(Array.from(e.childNodes)))return!0;return!1})}return"#text"===e.nodeName?(t=0,r([e])):r(Array.from(e.childNodes))}function Ne(e){if(e&&"#text"===e.nodeName&&e.textContent){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){for(var t=e.textContent,n=!1,i=0;i<t.length;i++)switch(t.charCodeAt(i)){case 9:case 10:case 13:case 32:continue;default:n=!0}return n&&""!==t}return""!==e.textContent.trim()}return!1}function Re(e){if(e){var t=De(e),n="#text"===e.nodeName,i=t?t.css("whiteSpace"):be(e).whiteSpace||"";return e instanceof HTMLElement&&e.children.length>0&&Array.from(e.children).some(function(e){return"BR"===e.tagName})||/\n/.test(e.textContent||"")&&(["pre","pre-wrap"].includes(i)||n&&ke(e,"whiteSpace","pre","pre-wrap"))}return!1}function Le(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=De(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||e.parentElement===t.parentElement){var r=t.parentElement;if(r){var a=Array.from(r.childNodes),o=e?a.findIndex(function(t){return t===e}):0,l=a.findIndex(function(e){return e===t});if(-1!==o&&-1!==l&&o!==l){var s=a.slice(Math.min(o,l)+1,Math.max(o,l));return s=s.filter(i?function(e){return"#comment"!==e.nodeName}:function(e){return"#"!==e.nodeName.charAt(0)||Ne(e)}),n&&(s=s.filter(function(e){return De(e)})),s}}}return[]}function Oe(e){return e instanceof HTMLElement||e instanceof SVGSVGElement}function _e(e,t){if(!(Be(e,"inlineSupport")||e.parentElement instanceof SVGSVGElement)){if(Oe(e)){if("function"==typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();if(0!==n.width&&0!==n.height)return!(t&&n.left<0&&n.top<0&&Math.abs(n.left)>=n.width&&Math.abs(n.top)>=n.height);if(se(e.dataset.ext)||"none"!==be(e).clear)return!0;for(var i=e.parentElement,r=!0;i;){if("none"===be(i).display){r=!1;break}i=i.parentElement}if(r&&e.children.length>0)return Array.from(e.children).some(function(e){var t=be(e),n=t.cssFloat,i=t.position;return"static"!==i&&"initial"!==i||"left"===n||"right"===n})}return!1}return Ne(e)}return!1}function Me(e,t,n){e&&(e["__".concat(t)]=n)}function Be(e,t){return e?e["__".concat(t)]:void 0}function Fe(e){if(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){delete e["__".concat(n[r])]}}}function De(e){return e&&Be(e,"node")||null}var Pe=Object.freeze({isUserAgent:de,newBoxRect:ge,newClientRect:pe,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},convertClientUnit:me,getRangeClientRect:ve,assignBounds:ye,getStyle:be,getBoxSpacing:Ee,cssResolveUrl:xe,cssInherit:Ae,cssParent:ke,cssFromParent:Te,cssAttribute:we,getBackgroundPosition:Se,getFirstElementChild:function(e){if(e.length>0){var t=e[0].parentElement;if(t)for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(e.includes(i))return i}}return null},getLastElementChild:function(e){if(e.length>0){var t=e[0].parentElement;if(t)for(var n=t.childNodes.length-1;n>=0;n--){var i=t.childNodes[n];if(e.includes(i))return i}}return null},hasFreeFormText:Ie,isPlainText:Ne,hasLineBreak:Re,isLineBreak:Le,getElementsBetweenSiblings:Ce,isStyleElement:Oe,isElementVisible:_e,getNestedExtension:function(e,t){return Oe(e)&&Array.from(e.children).find(function(e){return J(e.dataset.ext,t)})||null},setElementCache:Me,getElementCache:Be,deleteElementCache:Fe,getNodeFromElement:De}),Ge=function(e){function n(e,t){var i;return r(this,n),(i=h(this,s(n).call(this))).id=e,i.styleMap={},i.nodeType=0,i.alignmentType=0,i.depth=-1,i.siblingIndex=Number.MAX_VALUE,i.renderIndex=Number.MAX_VALUE,i.renderPosition=-1,i.excludeSection=0,i.excludeProcedure=0,i.excludeResource=0,i.documentRoot=!1,i.auto=!0,i.visible=!0,i.excluded=!1,i.rendered=!1,i.renderExtension=new Set,i._data={},i._initialized=!1,i.initial={depth:-1,children:[],styleMap:{},bounds:pe()},t&&(i._element=t,i.init()),i}return l(n,I),o(n,[{key:"init",value:function(){if(!this._initialized){if(this.styleElement){var e=this._element,t=Be(e,"styleMap")||{};Array.from(e.style).forEach(function(n){return t[P(n)]=e.style[n]}),this.style=Be(e,"style")||getComputedStyle(e),this.styleMap=Object.assign({},t),Object.assign(this.initial.styleMap,t)}0!==this.id&&Me(this._element,"node",this),this._initialized=!0}}},{key:"is",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some(function(t){return e.nodeType===t})}},{key:"of",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.nodeType===e&&i.some(function(e){return t.hasAlign(e)})}},{key:"attr",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="_".concat(e||"_");if(se(n)){if(void 0===this[r]&&(this._namespaces.add(e),this[r]={}),!i&&void 0!==this[r][t])return"";this[r][t]=""+n}return this[r][t]||""}},{key:"namespace",value:function(e){return this["_".concat(e||"_")]||{}}},{key:"delete",value:function(e){var t="_".concat(e||"_");if(this[t]){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.indexOf("*")){var l=le(this[t],o),s=Array.isArray(l),u=0;for(l=s?l:l[Symbol.iterator]();;){var h;if(s){if(u>=l.length)break;h=l[u++]}else{if((u=l.next()).done)break;h=u.value}var c=d(h,1);delete this[t][c[0]]}}else delete this[t][o]}}}},{key:"apply",value:function(e){if("object"===t(e))for(var n in e){var i=e[n];if("object"===t(i)){for(var r in i)this.attr(n,r,i[r]);delete e[n]}}}},{key:"each",value:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.renderChildren:this.list).forEach(e),this}},{key:"render",value:function(e){this.renderParent=e,this.renderDepth=this.documentRoot||this===e||se(e.dataset.target)?0:e.renderDepth+1,this.rendered=!0}},{key:"hide",value:function(){this.rendered=!0,this.visible=!1}},{key:"data",value:function(e,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return se(i)&&(void 0===this._data[e]&&(this._data[e]={}),"object"===t(this._data[e])&&(r||void 0===this._data[e][n])&&(this._data[e][n]=i)),void 0===this._data[e]||void 0===this._data[e][n]?void 0:this._data[e][n]}},{key:"ascend",value:function(){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=[],n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"parent":"documentParent",i=this[n],r=-1;i&&0!==i.id&&!t.includes(i)&&(t.push(i),++r!==e);)i=i[n];return t}},{key:"cascade",value:function(){function e(t){for(var n=g(t.list),i=Array.isArray(a=t),r=0,a=i?a:a[Symbol.iterator]();;){var o;if(i){if(r>=a.length)break;o=a[r++]}else{if((r=a.next()).done)break;o=r.value}n.push.apply(n,g(e(o)))}return n}return e(this)}},{key:"inherit",value:function(e){var n=this;if(this._initialized){for(var i=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(var l=0;l<a.length;l++){switch(a[l]){case"initial":Object.assign(this.initial,e.initial);break;case"base":this.style=e.style,this.documentParent=e.documentParent;case"dimensions":this.bounds=ye(e.bounds),this.linear=ye(e.linear),this.box=ye(e.box);break;case"data":for(var s in this._data)for(var u in this._data[s]){var h=this._data[s][u];if("object"===t(h)&&!0===h.inherit){var c=e.data(s,u);if(c)for(var f in h)switch(t(h[f])){case"number":c[f]+=h[f];break;case"boolean":!0===h[f]&&(c[f]=!0);break;default:c[f]=h[f]}else e.data(s,u,h);delete this._data[s][u]}}break;case"alignment":["position","display","verticalAlign","cssFloat","clear"].forEach(function(t){n.styleMap[t]=e.css(t),n.initial.styleMap[t]=e.cssInitial(t)}),"auto"===e.css("marginLeft")&&(this.styleMap.marginLeft="auto",this.initial.styleMap.marginLeft="auto"),"auto"===e.css("marginRight")&&(this.styleMap.marginRight="auto",this.initial.styleMap.marginRight="auto");break;case"style":var d={whiteSpace:e.css("whiteSpace")};for(var g in e.style)if(g.startsWith("font")||g.startsWith("color")){var p=P(g);d[p]=e.style[p]}this.css(d);break;case"styleMap":i(e.styleMap,this.styleMap)}}}}},{key:"alignedVertically",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&this.documentParent.baseElement===e.documentParent.baseElement){var i=this.documentParent.has("width",S.UNIT)?this.documentParent.toInt("width"):this.documentParent.box.width;return this.lineBreak||e.lineBreak||e.blockStatic||e.bounds&&e.bounds.width>i&&(!e.textElement||"nowrap"===e.css("whiteSpace"))||"left"===e.float&&this.autoMarginRight||"right"===e.float&&this.autoMarginLeft||!e.floating&&(!this.inlineElement&&!this.floating||this.blockStatic)||e.plainText&&e.multiLine&&this.parent&&!this.parent.is(T.RELATIVE)||this.blockStatic&&(!e.inlineElement||t.has(e)&&e.floating)||!n&&t.has(this)||!n&&this.floating&&e.floating&&this.linear.top>=e.linear.bottom}return!1}},{key:"intersect",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear,n=e.top>t.top&&e.top<t.bottom,i=Math.floor(e.right)>Math.ceil(t.left)&&e.right<t.right,r=e.left>t.left&&e.left<t.right;return n&&(r||i)||Math.floor(e.bottom)>Math.ceil(t.top)&&e.bottom<t.bottom&&(r||i)}},{key:"intersectX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=this[t]||this.linear;return e.top>=n.top&&e.top<n.bottom||e.bottom>n.top&&e.bottom<=n.bottom||n.top>=e.top&&this[t].bottom<=e.bottom||e.top>=n.top&&e.bottom<=n.bottom}},{key:"intersectY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return e.left>=t.left&&e.left<t.right||e.right>t.left&&e.right<=t.right||t.left>=e.left&&t.right<=e.right||e.left>=t.left&&e.right<=t.right}},{key:"withinX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.top>=e.top&&t.bottom<=e.bottom}},{key:"withinY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.left>=e.left&&t.right<=e.right}},{key:"outsideX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.right<e.left||t.left>e.right}},{key:"outsideY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.bottom<e.top||t.top>e.bottom}},{key:"css",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"object"===t(e)?(Object.assign(this.styleMap,e),""):(2===arguments.length&&(this.styleMap[e]=se(n)?n:""),this.styleMap[e]||this.style&&this.style[e]||"")}},{key:"cssInitial",value:function(e){return this.initial.styleMap[e]||(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.css(e):"")}},{key:"cssParent",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";if(this.baseElement)for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this:n.getNodeFromElement(this.baseElement.parentElement);r;){if((i=r.initial.styleMap[e]||"")||r.documentBody){t&&!r.visible&&(i="");break}r=n.getNodeFromElement(r.baseElement.parentElement)}return i}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e];if(se(i))switch(i){case"0px":if(Y(t,S.ZERO))return!0;case"left":if(Y(t,S.LEFT))return!0;case"baseline":if(Y(t,S.BASELINE))return!0;case"auto":if(Y(t,S.AUTO))return!0;case"none":case"initial":case"normal":case"transparent":case"rgba(0, 0, 0, 0)":return!1;default:if(n&&n.not)if(Array.isArray(n.not))for(var r=Array.isArray(o=n.not),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}if(i===l)return!1}else if(i===n.not)return!1;var s=0===t;return Y(t,S.UNIT)&&Q(i)&&(s=!0),Y(t,S.PERCENT)&&$(i)&&(s=!0),Y(t,S.AUTO)&&(s=!1),s}return!1}},{key:"hasBit",value:function(e,t){return void 0!==this[e]&&Y(this[e],t)}},{key:"toInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return parseInt((n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e])||t}},{key:"hasAlign",value:function(e){return Y(this.alignmentType,e)}},{key:"setExclusions",value:function(){var e=this;this.styleElement&&[["excludeSection",E],["excludeProcedure",k],["excludeResource",A]].forEach(function(t){var n=e.dataset[t[0]]||"";e._element.parentElement&&(n+="|"+te(e._element.parentElement.dataset["".concat(t[0],"Child")])),n.split("|").map(function(e){return e.toUpperCase().trim()}).forEach(function(n){void 0!==t[1][n]&&(e[t[0]]|=t[1][n])})})}},{key:"setBounds",value:function(){if(this._element&&!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))if(this.styleElement)this.bounds=ye(this._element.getBoundingClientRect());else{var e=ve(this._element);e[0]&&(this.bounds=e[0])}this.bounds&&(0===this.initial.bounds.width&&0===this.initial.bounds.height&&Object.assign(this.initial.bounds,ye(this.bounds)),this.linear={top:this.bounds.top-(this.marginTop>0?this.marginTop:0),right:this.bounds.right+this.marginRight,bottom:this.bounds.bottom+this.marginBottom,left:this.bounds.left-(this.marginLeft>0?this.marginLeft:0),width:0,height:0},this.box={top:this.bounds.top+(this.paddingTop+this.borderTopWidth),right:this.bounds.right-(this.paddingRight+this.borderRightWidth),bottom:this.bounds.bottom-(this.paddingBottom+this.borderBottomWidth),left:this.bounds.left+(this.paddingLeft+this.borderLeftWidth),width:0,height:0},this.setDimensions())}},{key:"setDimensions",value:function(){for(var e=Array.isArray(n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["linear","box"]),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i,a=this[r];if(a.width=this.bounds.width,!this.plainText)switch(r){case"linear":a.width+=(this.marginLeft>0?this.marginLeft:0)+this.marginRight;break;case"box":a.width-=this.paddingLeft+this.borderLeftWidth+this.paddingRight+this.borderRightWidth}a.height=a.bottom-a.top,void 0===this.initial[r]&&(this.initial[r]=ye(a))}}},{key:"setMultiLine",value:function(){if(this._element)switch(this._multiLine=!1,this._element.tagName){case"IMG":case"INPUT":case"BUTTON":case"TEXTAREA":case"HR":case"IFRAME":return;default:if(this.textElement){var e=d(ve(this._element),2),t=e[0],n=e[1];this.plainText?(t?(this.bounds=t,this.setBounds(!0)):this.hide(),this.multiLine=n):this.hasWidth||!this.blockStatic&&"table-cell"!==this.display&&!Re(this._element)||(this.multiLine=n)}}else this._multiLine=!1}},{key:"replaceNode",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<this.length;i++)if(e===this.item(i))return this.item(i,t),t.parent=this,!0;return!!n&&(t.parent=this,!0)}},{key:"appendRendered",value:function(e){-1===this.renderChildren.indexOf(e)&&(e.renderIndex=this.renderChildren.length,this.renderChildren.push(e))}},{key:"resetBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];Y(e,w.MARGIN)&&i.push("marginTop","marginRight","marginBottom","marginLeft"),Y(e,w.PADDING)&&i.push("paddingTop","paddingRight","paddingBottom","paddingLeft");for(var r=0;r<i.length;r++){var a=i[r];this._boxReset[a]=1,t&&t.modifyBox(a,this[a],n)}}},{key:"removeElement",value:function(){this._element&&(void 0===this._nodeName&&(this._nodeName=this.nodeName),void 0===this._tagName&&(this._tagName=this.tagName),this._baseElement=this._element,this._element=void 0)}},{key:"getParentElementAsNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._element){var t=n.getNodeFromElement(this._element.parentElement);if(!this.pageflow){for(var i=!1,r=null,a=null,o=!1;t&&0!==t.id;){if(a||"absolute"!==this.position){if(this.withinX(t.box)&&this.withinY(t.box)||r&&(this.linear.top>=t.linear.top&&this.linear.top<r.linear.top||this.linear.right<=t.linear.right&&this.linear.right>r.linear.right||this.linear.bottom<=t.linear.bottom&&this.linear.bottom>r.linear.bottom||this.linear.left>=t.linear.left&&this.linear.left<r.linear.left)){i=!0;break}}else if(!["static","initial"].includes(t.position)){var l=H(this.top),s=H(this.left);if(l>=0&&s>=0||!e||e&&Math.abs(l)<=t.marginTop&&Math.abs(s)<=t.marginLeft||this.imageElement){if(!e||t.documentRoot||0===l||0===s||null!==this.bottom||null!==this.right||!this.outsideX(t.linear)&&!this.outsideY(t.linear)){i=!0;break}o=!0}a=t}r=t,t=n.getNodeFromElement(t.element.parentElement)}i||o||(t=a)}return t}return null}},{key:"previousSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;if(this._element)r=this._element.previousSibling;else if(this.initial.children.length>0){var a=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});r=a.length>0?a[0].element.previousSibling:null}for(;r;){var o=n.getNodeFromElement(r);if(o&&(!o.lineBreak||t)&&(!o.excluded||i)&&(e&&o.pageflow||!e&&o.siblingflow))return o;r=r.previousSibling}return null}},{key:"nextSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;if(this._element)r=this._element.nextSibling;else if(this.initial.children.length>0){var a=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});r=a.length>0?a[0].element.nextSibling:null}for(;r;){var o=n.getNodeFromElement(r);if(o&&(!o.lineBreak||t)&&(!o.excluded||i)&&(e&&o.pageflow||!e&&o.siblingflow))return o;r=r.nextSibling}return null}},{key:"actualLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.min(this[e].left,this.companion[e].left):this[e].left}},{key:"actualRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.max(this[e].right,this.companion[e].right):this[e].right}},{key:"boxAttribute",value:function(e,t){var n=e+t;if(this.styleElement){var i=this.css(n);return $(i)?this.style[n]&&this.style[n]!==i?H(this.style[n]):this.documentParent.box["Left"===t||"Right"===t?"width":"height"]*(H(i)/100):H(i)}return H(this.css(n))}},{key:"getOverflow",value:function(){if(void 0===this._overflow&&(this._overflow=0,this.styleElement)){var e=[this.css("overflow"),this.css("overflowX"),this.css("overflowY")],t=e[0],n=e[1],i=e[2];this.toInt("width")>0&&("scroll"===t||"scroll"===n||"auto"===n&&this._element.clientWidth!==this._element.scrollWidth)&&(this._overflow|=x.HORIZONTAL),this.toInt("height")>0&&("scroll"===t||"scroll"===i||"auto"===i&&this._element.clientHeight!==this._element.scrollHeight)&&(this._overflow|=x.VERTICAL)}return this._overflow}},{key:"parent",set:function(e){e!==this._parent&&(this._parent&&this._parent.remove(this),this._parent=e),e?(e.contains(this)||(e.append(this),e.styleElement||-1===this.siblingIndex||(e.siblingIndex=Math.min(this.siblingIndex,e.siblingIndex))),-1===this.initial.depth&&(this.initial.depth=e.depth+1),this.depth=e.depth+1):this.depth=-1},get:function(){return this._parent}},{key:"nodeName",set:function(e){this._nodeName=e},get:function(){return this._nodeName||(this.styleElement?("INPUT"===this.tagName?this._element.type:this.tagName).toUpperCase():"")}},{key:"tagName",get:function(){return(this._tagName||this._element&&this._element.tagName||"").toUpperCase()}},{key:"element",set:function(e){this._element=e},get:function(){return this._element||{dataset:{},style:{}}}},{key:"baseElement",set:function(e){this._baseElement=e},get:function(){return this._baseElement||this.element}},{key:"htmlElement",get:function(){return this._element instanceof HTMLElement}},{key:"styleElement",get:function(){return this.htmlElement||this.svgElement}},{key:"domElement",get:function(){return this.styleElement||this.plainText}},{key:"imageElement",get:function(){return"IMG"===this.tagName}},{key:"svgElement",get:function(){return"SVG"===this.tagName}},{key:"textElement",get:function(){return this.plainText||this.inlineText}},{key:"groupElement",get:function(){return!this.domElement&&this.length>0}},{key:"documentBody",get:function(){return this._element===document.body}},{key:"renderAs",set:function(e){this.rendered||e.rendered||(this._renderAs=e)},get:function(){return this._renderAs}},{key:"renderDepth",set:function(e){this._renderDepth=e},get:function(){return void 0===this._renderDepth&&(this.documentRoot?this._renderDepth=0:this.parent&&(this._renderDepth=this.parent.renderDepth+1)),this._renderDepth||0}},{key:"dataset",get:function(){return this._element instanceof HTMLElement?this._element.dataset:{}}},{key:"extension",get:function(){return this.dataset.ext?this.dataset.ext.split(",")[0].trim():""}},{key:"flex",get:function(){var e=this.style;return e?{enabled:-1!==e.display.indexOf("flex"),direction:e.flexDirection,basis:e.flexBasis,grow:H(e.flexGrow),shrink:H(e.flexShrink),wrap:e.flexWrap,alignSelf:!this.has("alignSelf")&&this.documentParent.has("alignItems")?this.documentParent.css("alignItems"):e.alignSelf,justifyContent:e.justifyContent,order:H(e.order)}:{enabled:!1}}},{key:"viewWidth",get:function(){return this.inlineStatic||this.has("width",S.PERCENT)?0:this.toInt("width")||this.toInt("minWidth")}},{key:"viewHeight",get:function(){return this.inlineStatic||this.has("height",S.PERCENT)?0:this.toInt("height")||this.toInt("minHeight")}},{key:"hasWidth",get:function(){return!this.inlineStatic&&(this.has("width",S.UNIT|S.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minWidth")>0)}},{key:"hasHeight",get:function(){return!this.inlineStatic&&(this.has("height",S.UNIT|S.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minHeight")>0)}},{key:"lineHeight",get:function(){if(this.rendered){if(void 0===this._lineHeight&&(this._lineHeight=0,0===this.length&&!this.renderParent.linearHorizontal)){var e=this.toInt("lineHeight");this._lineHeight=this.inlineElement?e||this.documentParent.toInt("lineHeight"):e}return this._lineHeight}return 0}},{key:"display",get:function(){return this.css("display")}},{key:"position",get:function(){return this.css("position")}},{key:"top",get:function(){var e=this.styleMap.top;return e&&"auto"!==e?H(e):null}},{key:"right",get:function(){var e=this.styleMap.right;return e&&"auto"!==e?H(e):null}},{key:"bottom",get:function(){var e=this.styleMap.bottom;return e&&"auto"!==e?H(e):null}},{key:"left",get:function(){var e=this.styleMap.left;return e&&"auto"!==e?H(e):null}},{key:"marginTop",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Top")}},{key:"marginRight",get:function(){return this.boxAttribute("margin","Right")}},{key:"marginBottom",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Bottom")}},{key:"marginLeft",get:function(){return this.boxAttribute("margin","Left")}},{key:"borderTopWidth",get:function(){return"none"!==this.css("borderTopStyle")?H(this.css("borderTopWidth")):0}},{key:"borderRightWidth",get:function(){return"none"!==this.css("borderRightStyle")?H(this.css("borderRightWidth")):0}},{key:"borderBottomWidth",get:function(){return"none"!==this.css("borderBottomStyle")?H(this.css("borderBottomWidth")):0}},{key:"borderLeftWidth",get:function(){return"none"!==this.css("borderLeftStyle")?H(this.css("borderLeftWidth")):0}},{key:"paddingTop",get:function(){return this.boxAttribute("padding","Top")}},{key:"paddingRight",get:function(){return this.boxAttribute("padding","Right")}},{key:"paddingBottom",get:function(){return this.boxAttribute("padding","Bottom")}},{key:"paddingLeft",get:function(){return this.boxAttribute("padding","Left")}},{key:"pageflow",set:function(e){this._pageflow=e},get:function(){if(void 0===this._pageflow){var e=this.position;return"static"===e||"initial"===e||"relative"===e||this.alignOrigin}return this._pageflow}},{key:"siblingflow",get:function(){var e=this.position;return!("absolute"===e||"fixed"===e)}},{key:"inline",get:function(){var e=this.display;return"inline"===e||"initial"===e&&L.includes(this.tagName)}},{key:"inlineElement",get:function(){var e=this.position,t=this.display;return this.inline||-1!==t.indexOf("inline")||"table-cell"===t||this.floating||("absolute"===e||"fixed"===e)&&this.alignOrigin}},{key:"inlineStatic",get:function(){return this.inline&&!this.floating&&!this.imageElement}},{key:"inlineText",get:function(){if(void 0===this._inlineText)switch(this.tagName){case"INPUT":case"BUTTON":case"IMG":case"SELECT":case"TEXTAREA":this._inlineText=!1;break;default:this._inlineText=this.htmlElement&&Ie(this._element)&&(0===this.initial.children.length||this.initial.children.every(function(e){return!!Be(e.element,"inlineSupport")}))&&(0===this._element.childNodes.length||!Array.from(this._element.childNodes).some(function(e){var t=n.getNodeFromElement(e);return!(!t||t.lineBreak||t.excluded&&t.visible)}))}return this._inlineText}},{key:"plainText",get:function(){return"PLAINTEXT"===this._nodeName}},{key:"lineBreak",get:function(){return"BR"===this.tagName}},{key:"block",get:function(){var e=this.display;return"block"===e||"list-item"===e||"initial"===e&&R.includes(this.tagName)}},{key:"blockStatic",get:function(){return this.block&&this.siblingflow&&(!this.floating||"100%"===this.cssInitial("width"))}},{key:"alignOrigin",get:function(){return null===this.top&&null===this.right&&null===this.bottom&&null===this.left}},{key:"alignNegative",get:function(){return this.toInt("top")<0||this.toInt("left")<0}},{key:"autoMargin",get:function(){return this.blockStatic&&("auto"===this.initial.styleMap.marginLeft||"auto"===this.initial.styleMap.marginRight)}},{key:"autoMarginLeft",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"!==this.initial.styleMap.marginRight}},{key:"autoMarginRight",get:function(){return this.blockStatic&&"auto"!==this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginHorizontal",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginVertical",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginTop&&"auto"===this.initial.styleMap.marginBottom}},{key:"floating",get:function(){var e=this.css("cssFloat");return"absolute"!==this.position&&("left"===e||"right"===e)}},{key:"float",get:function(){return this.floating?this.css("cssFloat"):"none"}},{key:"textContent",get:function(){if(this._element){if(this._element instanceof HTMLElement)return this._element.innerText||this._element.innerHTML;if("#text"===this._element.nodeName)return this._element.textContent||""}return""}},{key:"overflowX",get:function(){return Y(this.getOverflow(),x.HORIZONTAL)}},{key:"overflowY",get:function(){return Y(this.getOverflow(),x.VERTICAL)}},{key:"baseline",get:function(){var e=this.css("verticalAlign");return("baseline"===e||"initial"===e||"unset"===e)&&this.siblingflow}},{key:"baselineInside",get:function(){return this.nodes.length>0?this.nodes.every(function(e){return e.baseline}):this.baseline}},{key:"multiLine",set:function(e){this._multiLine=e},get:function(){return void 0===this._multiLine&&this.setMultiLine(),this._multiLine}},{key:"preserveWhiteSpace",get:function(){var e=this.css("whiteSpace");return"pre"===e||"pre-wrap"===e}},{key:"actualHeight",get:function(){return this.plainText?this.bounds.bottom-this.bounds.top:this.bounds.height}},{key:"singleChild",get:function(){return this.rendered?1===this.renderParent.length:1===this.parent.length}},{key:"dir",get:function(){switch(this.css("direction")){case"unset":case"inherit":var e=this.documentParent;do{var t=e.dir;if(""!==t)return t;e=e.documentParent}while(0!==e.id);return"";case"rtl":return"rtl";default:return"ltr"}}},{key:"nodes",get:function(){return this.rendered?this.renderChildren:this.list}},{key:"previousElementSibling",get:function(){for(var e=this.baseElement.previousSibling;e;){if(Ne(e)||Oe(e)||"BR"===e.tagName)return e;e=e.previousSibling}return null}},{key:"nextElementSibling",get:function(){for(var e=this.baseElement.nextSibling;e;){if(Ne(e)||Oe(e)||"BR"===e.tagName)return e;e=e.nextSibling}return null}},{key:"center",get:function(){return{x:this.bounds.left+Math.floor(this.bounds.width/2),y:this.bounds.top+Math.floor(this.actualHeight/2)}}}],[{key:"getNodeFromElement",value:function(e){return De(e)}}]),n}();function Ve(e){for(var t=Array.isArray(i=e),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}if(!r.companion&&r.domElement)return r.documentParent}return e[0].documentParent}var He=function(e){function t(e){var n;return r(this,t),(n=h(this,s(t).call(this,e)))._currentId=0,n}return l(t,I),o(t,[{key:"append",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return f(s(t.prototype),"append",this).call(this,e),n&&this.delegateAppend&&this.delegateAppend.call(this,e),this}},{key:"reset",value:function(){return this._currentId=0,this.clear(),this}},{key:"partition",value:function(e){var n=d(he(this.list,e),2),i=n[1];return[new t(n[0]),new t(i)]}},{key:"visible",get:function(){return this.list.filter(function(e){return e.visible})}},{key:"elements",get:function(){return this.list.filter(function(e){return e.visible&&e.styleElement})}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return t.linearX(this.list)}},{key:"linearY",get:function(){return t.linearY(this.list)}}],[{key:"outerRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=[],i=[],r=[],a=[],o=e.slice();e.forEach(function(e){return e.companion&&o.push(e.companion)});for(var l=0;l<o.length;l++){var s=o[l];0===l?(n.push(s),i.push(s),r.push(s),a.push(s)):(n[0][t].top===s[t].top?n.push(s):s[t].top<n[0][t].top&&(n=[s]),i[0][t].right===s[t].right?i.push(s):s[t].right>i[0][t].right&&(i=[s]),r[0][t].bottom===s[t].bottom?r.push(s):s[t].bottom>r[0][t].bottom&&(r=[s]),a[0][t].left===s[t].left?a.push(s):s[t].left<a[0][t].left&&(a=[s]))}return{top:n,right:i,bottom:r,left:a}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){for(var t=new Map,n=new Set,i=Array.isArray(a=e),r=0,a=i?a:a[Symbol.iterator]();;){var o;if(i){if(r>=a.length)break;o=a[r++]}else{if((r=a.next()).done)break;o=r.value}var l=o;if(l.siblingflow){var s=l.css("clear");n.size>0&&("both"===s?(t.set(l,2===n.size?"both":n.values().next().value),n.clear()):n.has(s)&&(n.delete(s),t.set(l,s))),l.floating&&n.add(l.float)}}return t}},{key:"textBaseline",value:function(e){var t,n,i,r=[];if(e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline})){var a=Math.max.apply(null,e.map(function(e){return e.lineHeight})),o=Math.max.apply(null,e.map(function(e){return e.bounds.height}));if(a>o){var l=e.filter(function(e){return e.lineHeight===a});return(l.length===e.length?l.filter(function(e){return e.htmlElement}):l).filter(function(e){return e.baseline})}r=e.filter(function(e){return e.baselineInside}).sort(function(e,t){var n=e.bounds.height,i=t.bounds.height;if(de(y.EDGE)&&(e.textElement&&(n=Math.max(Math.floor(n),e.lineHeight)),t.textElement&&(i=Math.max(Math.floor(i),t.lineHeight))),!e.imageElement||!t.imageElement){var r=H(e.css("fontSize")),a=H(t.css("fontSize"));if(e.multiLine||t.multiLine){if(e.lineHeight>0&&t.lineHeight>0)return e.lineHeight>=t.lineHeight?-1:1;if(r===a)return e.htmlElement||!t.htmlElement?-1:1}if(e.nodeType!==t.nodeType&&(e.nodeType<T.TEXT||t.nodeType<T.TEXT))return e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.nodeType<t.nodeType?-1:1;if(e.lineHeight>i&&0===t.lineHeight||t.imageElement)return-1;if(t.lineHeight>n&&0===e.lineHeight||e.imageElement)return 1;if(r===a&&n===i)return e.htmlElement&&!t.htmlElement?-1:!e.htmlElement&&t.htmlElement?1:e.siblingIndex<=t.siblingIndex?-1:1;if(r!==a&&0!==r&&0!==a)return r>a?-1:1}return n>=i?-1:1})}else r=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,i=t.nodeType;return e.layoutHorizontal&&(n=Math.min.apply(null,e.map(function(e){return e.nodeType>0?e.nodeType:T.INLINE}))),t.layoutHorizontal&&(i=Math.min.apply(null,t.map(function(e){return e.nodeType>0?e.nodeType:T.INLINE}))),n===i?e.id<t.id?-1:1:n<i?-1:1});return r.filter(function(e,a){return 0===a?(t=e.css("fontFamily"),n=e.css("fontSize"),i=e.css("fontWeight"),!0):e.css("fontFamily")===t&&e.css("fontSize")===n&&e.css("fontWeight")===i&&e.nodeName===r[0].nodeName&&(e.lineHeight>0&&e.lineHeight===r[0].lineHeight||e.bounds.height===r[0].bounds.height)})}},{key:"linearX",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.filter(function(e){return e.pageflow});switch(i.length){case 0:return!1;case 1:return!0;default:var r=Ve(i),a=!1;if(n&&i.every(function(e){return e.documentParent===r||e.companion&&e.companion.documentParent===r})){var o=t.clearedSiblings(r);a=i.slice().sort(t.siblingIndex).every(function(e,t){return!(t>0)||(e.companion&&e.companion.documentParent===r&&(e=e.companion),!e.alignedVertically(e.previousSibling(),o))})}return!(!a&&n)&&i.every(function(e){return!i.some(function(t){return t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear)})})}}},{key:"linearY",value:function(e){var n=e.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var i=Ve(n);if(n.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var r=t.clearedSiblings(i);return n.slice().sort(t.siblingIndex).every(function(e,t){return!(t>0&&!e.lineBreak)||(e.companion&&e.companion.documentParent===i&&(e=e.companion),e.alignedVertically(e.previousSibling(),r))})}return!1}}},{key:"sortByAlignment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.NONE,n=arguments.length>2?arguments[2]:void 0,i=!1;return n&&t===x.NONE&&(n.linearHorizontal?t|=x.HORIZONTAL:n.is(T.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(t|=x.ABSOLUTE)),Y(t,x.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),i=!0),Y(t,x.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=H(e.css("zIndex")),i=H(t.css("zIndex"));return 0===n&&0===i?e.siblingIndex<=t.siblingIndex?-1:1:n<=i?-1:1}),i=!0),i}},{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"clearedSiblings",value:function(e){return this.cleared(Array.from(e.baseElement.children).map(function(e){return Ge.getNodeFromElement(e)}).filter(function(e){return e}))}}]),t}(),ze=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Ge),o(t,[{key:"init",value:function(){if(f(s(t.prototype),"init",this).call(this),this.length>0){for(var e,n=Array.isArray(r=this),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a;this.siblingIndex=Math.min(this.siblingIndex,o.siblingIndex),o.parent=this}this.parent.sort(He.siblingIndex),(e=this.initial.children).push.apply(e,g(this.duplicate()))}this.setBounds(),this.css("direction",this.documentParent.dir)}},{key:"setBounds",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(this.length>0){var e=He.outerRegion(this.list);this.bounds={top:e.top[0].linear.top,right:e.right[0].linear.right,bottom:e.bottom[0].linear.bottom,left:e.left[0].linear.left,width:0,height:0}}else this.bounds=pe();this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top}this.linear=ye(this.bounds),this.box=ye(this.bounds),this.setDimensions()}},{key:"previousSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.item(0);return i?i.previousSibling(e,t,n):null}},{key:"nextSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.item(0);return i?i.nextSibling(e,t,n):null}},{key:"inline",get:function(){return this.every(function(e){return e.inline})}},{key:"pageflow",get:function(){return this.every(function(e){return e.pageflow})}},{key:"siblingflow",get:function(){return this.every(function(e){return e.siblingflow})}},{key:"inlineElement",get:function(){return this.hasAlign(x.SEGMENTED)}},{key:"inlineStatic",get:function(){return this.every(function(e){return e.inlineStatic})}},{key:"blockStatic",get:function(){return this.every(function(e){return e.blockStatic})}},{key:"floating",get:function(){return this.hasAlign(x.FLOAT)}},{key:"float",get:function(){return this.floating?this.hasAlign(x.RIGHT)?"right":"left":"none"}},{key:"baseline",get:function(){return this.every(function(e){return e.baseline})}},{key:"multiLine",get:function(){return this.some(function(e){return e.multiLine})}},{key:"display",get:function(){return this.css("display")||(this.every(function(e){return e.blockStatic})||this.of(T.CONSTRAINT,x.PERCENT)?"block":this.every(function(e){return e.inline})?"inline":"inline-block")}},{key:"baseElement",get:function(){return function e(t){for(var n=Array.isArray(r=t),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}if(a.domElement)return a.element;if(a.length>0){var o=e(a.nodes);if(o)return o}}return null}(this.nodes)||f(s(t.prototype),"baseElement",this)}}]),t}(),Ue={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},LightGrey:{hex:"#D3D3D3"},DarkGrey:{hex:"#A9A9A9"},Grey:{hex:"#808080"},DimGrey:{hex:"#696969"},LightSlateGrey:{hex:"#778899"},SlateGrey:{hex:"#708090"},DarkSlateGrey:{hex:"#2F4F4F"},Black:{hex:"#000000"}},Xe=[];for(var We in Ue){var je=Ue[We];je.name=We;var Ye=et(je.hex);Ye&&(je.rgba=Ye,je.hsl=Ze(je.rgba),Xe.push(je))}function Ze(e){var t=e.r,n=void 0===t?0:t,i=e.g,r=void 0===i?0:i,a=e.b,o=void 0===a?0:a,l=Math.min(n/=255,r/=255,o/=255),s=Math.max(n,r,o),u=(s+l)/2,h=u,c=u;if(s===l)u=0,h=0;else{var f=s-l;switch(h=c>.5?f/(2-s-l):f/(s+l),s){case n:u=(r-o)/f+(r<o?6:0);break;case r:u=(o-n)/f+2;break;case o:u=(n-r)/f+4}u/=6}return{h:360*u,s:100*h,l:100*c}}function qe(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],r=n[1];if(i===r){var a=[e.hsl.s,t.hsl.s];if((i=a[0])===(r=a[1])){var o=[e.hsl.l,t.hsl.l];i=o[0],r=o[1]}}return i>=r?1:-1}return 0}function Ke(e){return"rgb".concat(e.a<255?"a":"","(").concat(e.r,", ").concat(e.g,", ").concat(e.b).concat(e.a<255?", ".concat((e.a/255).toFixed(2)):"",")")}function Qe(e){return parseFloat(e)<1?$e("255",parseFloat(e)):"FF"}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="0123456789ABCDEF",i=parseInt(e)*t;return isNaN(i)?"00":n.charAt(((i=Math.max(0,Math.min(i,255)))-i%16)/16)+n.charAt(i%16)}function Je(e){for(var t in Ue)if(t.toLowerCase()===e.trim().toLowerCase())return Ue[t];return null}function et(e){if(e=e.replace(/#/g,"").trim(),/[A-Za-z\d]{3,}/.test(e)){var t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:e.length>=8&&(t=parseInt(e.substring(6,8),16)),e=e.substring(0,6)}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}return null}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(e&&"initial"!==e&&"transparent"!==e){if(""===t.trim()&&(t="1"),"#"===e.charAt(0)){var n=et(e);n&&(e=Ke(n))}else if(!e.startsWith("rgb")){var i=Je(e);i&&i.rgba&&(i.rgba.a=parseFloat(Qe(t)),e=Ke(i.rgba))}var r=e.match(/rgba?\((\d+), (\d+), (\d+),?\s*([\d.]+)?\)/);if(r&&r.length>=4&&(void 0===r[4]||parseFloat(r[4])>0)){void 0===r[4]&&(r[4]=parseFloat(t).toFixed(2));var a=$e(r[1])+$e(r[2])+$e(r[3]),o=Qe(r[4]),l="#".concat(a+o),s=parseFloat(r[4]);return{valueRGB:"#".concat(a),valueRGBA:l,valueARGB:"#".concat(o+a),alpha:s,rgba:et(l),opaque:s<1,visible:s>0}}}return null}Xe.sort(qe);var nt=Object.freeze({convertHex:$e,getColorByName:Je,getColorByShade:function(e){var t=Xe.slice(),n=t.findIndex(function(t){return t.hex===e});if(-1!==n)return t[n];var i=et(e);if(i){var r=Ze(i);if(r)return t.push({name:"",hsl:r,rgba:{r:-1,g:-1,b:-1,a:1},hex:""}),t.sort(qe),n=t.findIndex(function(e){return""===e.name}),t[Math.min(n+1,t.length-1)]}return null},convertRGBA:et,parseRGBA:tt,reduceRGBA:function(e,t){var n=et(e);if(n){var i=t<0?0:255;return n.r=Math.round((i-n.r)*(t=Math.abs(t)))+n.r,n.g=Math.round((i-n.g)*t)+n.g,n.b=Math.round((i-n.b)*t)+n.b,tt(Ke(n))}return null}});function it(e){for(var t=[],n=Array.from(e.getElementsByTagName("stop")),i=0;i<n.length;i++){var r=n[i],a=tt(we(r,"stop-color"),we(r,"stop-opacity"));a&&a.visible&&t.push({color:a.valueRGBA,offset:we(r,"offset"),opacity:a.alpha})}return t}function rt(e){for(var t={translateX:0,translateY:0,scaleX:1,scaleY:1,rotateAngle:0,rotateX:0,rotateY:0,skewX:0,skewY:0},n=0;n<e.transform.baseVal.numberOfItems;n++){var i=e.transform.baseVal.getItem(n);switch(i.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX+=i.matrix.e,t.translateY+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:t.scaleX*=i.matrix.a,t.scaleY*=i.matrix.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:t.rotateAngle+=i.angle,i.matrix.e>0&&(t.rotateX=Math.round((i.matrix.e-i.matrix.f)/2),t.rotateY=i.matrix.e-t.rotateX);break;case SVGTransform.SVG_TRANSFORM_SKEWX:t.skewX+=i.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWY:t.skewY+=i.angle}}var r=be(e);if(r.transformOrigin)switch(r.transformOrigin){case"0px 0px":case"0% 0%":case"left top":break;default:t.origin=Se(r.transformOrigin,e.getBoundingClientRect(),r.fontSize,!0)}return t}function at(e){return"none"!==we(e,"display")&&!["hidden","collpase"].includes(we(e,"visibility"))}var ot=Object.freeze({createColorStop:it,createTransform:rt,isSvgVisible:at}),lt=function(e){return function(t){function n(e){var t;return r(this,n),(t=h(this,s(n).call(this))).name="",t.visibility=!0,e&&(t.setElement(e),t.build(),t._element&&(t.visibility=at(e))),t}return l(n,e),o(n,[{key:"setElement",value:function(e){e instanceof SVGGraphicsElement&&(this._element=e)}},{key:"build",value:function(){var e=this._element;e&&(this.name=e.id,this.transform=rt(e))}},{key:"element",get:function(){return this._element}}]),n}()},st=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,I),t}(),ut=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,lt(st)),t}(),ht=function(){function e(t,n){r(this,e),this.visibility=!0,t&&(this.setElement(t),this.build()),n&&(this.d=n)}return o(e,[{key:"setElement",value:function(e){e instanceof SVGGraphicsElement&&(this._element=e)}},{key:"build",value:function(){var e=this._element;if(e){switch(e.tagName){case"path":this.d=we(e,"d");break;case"line":var t=e;0===t.x1.baseVal.value&&0===t.y1.baseVal.value&&0===t.x2.baseVal.value&&0===t.y2.baseVal.value||(this.d="M".concat(t.x1.baseVal.value,",").concat(t.y1.baseVal.value," L").concat(t.x2.baseVal.value,",").concat(t.y2.baseVal.value));break;case"rect":var n=e;if(n.width.baseVal.value>0&&n.height.baseVal.value>0){var i=n.x.baseVal.value,r=n.y.baseVal.value;this.d="M".concat(i,",").concat(r," H").concat(i+n.width.baseVal.value," V").concat(r+n.height.baseVal.value," H").concat(i," Z")}break;case"polyline":case"polygon":var a=e;if(a.points.numberOfItems>0){for(var o=[],l=0;l<a.points.numberOfItems;l++){var s=a.points.getItem(l);o.push("".concat(s.x,",").concat(s.y))}this.d="M".concat(o.join(" ")+("polygon"===e.tagName?" Z":""))}break;case"circle":var u=e,h=u.r.baseVal.value;h>0&&(this.d="M".concat(u.cx.baseVal.value,",").concat(u.cy.baseVal.value," m-").concat(h,",0 a").concat(h,",").concat(h," 0 1,0 ").concat(2*h,",0 a").concat(h,",").concat(h," 0 1,0 -").concat(2*h,",0"));break;case"ellipse":var c=e,f=c.rx.baseVal.value,d=c.ry.baseVal.value;f>0&&d>0&&(this.d="M".concat(c.cx.baseVal.value-f,",").concat(c.cy.baseVal.value," a").concat(f,",").concat(d," 0 1,0 ").concat(2*f,",0 a").concat(f,",").concat(d," 0 1,0 -").concat(2*f,",0"))}var g={fill:we(e,"fill"),stroke:we(e,"stroke")},p=tt(we(e,"color"))||tt(Ae(e,"color")),m=/url\("?#(.*?)"?\)/;for(var v in g){var y=m.exec(g[v]);if(y)g[v]="@".concat(y[1]);else if(q(g[v]))switch(g[v].toLowerCase()){case"none":case"transparent":g[v]="";break;case"currentcolor":g[v]=p?p.valueRGB:"";break;default:var b=tt(g[v]);b&&(g[v]=b.valueRGB)}}var E="",x=m.exec(we(e,"clip-path"));x&&(E=x[1]);var A=parseFloat(we(e,"fill-opacity")),k=parseFloat(we(e,"stroke-opacity"));this.name=e.id,this.color=p?p.valueRGB:"",this.fillRule=we(e,"fill-rule"),this.fill=g.fill,this.stroke=g.stroke,this.strokeWidth=""+H(we(e,"stroke-width")),this.fillOpacity=!isNaN(A)&&A<1?A:1,this.strokeOpacity=!isNaN(k)&&k<1?k:1,this.strokeLinecap=we(e,"stroke-linecap"),this.strokeLinejoin=we(e,"stroke-linejoin"),this.strokeMiterlimit=we(e,"stroke-miterlimit"),this.clipPath=E,this.clipRule=we(e,"clip-rule"),this.visibility=at(e)}}},{key:"element",get:function(){return this._element}}]),e}(),ct=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,lt(Object)),t}(),ft=function(e){function t(e,n){var i;return r(this,t),(i=h(this,s(t).call(this,e))).uri="",n&&(i.uri=n),i}return l(t,ct),o(t,[{key:"setElement",value:function(e){e instanceof SVGImageElement&&(this._element=e)}}]),t}(),dt=function(e){function t(e){var n;return r(this,t),(n=h(this,s(t).call(this))).defs={image:[],clipPath:new Map,gradient:new Map},n._width=0,n._height=0,n._viewBoxWidth=0,n._viewBoxHeight=0,n._opacity=1,e&&(n.setElement(e),n.build()),n}return l(t,I),o(t,[{key:"setElement",value:function(e){e instanceof SVGSVGElement&&(this._element=e)}},{key:"setDimensions",value:function(e,t){this._width=e,this._height=t}},{key:"setViewBox",value:function(e,t){this._viewBoxWidth=e,this._viewBoxHeight=t}},{key:"setOpacity",value:function(e){this._opacity=!isNaN(e=parseFloat(""+e))&&e<1?e:1}},{key:"build",value:function(){var e=this,n=this._element;if(n){this.name=n.id,this.defs.image=[],this.setDimensions(n.width.baseVal.value,n.height.baseVal.value),this.setViewBox(n.viewBox.baseVal.width,n.viewBox.baseVal.height),this.setOpacity(we(n,"opacity")),n.querySelectorAll("clipPath, linearGradient, radialGradient, image").forEach(function(n){switch(n.tagName){case"clipPath":var i=t.createClipPath(n);i.length>0&&e.defs.clipPath.set("".concat(n.id),i);break;case"linearGradient":var r=n;e.defs.gradient.set("@".concat(r.id),{type:"linear",x1:r.x1.baseVal.value,x2:r.x2.baseVal.value,y1:r.y1.baseVal.value,y2:r.y2.baseVal.value,x1AsString:r.x1.baseVal.valueAsString,x2AsString:r.x2.baseVal.valueAsString,y1AsString:r.y1.baseVal.valueAsString,y2AsString:r.y2.baseVal.valueAsString,colorStop:it(r)});break;case"radialGradient":var a=n;e.defs.gradient.set("@".concat(a.id),{type:"radial",cx:a.cx.baseVal.value,cy:a.cy.baseVal.value,r:a.r.baseVal.value,cxAsString:a.cx.baseVal.valueAsString,cyAsString:a.cy.baseVal.valueAsString,rAsString:a.r.baseVal.valueAsString,fx:a.fx.baseVal.value,fy:a.fy.baseVal.value,fxAsString:a.fx.baseVal.valueAsString,fyAsString:a.fy.baseVal.valueAsString,colorStop:it(a)});break;case"image":var o=n,l=new ft(o,ee(o.href.baseVal));l.width=o.width.baseVal.value,l.height=o.height.baseVal.value,l.x=o.x.baseVal.value,l.y=o.y.baseVal.value,e.defs.image.push(l)}});var i=new Set(["svg","g"]);[n].concat(g(Array.from(n.children).filter(function(e){return i.has(e.tagName)}))).forEach(function(t,n){var i=new ut(t);if(n>0&&"svg"===t.tagName){var r=t;i.x=r.x.baseVal.value,i.y=r.y.baseVal.value,i.width=r.width.baseVal.value,i.height=r.height.baseVal.value}for(var a=0;a<t.children.length;a++){switch(t.children[a].tagName){case"g":case"use":case"image":case"clipPath":case"linearGradient":case"radialGradient":break;default:var o=new ht(t.children[a]);o.d&&"none"!==o.d&&i.append(o)}}e.append(i)}),n.querySelectorAll("use").forEach(function(t){var n;if("none"!==we(t,"display")&&(e.some(function(e){return e.some(function(e){return t.href.baseVal==="#".concat(e.name)&&(n=e,!0)})}),n)){var i=new ht(t,n.d);if(i){var r=!1;if(0===t.transform.baseVal.numberOfItems&&0===t.x.baseVal.value&&0===t.y.baseVal.value&&0===t.width.baseVal.value&&0===t.height.baseVal.value&&e.some(function(e){return t.parentElement instanceof SVGGraphicsElement&&t.parentElement===e.element&&(e.append(i),r=!0,!0)}),!r){var a=new ut(t);a.x=t.x.baseVal.value,a.y=t.y.baseVal.value,a.width=t.width.baseVal.value,a.height=t.height.baseVal.value,a.append(i),e.append(a)}}}});for(var r=new Set,a=Array.from(n.children),o=0;o<a.length;o++)for(var l=a[o],s=new Set(Array.from(l.querySelectorAll("*"))),u=Array.isArray(c=this.list),h=0,c=u?c:c[Symbol.iterator]();;){var f;if(u){if(h>=c.length)break;f=c[h++]}else{if((h=c.next()).done)break;f=h.value}var d=f;if(d.element&&(d.element===l||s.has(d.element))){r.delete(d),r.add(d);break}for(var p=Array.isArray(v=d),m=0,v=p?v:v[Symbol.iterator]();;){var y;if(p){if(m>=v.length)break;y=v[m++]}else{if((m=v.next()).done)break;y=m.value}if(y.element&&(y.element===l||s.has(y.element))){r.delete(d),r.add(d);break}}}this.replace(g(this.filter(function(e){return e.length>0&&!r.has(e)})).concat(g(r)))}}},{key:"element",get:function(){return this._element}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"viewBoxWidth",get:function(){return this._viewBoxWidth}},{key:"viewBoxHeight",get:function(){return this._viewBoxHeight}},{key:"opacity",get:function(){return this._opacity}}],[{key:"createClipPath",value:function(e){var t=[];if(e.id)for(var n=Array.from(e.children),i=0;i<n.length;i++){var r=new ht(n[i]);r&&t.push(r)}return t}}]),t}();function gt(e){return"{".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:":")+""+e,"}")}function pt(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="number"==typeof t?gt(t):t;return e.replace(r,(i?r:"")+n+(i?"":r))}function mt(e,t){if(t>=0){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+ae(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function vt(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t))}).replace(/\u00A0/g,"&#160;").replace(/\u2002/g,"&#8194;").replace(/\u2003/g,"&#8195;").replace(/\u2009/g,"&#8201;").replace(/\u200C/g,"&#8204;").replace(/\u200D/g,"&#8205;").replace(/\u200E/g,"&#8206;").replace(/\u200F/g,"&#8207;")}var yt=Object.freeze({formatPlaceholder:gt,removePlaceholderAll:function(e){return e.replace(/{[<:@>]\d+(:\d+)?}/g,"").trim()},replacePlaceholder:pt,replaceIndent:mt,replaceTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return t>0&&(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.split("\n").map(function(e){var n=e.match(/^(\t+)(.*)$/);return n?" ".repeat(t*n[1].length)+n[2]:e}).join("\n"):e.replace(/\t/g," ".repeat(t))),e},replaceEntity:vt,replaceCharacter:function(e){return e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z0-9]{2,};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},parseTemplate:function(e){for(var t,n={__root:e},i=!1,r=e.length,a="";;){if(i){var o=i[0].replace(RegExp("^".concat(i[1],"\\n")),"").replace(RegExp("".concat(i[1],"$")),"");for(var l in n)n[l]=n[l].replace(RegExp(i[0],"g"),"{%".concat(i[2],"}"));n[i[2]]=o,r-=i[0].length,a=i[2]}if(null===i||0===r){if(!a)break;if(!(e=n[a]))break;r=e.length,a="",i=null}if(i||(t=/(!(\w+))\n[\w\W]*\n*\1/g),!t)break;i=t.exec(e)}return n},createTemplate:function e(t,n,i){var r=void 0===i?t.__root.trim():t[i];for(var a in n){var o="";if(K(n[a])){for(var l=0;l<n[a].length;l++)o+=e(t,n[a][l],""+a);o=re(o,"\\n")}else o=n[a];var s="";q(o)&&(s=K(n[a])?"%":"[&~]",r=r.replace(RegExp("{".concat(s+a,"}"),"g"),o)),(!1===o||Array.isArray(o)&&0===o.length||s&&"%"!==s)&&(r=r.replace(RegExp("{%".concat(a,"}\\n*"),"g"),"")),""===s&&RegExp("{&".concat(a,"}")).test(r)&&(r="")}return void 0===i&&(r=r.replace(/\n{%\w+}\n/g,"\n")),r.replace(/\s+([\w:]+="[^"]*)?{~\w+}"?/g,"")},getTemplateSection:function(e){for(var t=e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=d(i[a].split("-"),2),l=o[0],s=o[1],u=void 0===s?"0":s;if(!t[l]||!t[l][parseInt(u)])return{};t=t[l][parseInt(u)]}return t}});function bt(e,t){for(var n=[],i=t;i;)n=g(n).concat(g(te(i.dataset.ext).split(",").map(function(e){return e.trim()}))),i=i.parentElement;if((n=n.filter(function(e){return e})).length>0){for(var r=[],a=[],o=Array.isArray(s=e),l=0,s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}var h=u,c=n.indexOf(h.name);-1!==c?r[c]=h:a.push(h)}return g(r.filter(function(e){return e})).concat(a)}return e}var Et=function(){function e(t){r(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cacheImage=new Map,this.cacheSession=new He,this.cacheProcessing=new He,this.viewElements=new Set,this.extensions=[],this._cacheRoot=new Set,this._renderPosition={},this._currentIndex=-1,this._views=[],this._includes=[]}return o(e,[{key:"registerController",value:function(e){e.application=this,e.cache=this.cacheProcessing,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.cache=this.cacheProcessing,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);return n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options),!0):!(0!==e.framework&&!Y(e.framework,this.framework)||!e.dependencies.every(function(e){return!!t.getExtension(e.name)}))&&(e.application=this,this.extensions.push(e),!0)}},{key:"finalize",value:function(){for(var e=this.cacheSession.visible.filter(function(e){return e.rendered&&!e.hasAlign(x.SPACE)}),t=Array.isArray(i=e),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r;a.hasBit("excludeProcedure",k.LAYOUT)||a.setLayout(),a.hasBit("excludeProcedure",k.ALIGNMENT)||a.setAlignment()}for(var o=Array.isArray(s=e),l=0,s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}var h=u;h.hasBit("excludeProcedure",k.OPTIMIZATION)||h.applyOptimizations(),h.hasBit("excludeProcedure",k.CUSTOMIZATION)||h.applyCustomizations()}this.viewController.setBoxSpacing(this.viewData),this.processRenderQueue(),this.viewController.finalize(this.viewData,this.resourceHandler.finalize(this.viewData));for(var c=Array.isArray(d=this.extensions),f=0,d=c?d:d[Symbol.iterator]();;){var g;if(c){if(f>=d.length)break;g=d[f++]}else{if((f=d.next()).done)break;g=f.value}for(var p=g,m=Array.isArray(y=p.subscribers),v=0,y=m?y:y[Symbol.iterator]();;){var b;if(m){if(v>=y.length)break;b=y[v++]}else{if((v=y.next()).done)break;b=v.value}p.setTarget(b),p.finalize()}}this.closed=!0}},{key:"saveAllToDisk",value:function(){this.resourceHandler.file.saveAllToDisk(this.viewData)}},{key:"reset",value:function(){this.cacheSession.each(function(e){return e.domElement&&Fe(e.element,"node","style","styleMap","inlineSupport","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")});for(var e=Array.isArray(n=this._cacheRoot),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;delete r.dataset.iteration,delete r.dataset.layoutName}this.appName="",this.renderQueue={},this.cacheImage.clear(),this.cacheSession.reset(),this.cacheProcessing.reset(),this.viewController.reset(),this.resourceHandler.reset(),this._cacheRoot.clear(),this._views.length=0,this._includes.length=0,this._renderPosition={},this._currentIndex=-1;for(var a=Array.isArray(l=this.extensions),o=0,l=a?l:l[Symbol.iterator]();;){var s;if(a){if(o>=l.length)break;s=l[o++]}else{if((o=l.next()).done)break;s=o.value}var u=s;u.subscribers.clear(),u.subscribersChild.clear()}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"setImageCache",value:function(e){e&&se(e.src)&&this.cacheImage.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,uri:e.src})}},{key:"parseDocument",value:function(){var e,t=this;this.viewElements.clear(),this.loading=!1,this.setStyleMap();for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];""===this.appName&&0===i.length&&i.push(document.body);for(var a=0;a<i.length;a++){var o=i[a],l="string"==typeof o?document.getElementById(o):o;l&&Oe(l)&&this.viewElements.add(l)}var s=this.viewElements.values().next().value,u=function(){t.loading=!1,t.settings.preloadImages&&Array.from(s.getElementsByClassName("androme.preload")).forEach(function(e){return s.removeChild(e)});var n=t.cacheImage.entries(),i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var o=d(a,2);t.resourceHandler.imageAssets.set(o[0],o[1])}for(var l=Array.isArray(h=t.viewElements),u=0,h=l?h:h[Symbol.iterator]();;){var c;if(l){if(u>=h.length)break;c=h[u++]}else{if((u=h.next()).done)break;c=u.value}var f=c;""===t.appName&&(""===f.id&&(f.id="untitled"),t.appName=f.id);var g=te(f.dataset.filename).replace(RegExp(".".concat(t.viewController.localSettings.layout.fileExtension,"$")),"");""===g&&(""===f.id&&(f.id="document_".concat(t.size)),g=f.id);var p=H(f.dataset.iteration)+1;f.dataset.iteration=""+p,f.dataset.layoutName=G(p>1?"".concat(g,"_").concat(p):g),t.createCache(f)&&(t.createDocument(),t.setConstraints(),t.setResources(),t._cacheRoot.add(f))}"function"==typeof e&&e.call(t)};if(this.settings.preloadImages){Array.from(this.viewElements).forEach(function(e){e.querySelectorAll("svg image").forEach(function(e){if(e.href){var n=ee(e.href.baseVal);n&&t.cacheImage.set(n,{width:e.width.baseVal.value,height:e.height.baseVal.value,uri:n})}})});var h=this.cacheImage.values(),c=Array.isArray(h),f=0;for(h=c?h:h[Symbol.iterator]();;){var g;if(c){if(f>=h.length)break;g=h[f++]}else{if((f=h.next()).done)break;g=f.value}var p=g;if(0===p.width&&0===p.height&&p.uri){var m=document.createElement("IMG");m.src=p.uri,m.complete&&m.naturalWidth>0&&m.naturalHeight>0?(p.width=m.naturalWidth,p.height=m.naturalHeight):(m.className="androme.preload",m.style.display="none",s.appendChild(m))}}}var v=Array.from(this.viewElements).map(function(e){var n=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e instanceof SVGImageElement||(e.complete?t.setImageCache(e):n.push(e))}),n}).reduce(function(e,t){return e.concat(t)},[]);if(0===v.length)u();else{this.loading=!0;var y=v.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(y).then(function(e){if(Array.isArray(e))for(var n=Array.isArray(r=e),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a;try{t.setImageCache(o.srcElement)}catch(e){}}u()}).catch(function(e){var t=e.srcElement?e.srcElement.src:"";se(t)&&!confirm("FAIL: ".concat(t))||u()})}return{then:function(n){t.loading?e=n:n()}}}},{key:"createCache",value:function(e){var t=this,n=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return _e(e,t.settings.hideOffScreenElements)&&++n>1});var i=e!==document.body?e.querySelectorAll("*"):document.querySelectorAll(n>1?"body, body *":"body *");this.nodeProcessing=void 0,this.cacheProcessing.delegateAppend=void 0,this.cacheProcessing.clear();for(var r=Array.isArray(o=this.extensions),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var s=l;s.setTarget(void 0,void 0,e),s.beforeInit()}var u=this.insertNode(e);if(!u)return!1;u.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body,this.viewController.delegateNodeInit),u.documentRoot=!0,this.nodeProcessing=u;var h=this.viewController.localSettings,c=h.inline.always,f=this.settings.renderInlineText?[]:h.inline.tagName;function d(e){var t=Be(e,"styleMap");return(void 0===t||0===Object.keys(t).length)&&0===e.children.length&&f.includes(e.tagName)}for(var p=Array.from(i),m=function(){var n=p[v];if(!t.viewElements.has(n)&&(bt(t.extensions,n).some(function(e){return e.init(n)}),!t.viewElements.has(n)&&!h.unsupported.tagName.includes(n.tagName))){(c.includes(n.tagName)||d(n)&&n.parentElement&&Array.from(n.parentElement.children).every(function(e){return d(e)}))&&Me(n,"inlineSupport",!0);for(var i=!0,r=n.parentElement;r&&r!==e;){if(r!==e&&t.viewElements.has(r)){i=!1;break}r=r.parentElement}if(i){var a=Be(n,"styleMap");switch(void 0===a&&Me(n,"styleMap",a={}),n.tagName){case"SELECT":void 0===a.verticalAlign&&n.size>1&&(a.verticalAlign="text-bottom")}t.insertNode(n)}}},v=0;v<p.length;v++)m();if(this.cacheProcessing.length>0){for(var y=function(){if(b){if(E>=x.length)return"break";A=x[E++]}else{if((E=x.next()).done)return"break";A=E.value}var e=A,n=[],i=!1;Array.from(e.element.childNodes).forEach(function(t){if("#text"===t.nodeName)"SELECT"!==e.tagName&&n.push(t);else if("BR"!==t.tagName){var r=Ge.getNodeFromElement(t);(!f.includes(t.tagName)||r&&!r.excluded)&&(i=!0)}}),i&&n.forEach(function(n){return t.insertNode(n,e)})},b=Array.isArray(x=this.cacheProcessing),E=0,x=b?x:x[Symbol.iterator]();;){var A;if("break"===y())break}for(var k={},T=[],w=function(){if(S){if(I>=N.length)return"break";R=N[I++]}else{if((I=N.next()).done)return"break";R=I.value}var e=R;if(e.styleElement){var t=e.element,n=e.css("textAlign");k[e.id]={};var i=k[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(i.textAlign=e,t.style.textAlign="left",!0)}),e.marginLeft<0&&(i.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),e.marginTop<0&&(i.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(i[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(i.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(i.height=e.styleMap.height,t.style.height="auto"),i.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",T.push(t)),e.setBounds()}e.setMultiLine()},S=Array.isArray(N=this.cacheProcessing),I=0,N=S?N:N[Symbol.iterator]();;){var R;if("break"===w())break}for(var L=Array.isArray(O=this.cacheProcessing),C=0,O=L?O:O[Symbol.iterator]();;){var _;if(L){if(C>=O.length)break;_=O[C++]}else{if((C=O.next()).done)break;_=C.value}var M=_;if(M.styleElement){var B=M.element,F=k[M.id];if(F){for(var D in F)B.style[D]=F[D];T.includes(B)&&(B.dir="rtl")}}if(1===M.length){var P=M.item(0);P.pageflow||0!==P.toInt("top")||0!==P.toInt("right")||0!==P.toInt("bottom")||0!==P.toInt("left")||(P.pageflow=!0)}}for(var G=Array.isArray(H=this.cacheProcessing),V=0,H=G?H:H[Symbol.iterator]();;){var z;if(G){if(V>=H.length)break;z=H[V++]}else{if((V=H.next()).done)break;z=V.value}var U=z;if(!U.documentRoot){var X=U.getParentElementAsNode(this.settings.supportNegativeLeftTop);X||U.pageflow||(X=this.nodeProcessing),X?(U.parent=X,U.documentParent=X):U.hide()}}for(var W=Array.isArray(Y=this.cacheProcessing.elements),j=0,Y=W?Y:Y[Symbol.iterator]();;){var Z;if(W){if(j>=Y.length)break;Z=Y[j++]}else{if((j=Y.next()).done)break;Z=j.value}var q=Z;q.htmlElement&&function(){var e,t=0;Array.from(q.element.childNodes).forEach(function(e){var n=Ge.getNodeFromElement(e);n&&!n.excluded&&n.pageflow&&(n.siblingIndex=t++)}),q.sort(He.siblingIndex),(e=q.initial.children).push.apply(e,g(q.duplicate()))}()}ce(this.cacheProcessing.list,"depth","id");for(var K=Array.isArray($=this.extensions),Q=0,$=K?$:$[Symbol.iterator]();;){var J;if(K){if(Q>=$.length)break;J=$[Q++]}else{if((Q=$.next()).done)break;J=Q.value}var ee=J;ee.setTarget(u),ee.afterInit()}return!0}return!1}},{key:"createDocument",value:function(){var t=this,n=this.viewController.localSettings,i=[],r=new Map,a=n.baseTemplate,o=!0;function l(e,t,n){r.has(e)||r.set(e,new Map);var i=r.get(e);i&&i.set(t,n)}function s(e){var t=r.values(),n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(i>=t.length)break;a=t[i++]}else{if((i=t.next()).done)break;a=i.value}var o=a,l=o.values(),s=Array.isArray(l),u=0;for(l=s?l:l[Symbol.iterator]();;){var h;if(s){if(u>=l.length)break;h=l[u++]}else{if((u=l.next()).done)break;h=u.value}if(h.id===e)return void o.delete(h.id)}}}l(-1,0,this.nodeProcessing.parent);for(var u=0,h=Array.isArray(f=this.cacheProcessing.visible),c=0,f=h?f:f[Symbol.iterator]();;){var p;if(h){if(c>=f.length)break;p=f[c++]}else{if((c=f.next()).done)break;p=c.value}var m=p,v=Math.floor(m.linear.left);void 0===i[m.depth]&&(i[m.depth]={}),void 0===i[m.depth][v]&&(i[m.depth][v]=[]),i[m.depth][v].push(m),l(m.depth,m.id,m),u=Math.max(m.depth,u)}for(var y=0;y<u;y++)r.set(-1*y-2,new Map);this.cacheProcessing.delegateAppend=function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e),e.cascade().forEach(function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e)})};var b=function(){if(I){if(N>=k.length)return"break";R=k[N++]}else{if((N=k.next()).done)return"break";R=N.value}var l=R;function s(e,t,n,i,r){var a=n+(""===r&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(a)||e.set(a,new Map);var o=e.get(a);o&&o.set(t.id,i)}var u=new Map,h=new Map,c=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!==i)if(arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&e.each(function(t){[u,h].some(function(n){var i=u.values(),a=Array.isArray(i),o=0;for(i=a?i:i[Symbol.iterator]();;){var l;if(a){if(o>=i.length)break;l=i[o++]}else{if((o=i.next()).done)break;l=o.value}var h=l,c=h.get(t.id);if(c){var f=e.renderDepth+1;return t.renderDepth!==f&&(c=mt(c,f),t.renderDepth=f),s(n,t,""+e.id,c,r),h.delete(t.id),!0}}return!1})}),""!==r)s(h,e,r,i,r);else{if(!t.viewElements.has(e.element))if(e.dataset.target){var a=document.getElementById(e.dataset.target);if(a&&a!==n.element)return t.addRenderQueue(e.dataset.target,[i]),void(e.auto=!1)}else if(n.dataset.target){if(document.getElementById(n.dataset.target))return t.addRenderQueue(n.nodeId,[i]),void(e.dataset.target=n.nodeId)}s(u,e,""+n.id,i,r)}},f=function(){if(m){if(v>=p.length)return"break";y=p[v++]}else{if((v=p.next()).done)return"break";y=v.value}var a=y;if(0===a.length||a.every(function(e){return e.rendered}))return"continue";var o=[],l=[],s=[],u=[];a.each(function(e){e.documentRoot?o.push(e):e.pageflow||e.alignOrigin?s.push(e):e.toInt("zIndex")>=0||e.parent.element!==e.element.parentElement?u.push(e):l.push(e)}),He.sortByAlignment(s,x.NONE,a),o.push.apply(o,g(ce(l,"style.zIndex","id"))),o.push.apply(o,s),o.push.apply(o,g(ce(u,"style.zIndex","id")));var h=a.filter(function(e){return e.siblingflow}).map(function(e){return e.documentParent}),f=He.cleared(1===new Set(h).size?Array.from(h[0].baseElement.children).map(function(e){return Ge.getNodeFromElement(e)}).filter(function(e){return e}):o),d=[],b="",k=-1;function I(){return d.length>0?d[d.length-1]:""}for(var N=function(){var a=o[k];if(!a.visible||a.rendered||!a.documentRoot&&t.viewElements.has(a.element))return"continue";var l=a.parent,s="";if(n.includes)if(a.hasBit("excludeSection",E.INCLUDE))s="";else{var u=te(a.dataset.include);if(""!==u&&-1===d.indexOf(u)&&(c(a,l,t.viewController.renderInclude(a,l,u),I()),d.push(u)),""!==(b=I())){var h=l.clone();h.renderDepth=t.viewController.baseRenderDepth(b),a.parent=h,l=h}s=b}if(a.renderAs&&(l.remove(a),a.hide(),a=a.renderAs),!a.hasBit("excludeSection",E.DOM_TRAVERSE)&&o.length>1&&k<o.length-1){var p=l.linearVertical;if(a.pageflow&&""===b&&!l.flex.enabled&&!l.has("columnCount")&&!l.is(T.GRID)&&(a.hasAlign(x.EXTENDABLE)||a.alignmentType===x.NONE&&l.alignmentType===x.NONE)){var m,v=[],y=[],N=new Set(["left","right"]),R=!1,L=k,C=0;a.hasAlign(x.EXTENDABLE)&&(v.push(a),L++,C++);e:for(;L<o.length;L++,C++){var _=o[L];if(_.pageflow){var M=f.get(_);M&&("both"===M?N.clear():N.delete(M)),_.floating&&N.add(_.float);var B=_.previousSibling(),F=_.nextSibling(!0);if(0===C&&F)_.blockStatic||F.alignedVertically(_,f,!0)?y.push(_):v.push(_);else{if(!B)break e;switch(function(){var e=He.floated(v.concat(y)),n=v.concat(y,[_]),i=He.cleared(n),r=new Map;(i.has(B)||B.lineBreak&&f.has(B))&&r.set(B,B.css("clear"));var a=_.alignedVertically(B,r);if(a||i.has(_)||t.settings.floatOverlapDisabled&&B.floating&&_.blockStatic&&2===N.size){if(v.length>0){if(!t.settings.floatOverlapDisabled&&N.size>0&&!n.map(function(e){return i.get(e)}).includes("both")&&(0===e.size||_.bounds.top<Math.max.apply(null,v.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom})))){if(i.has(_))return N.size<2&&2===e.size&&!_.floating?(_.alignmentType|=x.EXTENDABLE,R=!0,v.push(_),"continue"):"break|mainloop";if(!a)return v.push(_),"continue";if(1===e.size&&(!_.floating||N.has(_.float)))return v.push(_),"continue"}return"break|mainloop"}if(p&&y.length>0){var o=y[y.length-1];if(o.linearVertical)return _.parent=o,"continue"}y.push(_)}else{if(y.length>0||R)return"break|mainloop";v.push(_)}}()){case"continue":continue;case"break|mainloop":break e}}}}var D="";if(v.length>1){var P=He.cleared(v);if(e.isFrameHorizontal(v,P))m=t.viewController.createGroup(l,a,v),D=t.writeFrameLayoutHorizontal(m,l,v,P);else if(v.length===o.length)l.alignmentType|=x.HORIZONTAL;else{var G=He.floated(v);1===G.size&&v.some(function(e){return e.has("width",S.PERCENT)})&&v.every(function(e){return e.has("width",S.UNIT|S.PERCENT)})?(m=t.viewController.createGroup(l,a,v),D=t.writeConstraintLayout(m,l),m.alignmentType|=x.PERCENT):e.isRelativeHorizontal(v,P)?(m=t.viewController.createGroup(l,a,v),D=t.writeRelativeLayout(m,l),m.alignmentType|=x.HORIZONTAL):(m=t.viewController.createGroup(l,a,v),D=t.writeLinearLayout(m,l,!0),G.size>0?(m.alignmentType|=x.FLOAT,m.alignmentType|=v.every(function(e){return"right"===e.float||e.autoMarginLeft})?x.RIGHT:x.LEFT):m.alignmentType|=x.HORIZONTAL)}}else if(y.length>1){var V=He.floated(y),H=He.cleared(y);if(V.size>0&&H.size>0&&(1!==V.size||!y.slice(1,y.length-1).every(function(e){return H.has(e)}))?l.linearVertical&&!se(a.dataset.ext)?(m=a,D=t.writeFrameLayoutVertical(void 0,l,y,H)):(m=t.viewController.createGroup(l,a,y),D=t.writeFrameLayoutVertical(m,l,y,H)):y.length===o.length?l.alignmentType|=x.VERTICAL:p||(m=t.viewController.createGroup(l,a,y),D=t.writeLinearLayout(m,l,!1),m.alignmentType|=x.VERTICAL),y.length!==o.length){var z=y[y.length-1];z.blockStatic||z===o[o.length-1]||(z.alignmentType|=x.EXTENDABLE)}}m&&(c(m,l,D,"",!0),l=a.parent),a.hasAlign(x.EXTENDABLE)&&(a.alignmentType^=x.EXTENDABLE)}}if(!a.hasBit("excludeSection",E.EXTENSION)&&!a.rendered){for(var U=!1,X=g(l.renderExtension).concat(g(t.extensions.filter(function(e){return e.subscribersChild.has(a)}))),W=0;W<X.length;W++){var j=X[W];j.setTarget(a,l);var Y=j.processChild();if(""!==Y.output&&c(a,l,Y.output,s),Y.renderAs&&Y.renderOutput&&c(Y.renderAs,l,Y.renderOutput,s),Y.parent&&(l=Y.parent),U=!!Y.next,Y.complete||Y.next)break}if(U)return"continue";if(a.styleElement){var Z=[];if(bt(t.extensions,a.element).some(function(e){if(e.is(a)&&(e.setTarget(a,l),e.condition())){var t=e.processNode(i,r);if(""!==t.output&&c(a,l,t.output,s),t.renderAs&&t.renderOutput&&c(t.renderAs,l,t.renderOutput,s),t.parent&&(l=t.parent),(""!==t.output||t.include)&&Z.push(e),U=!!t.next,t.complete||t.next)return!0}return!1}),Z.forEach(function(e){return e.subscribers.add(a)&&a.renderExtension.add(e)}),U)return"continue"}}if(!a.hasBit("excludeSection",E.RENDER)&&!a.rendered){var q="";if(""===a.controlName){var K=a.borderTopWidth>0||a.borderBottomWidth>0||a.borderRightWidth>0||a.borderLeftWidth>0,Q=O.CSS_URL.test(a.css("backgroundImage"))||O.CSS_URL.test(a.css("background")),$=a.has("backgroundColor"),J=K||Q||$;if(0===a.length)Ie(a.element,t.settings.renderInlineText?0:1)||K&&a.textContent.length>0?q=t.writeNode(a,l,T.TEXT):Q&&"no-repeat"===a.css("backgroundRepeat")&&(!a.inlineText||a.toInt("textIndent")+a.bounds.width<0)?(a.alignmentType|=x.SINGLE,a.excludeResource|=A.FONT_STYLE|A.VALUE_STRING,q=t.writeNode(a,l,T.IMAGE)):a.block&&($||Q)&&(K||a.paddingTop+a.paddingRight+a.paddingRight+a.paddingLeft>0)?q=t.writeNode(a,l,T.LINE):a.documentRoot||(!t.settings.collapseUnattributedElements||0!==a.bounds.height||se(a.element.id)||se(a.dataset.ext)||J?q=J?t.writeNode(a,l,T.TEXT):t.writeFrameLayout(a,l):(l.remove(a),a.hide()));else if(a.flex.enabled||a.some(function(e){return!e.pageflow})||a.has("columnCount"))q=t.writeConstraintLayout(a,l);else if(1===a.length){var ee=a.filter(function(e){if(e.dataset.target){var t=document.getElementById(e.dataset.target);return null!==t&&se(t.dataset.ext)&&t!==l.element}return!1});if(!(!t.settings.collapseUnattributedElements||a.documentRoot||se(a.element.id)||se(a.dataset.ext)||se(a.dataset.target)||0!==a.toInt("width")||0!==a.toInt("height")||J||a.has("textAlign")||a.has("verticalAlign")||"right"===a.float||a.autoMargin||!a.alignOrigin||t.viewController.hasAppendProcessing(a.id))||a.documentRoot&&1===ee.length){var ne=a.item(0);return ne.documentRoot=a.documentRoot,ne.siblingIndex=a.siblingIndex,0!==l.id&&(ne.parent=l),0===ee.length&&(a.resetBox(w.MARGIN,ne,!0),ne.modifyBox(w.MARGIN_TOP,a.paddingTop),ne.modifyBox(w.MARGIN_RIGHT,a.paddingRight),ne.modifyBox(w.MARGIN_BOTTOM,a.paddingBottom),ne.modifyBox(w.MARGIN_LEFT,a.paddingLeft)),a.hide(),o[k]=ne,k--,"continue"}q=t.writeFrameLayout(a,l)}else{var ie=a.list,re=[He.linearX(ie),He.linearY(ie)],ae=re[0],oe=re[1],le=He.cleared(ie),ue=ie.every(function(e){return e.pageflow&&e.inlineElement});if(!l.flex.enabled&&ie.every(function(e){return e.pageflow})){var he=He.floated(ie);ae&&0===le.size?(0===he.size&&ie.every(function(e){return 0===e.toInt("verticalAlign")})&&(ie.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?(q=t.writeConstraintLayout(a,l),a.alignmentType|=x.HORIZONTAL):e.isRelativeHorizontal(ie)&&(q=t.writeRelativeLayout(a,l),a.alignmentType|=x.HORIZONTAL)),""===q&&(0!==he.size&&he.has("right")||(e.isRelativeHorizontal(ie)?(q=t.writeRelativeLayout(a,l),a.alignmentType|=x.HORIZONTAL):(q=t.writeLinearLayout(a,l,!0),a.alignmentType|=x.HORIZONTAL)))):(oe||!ue&&ie.some(function(e){return e.alignedVertically(e.previousSibling(),le)}))&&(q=t.writeLinearLayout(a,l,!1),oe&&!a.documentRoot&&(a.alignmentType|=x.VERTICAL))}""===q&&(ue?e.isFrameHorizontal(ie,le,!0)?q=t.writeFrameLayoutHorizontal(a,l,ie,le):(q=t.writeRelativeLayout(a,l),0===Ce(ie[0].baseElement,ie[ie.length-1].baseElement).filter(function(e){return Le(e)}).length&&(a.alignmentType|=x.HORIZONTAL)):q=t.writeConstraintLayout(a,l))}}else q=t.writeNode(a,l,a.controlName);c(a,l,q,s)}n.includes&&!a.hasBit("excludeSection",E.INCLUDE)&&"true"===a.dataset.includeEnd&&d.pop()};++k<o.length;)N()};var p=l.values(),m=Array.isArray(p),v=0;e:for(p=m?p:p[Symbol.iterator]();;){var y;switch(f()){case"break":break e;case"continue":continue}}var b=function(){if(C){if(_>=L.length)return"break";M=L[_++]}else{if((_=L.next()).done)return"break";M=_.value}var e=d(M,2),n=e[1],i=[],r=d(e[0].split(":"),2),l=r[0],s=r[1],u=Array.from(n.values());if(u.length>0){if(t._renderPosition[l]){var h=[];t._renderPosition[l].forEach(function(e){var t=u.find(function(t){return-1!==t.indexOf(gt(e,"@"))});t&&h.push(t)}),h.length===u.length&&i.push.apply(i,h)}0===i.length&&i.push.apply(i,g(u));var c=l+(s?":".concat(s):""),f=gt(c);-1!==a.indexOf(f)?(a=pt(a,f,i.join("")),o=!1):t.addRenderQueue(c,u)}},L=u.entries(),C=Array.isArray(L),_=0;for(L=C?L:L[Symbol.iterator]();;){var M;if("break"===b())break}if(n.includes){var B=h.entries(),F=Array.isArray(B),D=0;for(B=F?B:B[Symbol.iterator]();;){var P;if(F){if(D>=B.length)break;P=B[D++]}else{if((D=B.next()).done)break;P=D.value}var G=d(P,2),V=G[0],H=Array.from(G[1].values());if(H.length>0){var z=t.viewController.renderMerge(V,H);t.addIncludeFile(V,z)}}}},k=r.values(),I=Array.isArray(k),N=0;for(k=I?k:k[Symbol.iterator]();;){var R;if("break"===b())break}var L=this.nodeProcessing;if(L){var C;if(!L.dataset.layoutName||se(L.dataset.target)&&0!==L.renderExtension.size||this.addLayoutFile(ne(te(L.dataset.pathname),"/"),L.dataset.layoutName,o?"":a,L.renderExtension.size>0&&Array.from(L.renderExtension).some(function(e){return e.documentRoot})),o)0===L.renderExtension.size&&L.hide();else for(var _=Array.isArray(B=this.extensions),M=0,B=_?B:B[Symbol.iterator]();;){var F;if(_){if(M>=B.length)break;F=B[M++]}else{if((M=B.next()).done)break;F=M.value}var D=F;D.setTarget(L),D.afterRender()}this.cacheProcessing.sort(function(e,t){if(e.visible){if(t.visible){if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=Ge.getNodeFromElement(e.baseElement);if(!n)return 1;e=n}if(!t.domElement){var i=Ge.getNodeFromElement(e.baseElement);if(!i)return-1;t=i}return e.documentParent!==t.documentParent?e.documentParent.id<t.documentParent.id?-1:1:e.renderIndex<t.renderIndex?-1:1}return-1}return 1}),(C=this.cacheSession.list).push.apply(C,g(this.cacheProcessing.list))}}},{key:"writeFrameLayout",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||0!==e.length?this.viewController.renderGroup(e,t,T.FRAME):this.viewController.renderNode(e,t,T.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,T.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,T.GRID,{columnCount:n,rowCount:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,T.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,T.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(t,n,i,r){var a=this,o="",l=[];if(0===r.size&&i.every(function(e){return!e.autoMargin})){for(var s=[],u=[],h=[],c=Array.isArray(d=i),f=0,d=c?d:d[Symbol.iterator]();;){var p;if(c){if(f>=d.length)break;p=d[f++]}else{if((f=d.next()).done)break;p=f.value}var m=p;m.floating?"right"===m.float?h.push(m):u.push(m):s.push(m)}if(s.length===i.length||u.length===i.length||h.length===i.length)return t.alignmentType|=s.length>0?x.HORIZONTAL:x.FLOAT,h.length>0&&(t.alignmentType|=x.RIGHT),o=e.isRelativeHorizontal(i,r)?this.writeRelativeLayout(t,n):this.writeLinearLayout(t,n,!0);if(0===u.length||0===h.length){var v=0===h.length?u.concat(s):s.concat(h);if(He.linearY(v))return o=this.writeLinearLayout(t,n,!1),t.alignmentType|=x.VERTICAL,o;if(e.isRelativeHorizontal(v,r))return o=this.writeRelativeLayout(t,n),t.alignmentType|=x.HORIZONTAL,h.length>0&&(t.alignmentType|=x.RIGHT),o;0===h.length&&(this.settings.floatOverlapDisabled||(o=this.writeLinearLayout(t,n,!0),l=[u,s],t.alignmentType|=x.FLOAT))}}var y,b=[],E=[],A=[],k=[],T=[],S=[],I=[],N=[];if(0===l.length){for(var R="",L=0,C=0;C<i.length;C++){var O=i[C];if(r.has(O)){var _=r.get(O);if(Y(L,"right"===_?4:2)||0!==L&&"both"===_)switch(_){case"left":L^=2,R="left";break;case"right":L^=4,R="right";break;case"both":switch(L){case 2:R="left";break;case 4:R="right";break;default:R="both"}L=0}}if(""===R)O.floating?"right"===O.float?(k.push(O),O.floating&&(L|=4)):(A.push(O),O.floating&&(L|=2)):O.autoMargin?O.autoMarginLeft?k.length>0?S.push(O):k.push(O):O.autoMarginRight?A.length>0?T.push(O):A.push(O):b.length>0?0===A.length?A.push(O):k.push(O):b.push(O):b.push(O);else if(O.floating)"right"===O.float?(0===S.length&&(L|=4),!this.settings.floatOverlapDisabled&&"right"!==R&&k.length>0?k.push(O):S.push(O)):(0===T.length&&(L|=2),!this.settings.floatOverlapDisabled&&"left"!==R&&A.length>0?A.push(O):T.push(O));else if(O.autoMargin)O.autoMarginLeft&&S.length>0?S.push(O):O.autoMarginRight&&T.length>0?T.push(O):E.push(O);else switch(R){case"left":T.push(O);break;case"right":S.push(O);break;default:E.push(O)}}A.length>0&&T.length>0?(I=[A,T],T.length>1&&(T[0].alignmentType|=x.EXTENDABLE)):A.length>0?I=A:T.length>0&&(I=T),k.length>0&&S.length>0?(N=[k,S],S.length>1&&(S[0].alignmentType|=x.EXTENDABLE)):k.length>0?N=k:S.length>0&&(N=S),this.settings.floatOverlapDisabled?(n.linearVertical?(o=gt(t.id),t.render(n),t.renderDepth--):o=this.writeLinearLayout(t,n,!1),l.push(b,[A,k],E)):(0!==b.length||0!==I.length&&0!==N.length?o=this.writeFrameLayout(t,n,!0):(o=this.writeLinearLayout(t,n,!1),N.length>0&&(t.alignmentType|=x.RIGHT)),b.length>0?(S.length>0?l.push(I=[b,A],N):T.length>0?l.push(N=[b,k],I):l.push(b,I,N),b.length>1&&(b[0].alignmentType|=x.EXTENDABLE)):I===T&&N===k||I===A&&N===S?l.push(0===T.length?[A,S]:[k,T]):l.push(I,N),l=l.filter(function(e){return e&&e.length>0})),t.alignmentType|=x.FLOAT}l.length>0&&l.forEach(function(n,i){if(Array.isArray(n[0])){var r=[];n.forEach(function(e){return r.push.apply(r,g(e))}),r.sort(He.siblingIndex),a.settings.floatOverlapDisabled?(y=a.viewController.createGroup(t,r[0],r),o=pt(o,t.id,a.writeFrameLayout(y,t,!0))):t.linearVertical?y=t:(y=a.viewController.createGroup(t,r[0],r),o=pt(o,t.id,a.writeLinearLayout(y,t,!1)),n.some(function(e){return e===N||e===k})&&(y.alignmentType|=x.RIGHT)),y.alignmentType|=x.FLOAT}else y=void 0;(Array.isArray(n[0])?n:[n]).forEach(function(n){var r=t;if(y&&[b,A,T,k,S].includes(n)&&(r=y),n.length>1){var l="",s=a.viewController.createGroup(r,n[0],n),u=n.some(function(e){return"left"===e.float}),h=n.some(function(e){return"right"===e.float});if(e.isRelativeHorizontal(n,He.cleared(n)))l=a.writeRelativeLayout(s,r),s.alignmentType|=x.HORIZONTAL;else if(l=a.writeLinearLayout(s,r,He.linearX(n)),h&&s.some(function(e){return e.marginLeft<0})){var c=[],f=0;s.duplicate().forEach(function(e){var t=!1;f<0&&(Math.abs(f)>e.bounds.width?(f+=e.bounds.width,e.modifyBox(w.MARGIN_RIGHT,-1*e.bounds.width,!0),t=!0):Math.abs(f)>=e.marginRight?(e.modifyBox(w.MARGIN_RIGHT,Math.ceil(Math.abs(f)-e.marginRight)),e.modifyBox(w.MARGIN_RIGHT,null)):e.modifyBox(w.MARGIN_RIGHT,f,!0)),e.marginLeft<0&&(f+=Math.max(e.marginLeft,-1*e.bounds.width),e.modifyBox(w.MARGIN_LEFT,null)),t?c.splice(c.length-1,0,e):c.push(e)}),s.replace(c.reverse()),a.preserveRenderPosition(s)}s.alignmentType|=x.SEGMENTED,(u||h)&&(s.alignmentType|=x.FLOAT,h&&(s.alignmentType|=x.RIGHT)),o=pt(o,r.id,l),r.appendRendered(s)}else if(n.length>0){var d=n[0];d.alignmentType|=x.SINGLE,"right"===d.float&&(d.alignmentType|=x.RIGHT),d.renderPosition=i,o=pt(o,r.id,"{:".concat(r.id,":").concat(i,"}")),r.appendRendered(d)}})});return o}},{key:"writeFrameLayoutVertical",value:function(e,t,n,i){var r=this,a="";e?(a=this.writeLinearLayout(e,t,!1),e.alignmentType|=x.VERTICAL):a=gt((e=t).id);var o=[],l=[],s=[],u=[],h=0,c=!1,f=!0;n.some(function(e){return!e.floating&&(h+=e.linear.height,!0)});for(var d=Array.isArray(p=n),g=0,p=d?p:p[Symbol.iterator]();;){var m;if(d){if(g>=p.length)break;m=p[g++]}else{if((g=p.next()).done)break;m=g.value}var v=m;i.has(v)&&(v.floating?c=!0:(v.modifyBox(w.MARGIN_TOP,null),o.push(s.slice()),s.length=0,l.push(u.slice()),u.length=0)),v.floating?u.push(v):(c&&!i.has(v)&&(f=!1),s.push(v))}return u.length>0&&l.push(u),s.length>0&&o.push(s),f||function(){for(var t="",i=0;i<Math.max(l.length,o.length);i++){var s=l[i]||[],u=o[i]||[];(u.length>0||s.length>0)&&function(){var a=r.viewController.createGroup(e,s[0]||u[0],[]),o=[],l=void 0;s.length>1?(l=r.viewController.createGroup(a,s[0],s),a.alignmentType|=x.FLOAT):s.length>0&&((l=s[0]).parent=a,a.alignmentType|=x.FLOAT),l&&(o.push(l),0===i&&h>0&&l.modifyBox(w.MARGIN_TOP,h),l=void 0),u.length>1?l=r.viewController.createGroup(a,u[0],u):u.length>0&&((l=u[0]).parent=a),l&&o.push(l),a.init(),t+=r.writeFrameLayout(a,e,!0),a.alignmentType|=x.VERTICAL,o.forEach(function(e,i){n.includes(e)?t=pt(t,a.id,"{:".concat(a.id,":").concat(i,"}")):(t=pt(t,a.id,r.writeLinearLayout(e,a,!1)),e.alignmentType|=x.SEGMENTED)})}()}a=pt(a,e.id,t)}(),a}},{key:"processRenderQueue",value:function(){for(var e=Array.isArray(n=this.extensions),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}for(var r=i,a=Array.isArray(l=r.subscribers),o=0,l=a?l:l[Symbol.iterator]();;){var s;if(a){if(o>=l.length)break;s=l[o++]}else{if((o=l.next()).done)break;s=o.value}r.setTarget(s),r.beforeInsert()}}var u={};for(var h in this.renderQueue){var c=d(h.split(":"),1)[0],f=c;if(!Z(f)){var g=Ge.getNodeFromElement(document.getElementById(f));g&&(f=""+g.id)}var p=this.renderQueue[h].join("\n");if(f!==c){var m=this.cacheSession.find("id",parseInt(f));if(m){var v=m.renderDepth+1;p=mt(p,v);for(var y=/{@(\d+)}/g,b=void 0,E=0;null!==(b=y.exec(p));){var x=this.cacheSession.find("id",parseInt(b[1]));x&&(x.renderDepth=0==E++?v:x.parent.renderDepth+1)}}}u[f]=p}for(var A in u)for(var k in u)A!==k&&(u[A]=u[A].replace(gt(k),u[k]),u[k]=u[k].replace(gt(A),u[A]));for(var T=Array.isArray(S=this.layouts),w=0,S=T?S:S[Symbol.iterator]();;){var I;if(T){if(w>=S.length)break;I=S[w++]}else{if((w=S.next()).done)break;I=w.value}var N=I;for(var R in u)N.content=N.content.replace(gt(R),u[R]);N.content=this.viewController.replaceRenderQueue(N.content)}for(var L=Array.isArray(O=this.extensions),C=0,O=L?O:O[Symbol.iterator]();;){var _;if(L){if(C>=O.length)break;_=O[C++]}else{if((C=O.next()).done)break;_=C.value}for(var M=_,B=Array.isArray(D=M.subscribers),F=0,D=B?D:D[Symbol.iterator]();;){var P;if(B){if(F>=D.length)break;P=D[F++]}else{if((F=D.next()).done)break;P=F.value}M.setTarget(P),M.afterInsert()}}}},{key:"addLayoutFile",value:function(e,t,n){var i={pathname:e=e||this.viewController.localSettings.layout.pathName,filename:t,content:n};arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&this._views.length>0&&""===this._views[0].content?(this._views[0]=i,this._currentIndex=0):this.layoutProcessing=i}},{key:"addIncludeFile",value:function(e,t){this._includes.push({pathname:this.viewController.localSettings.layout.pathName,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;void 0===this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,g(t))}},{key:"preserveRenderPosition",value:function(e){this._renderPosition[""+e.id]=e.map(function(e){return e.id})}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(Ne(e,!0)||ke(e,"whiteSpace","pre","pre-wrap"))&&((n=new this.nodeObject(this.cacheProcessing.nextId,e,this.viewController.delegateNodeInit)).nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",be(e.parentElement).whiteSpace||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(Oe(e)){var i=new this.nodeObject(this.cacheProcessing.nextId,e,this.viewController.delegateNodeInit);_e(e,this.settings.hideOffScreenElements)?(n=i).setExclusions():(i.excluded=!0,i.visible=!1)}return n&&this.cacheProcessing.append(n),n}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})||null}},{key:"toString",value:function(){return this._views.length>0?this._views[0].content:""}},{key:"setStyleMap",value:function(){for(var e=this,t=!1,n=de(y.FIREFOX),i=0;i<document.styleSheets.length;i++){var r=document.styleSheets[i];if(r.cssRules)for(var a=0;a<r.cssRules.length;a++)try{!function(){var t=r.cssRules[a],i=new Set;Array.from(t.style).forEach(function(e){return i.add(P(e))}),Array.from(document.querySelectorAll(t.selectorText)).forEach(function(r){Array.from(r.style).forEach(function(e){return i.add(P(e))});for(var a=be(r),o={},l=Array.isArray(u=i),s=0,u=l?u:u[Symbol.iterator]();;){var h;if(l){if(s>=u.length)break;h=u[s++]}else{if((s=u.next()).done)break;h=s.value}var c=h;if(r.style[c])o[c]=r.style[c];else{var f=t.style[c];if(se(f))if(a[c]===f)o[c]=a[c];else switch(c){case"fontSize":o[c]=a[c]||f;break;case"width":case"height":case"lineHeight":case"verticalAlign":case"textIndent":case"columnGap":case"top":case"right":case"bottom":case"left":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":o[c]=/^[A-Za-z\-]+$/.test(f)||$(f)?f:U(f,a.fontSize);break;default:void 0===o[c]&&(o[c]=f)}}}if(e.settings.preloadImages&&se(o.backgroundImage)&&"initial"!==o.backgroundImage&&o.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(t){var n=xe(t);""===n||e.cacheImage.has(n)||e.cacheImage.set(n,{width:0,height:0,uri:n})}),n&&void 0===o.display)switch(r.tagName){case"INPUT":case"TEXTAREA":case"SELECT":case"BUTTON":o.display="inline-block"}var d=Be(r,"styleMap");d?Object.assign(d,o):(Me(r,"style",a),Me(r,"styleMap",o))})}()}catch(e){t||(alert("External CSS files cannot be parsed with Chrome 64+ when loading HTML pages directly from your hard drive [file://]. Either use a local web server [http://], embed your CSS into a &lt;style&gt; element, or use a different browser. See the README for more detailed instructions.\n\n"+"".concat(r.href,"\n\n").concat(e)),t=!0)}}}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"settings",set:function(e){"object"!==t(e)&&(e={}),this._settings=e,this.viewController&&(this.viewController.settings=e),this.resourceHandler&&(this.resourceHandler.settings=e)},get:function(){return this._settings}},{key:"layoutProcessing",set:function(e){this._currentIndex=this._views.length,this._views.push(e)},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return g(this._views).concat(g(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}}],[{key:"isFrameHorizontal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=He.floated(e),r=e.filter(function(e){return e.autoMargin});return 0===(n?Ce(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0)&&(i.has("right")||t.size>0||r.length>0||!He.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=e.filter(function(e){return e.visible}),i=He.floated(e),r=d(new He(e).partition(function(e){return e.floating}),2),a=r[0],o=r[1],l=o.length>0?Math.min.apply(null,o.map(function(e){return e.siblingIndex})):Number.MAX_VALUE,s=a.length>0?Math.max.apply(null,a.map(function(e){return e.siblingIndex})):-1,u=He.linearX(e);return!n.some(function(e){return e.autoMarginHorizontal})&&(1===i.size&&a.length===e.length?!(u&&0===t.size):0===t.size&&!i.has("right")&&(0===o.length||0===a.length||s<l)&&n.every(function(e){var t=e.css("verticalAlign");return e.toInt("top")>=0&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||Q(t)&&parseInt(t)>=0)})&&(n.some(function(e){return(e.textElement||e.imageElement||e.svgElement)&&e.baseline||e.plainText&&e.multiLine})||!u&&e.every(function(e){return e.pageflow&&e.inlineElement})))}}]),e}(),xt=function(){function e(){r(this,e),this._before={},this._after={}}return o(e,[{key:"reset",value:function(){this._before={},this._after={}}},{key:"replaceRenderQueue",value:function(e){for(var t in this._before)e=e.replace("{<".concat(t,"}"),this._before[t].join(""));for(var n in this._after)e=e.replace("{>".concat(n,"}"),this._after[n].join(""));return e}},{key:"prependBefore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;void 0===this._before[e]&&(this._before[e]=[]),-1!==n&&n<this._before[e].length?this._before[e].splice(n,0,t):this._before[e].push(t)}},{key:"appendAfter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;void 0===this._after[e]&&(this._after[e]=[]),-1!==n&&n<this._after[e].length?this._after[e].splice(n,0,t):this._after[e].push(t)}},{key:"hasAppendProcessing",value:function(e){return void 0!==this._before[e]||void 0!==this._after[e]}}]),e}(),At=function(){function e(t){r(this,e),this.file=t,this.imageAssets=new Map,this.file.stored=e.STORED}return o(e,[{key:"addFile",value:function(e,t){this.file.addFile(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")}},{key:"reset",value:function(){for(var t in e.STORED)e.STORED[t]=new Map;this.file.reset()}},{key:"setBoxStyle",value:function(){for(var e=Array.isArray(n=this.cache.elements),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;if(this.checkPermissions(r,A.BOX_STYLE,"boxStyle")){var a={background:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,borderRadius:null,backgroundColor:null,backgroundSize:null,backgroundImage:null,backgroundRepeat:null,backgroundPositionX:null,backgroundPositionY:null};for(var o in a){var l=r.css(o);switch(o){case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":var s=r.css("".concat(o,"Color"));switch(s.toLowerCase()){case"initial":s="#000000";break;case"inherit":case"currentcolor":s=Ae(r.element,"".concat(o,"Color"))}var u=r.css("".concat(o,"Width"))||"1px",h=r.css("".concat(o,"Style"))||"none";"inset"===h&&"0px"===u&&(u="1px");var c=tt(s,r.css("opacity"));a[o]={width:u,style:h,color:"none"!==h&&c?c.valueRGBA:""};break;case"borderRadius":var f=[r.css("borderTopLeftRadius"),r.css("borderTopRightRadius"),r.css("borderBottomLeftRadius"),r.css("borderBottomRightRadius")],d=f[0],g=f[1],p=f[2],m=f[3];a.borderRadius=d===g&&g===p&&p===m?0===H(d)?void 0:[d]:[d,g,p,m];break;case"backgroundColor":if(!r.has("backgroundColor")&&(l===r.cssParent("backgroundColor",!1,!0)||r.documentParent.visible&&Te(r.element,"backgroundColor")))a.backgroundColor="";else{var v=tt(l,r.css("opacity"));a.backgroundColor=v?v.valueRGBA:""}break;case"backgroundSize":var y=[];if("auto"!==l&&"auto auto"!==l&&"initial"!==l&&"0px"!==l){var b=l.match(/^(?:([\d.]+(?:px|pt|em|%)|auto)\s*)+$/),E=r.css("fontSize");b&&(y="auto"===b[1]||"auto"===b[2]?["auto"===b[1]?"":U(b[1],E),"auto"===b[2]?"":U(b[2],E)]:$(b[1])&&void 0===b[3]?[b[1],b[2]]:void 0===b[2]||b[1]===b[2]&&b[1]===b[3]&&b[1]===b[4]?[U(b[1],E)]:void 0===b[3]||b[1]===b[3]&&b[2]===b[4]?[U(b[1],E),U(b[2],E)]:[U(b[1],E),U(b[2],E),U(b[3],E),U(b[4],E)])}a.backgroundSize=y;break;case"background":case"backgroundImage":"none"===l||r.hasBit("excludeResource",A.IMAGE_SOURCE)||function(){for(var e=function(e){return"".concat(e?"":"(?:",",?\\s*(").concat(e?"":"?:","rgba?\\(\\d+, \\d+, \\d+(?:, [\\d.]+)?\\)|[a-z]+)\\s*(").concat(e?"":"?:","\\d+%)?").concat(e?"":")")},t=[],n=RegExp("([a-z-]+)-gradient\\(([\\w\\s%]+)?(".concat(e(!1),"+)\\)"),"g"),i=void 0;null!==(i=n.exec(l));){var o=void 0;o="linear"===i[1]?{type:"linear",x1:0,y1:0,x2:0,y2:0,angle:function(){switch(i[2]){case"to top":return 0;case"to right top":return 45;case"to right":return 90;case"to right bottom":return 135;case"to bottom":return 180;case"to left bottom":return 225;case"to left":return 270;case"to left top":return 315;default:return H(i[2])}}(),colorStop:[]}:{type:"radial",cx:0,cy:0,r:0,shapePosition:function(){var e=["ellipse","center"];if(i[2]){var t=i[2].split("at").map(function(e){return e.trim()});switch(t[0]){case"ellipse":case"circle":case"closest-side":case"closest-corner":case"farthest-side":case"farthest-corner":e[0]=t[0];break;default:e[1]=t[0]}t[1]&&(e[1]=t[1])}return e}(),colorStop:[]};for(var s=i[3].trim().split(RegExp(e(!0),"g")),u=r.css("opacity"),h=0;h<s.length;h+=3){var c=s[h+1];if(q(c)){var f=tt(c,c.startsWith("rgba")?void 0:u);f&&f.visible&&o.colorStop.push({color:f.valueRGBA,offset:s[h+2]||"0%",opacity:f.alpha})}}o.colorStop.length>1&&t.push(o)}if(t.length>0)a.backgroundGradient=t.reverse();else{var d=[];for(n=RegExp(O.CSS_URL,"g"),i=null;null!==(i=n.exec(l));)i&&d.push(i[0]);d.length>0&&(a.backgroundImage=d)}}();break;case"backgroundRepeat":case"backgroundPositionX":case"backgroundPositionY":a[o]=l}}var x=JSON.stringify(a.borderTop);x===JSON.stringify(a.borderRight)&&x===JSON.stringify(a.borderBottom)&&x===JSON.stringify(a.borderLeft)&&(a.border=a.borderTop),Me(r.element,"boxStyle",a)}}}},{key:"setFontStyle",value:function(){for(var t=Array.isArray(i=this.cache),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r;if(this.checkPermissions(a,A.FONT_STYLE,"fontStyle")){var o=e.hasDrawableBackground(Be(a.element,"boxStyle"));if(!(a.renderChildren.length>0||a.imageElement||"HR"===a.tagName||a.inlineText&&!o&&!a.preserveWhiteSpace&&""===a.element.innerHTML.trim())){var l=a.css("opacity"),s=tt(a.css("color"),l),u=null;o||a.cssParent("backgroundColor",!1,!0)===a.css("backgroundColor")&&(a.plainText||a.style.backgroundColor!==a.styleMap.backgroundColor)||!a.has("backgroundColor")&&a.documentParent.visible&&Te(a.element,"backgroundColor")||(u=tt(a.css("backgroundColor"),l));var h=a.css("fontFamily"),c=a.css("fontSize"),f=a.css("fontWeight");if(de(y.EDGE)&&!a.has("fontFamily"))switch(a.tagName){case"TT":case"CODE":case"KBD":case"SAMP":h="monospace"}if(0===H(c))switch(c){case"xx-small":c="8px";break;case"x-small":c="10px";break;case"small":c="13px";break;case"medium":c="16px";break;case"large":c="18px";break;case"x-large":c="24px";break;case"xx-large":c="32px"}if(!Z(f))switch(f){case"lighter":f="200";break;case"bold":f="700";break;case"bolder":f="900";break;default:f="400"}var d={fontFamily:h,fontStyle:a.css("fontStyle"),fontSize:c,fontWeight:f,color:s?s.valueRGBA:"",backgroundColor:u?u.valueRGBA:""};Me(a.element,"fontStyle",d)}}}}},{key:"setBoxSpacing",value:function(){for(var e=Array.isArray(n=this.cache.elements),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;if(this.checkPermissions(r,A.BOX_SPACING,"boxSpacing")){var a=Ee(r.element),o={};for(var l in a)o[l]=!r.inlineStatic||"marginTop"!==l&&"marginBottom"!==l?U(a[l],r.css("fontSize")):"0px";Me(r.element,"boxSpacing",o)}}}},{key:"setValueString",value:function(){function t(e,t){switch(e.multiLine&&!e.renderParent.linearVertical&&(t=t.replace(/^\s*\n/,"")),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," ");break;case"pre":case"pre-wrap":e.renderParent.linearVertical||(t=t.replace(/^\n/,"")),t=(t=t.replace(/\n/g,"\\n")).replace(/\s/g,"&#160;");break;case"pre-line":t=(t=t.replace(/\n/g,"\\n")).replace(/\s+/g," ");break;default:return Le(e.element.previousSibling)&&(t=t.replace(/^\s+/,"")),Le(e.element.nextSibling)&&(t=t.replace(/\s+$/,"")),[t,!1]}return[t,!0]}for(var n=Array.isArray(r=this.cache.visible),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a,l=o.element;if(this.checkPermissions(o,A.VALUE_STRING,"valueString")){var s="",u="",h=!1,c=!0;if(l instanceof HTMLInputElement)switch(l.type){case"text":case"number":case"email":case"search":case"submit":case"reset":case"button":u=l.value.trim();break;default:o.companion&&!o.companion.visible&&(u=o.companion.textContent.trim())}else if(l instanceof HTMLTextAreaElement)u=l.value.trim();else if(l instanceof HTMLElement)if("BUTTON"===l.tagName)u=l.innerText;else if(o.inlineText){s=o.textContent.trim();var f=d(t(o,u=vt(l.children.length>0||"CODE"===l.tagName?l.innerHTML:o.textContent)),2);h=f[1],u=(u=(u=f[0]).replace(/\s*<br\s*\/?>\s*/g,"\\n")).replace(/\s+(class|style)=".*?"/g,"")}else""===l.innerText.trim()&&e.hasDrawableBackground(Be(l,"boxStyle"))&&(u=vt(l.innerText),c=!1);else if(o.plainText){s=o.textContent.trim();var g=d(t(o,u=(u=vt(o.textContent)).replace(/&[A-Za-z]+;/g,function(e){return e.replace("&","&amp;")})),2);u=g[0],h=g[1]}if(""!==u){if(c){var p=o.previousSibling(),m=o.nextSibling(),v=!1;if(!p||p.multiLine||p.lineBreak?u=u.replace(/^\s+/,""):v=/\s+$/.test(p.element.innerText||p.element.textContent||""),h){var y=u;u=u.trim(),!p||p.block||p.lineBreak||v||!/^\s+/.test(y)||(u="&#160;"+u),m&&!m.lineBreak&&/\s+$/.test(y)&&(u+="&#160;")}else/^\s+$/.test(u)?u.length>0&&(u="&#160;"+u.substring(1)):u=(u=u.replace(/^\s+/,p&&(p.block||p.lineBreak||p.element instanceof HTMLElement&&p.element.innerText.length>1&&v||o.multiLine&&Re(l))?"":"&#160;")).replace(/\s+$/,"table-cell"===o.css("display")||m&&m.lineBreak?"":"&#160;")}if(""!==u){if(o.renderParent.layoutVertical&&o.inlineText){var b=o.toInt("textIndent");b>0&&(u="&#160;".repeat(Math.ceil(b/6))+u)}Me(l,"valueString",{name:s,value:u})}}}}}},{key:"setOptionArray",value:function(){for(var e=Array.isArray(n=this.cache),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;if("SELECT"===r.tagName&&r.visible&&this.checkPermissions(r,A.OPTION_ARRAY,"optionArray")){for(var a=r.element,o=[],l=[],s=-1;++s<a.children.length;){var u=a.children[s].text.trim();if(""!==u)if(l&&0===o.length&&Z(u))l.push(u);else{if(l&&l.length>0){s=-1,l=void 0;continue}""!==u&&o.push(vt(u))}}Me(a,"optionArray",{stringArray:o.length>0?o:void 0,numberArray:l&&l.length>0?l:void 0})}}}},{key:"setImageSource",value:function(){for(var e=this,t=Array.isArray(i=this.cache.visible),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r;if(this.checkPermissions(a,A.IMAGE_SOURCE,"imageSource")&&a.svgElement){var o=a.element;if(o.children.length>0){var l=new dt(o);l.defs.image.forEach(function(t){var n=e.imageAssets.get(t.uri);n&&(0===t.width&&(t.width=n.width),0===t.height&&(t.height=n.height))}),(l.length>0||l.defs.image.length>0)&&Me(o,"imageSource",l)}}}}},{key:"checkPermissions",value:function(e,t,n){return!e.hasBit("excludeResource",t)&&(!Be(e.element,n)||this.settings.alwaysReevaluateResources)}}],[{key:"insertStoredAsset",value:function(t,n,i){var r=e.STORED[t];if(r){var a="",o=r.entries(),l=Array.isArray(o),s=0;for(o=l?o:o[Symbol.iterator]();;){var u;if(l){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var h=d(u,2),c=h[0],f=h[1];if(JSON.stringify(i)===JSON.stringify(f)){a=c;break}}if(""===a&&(Z(n)&&(n="__".concat(n)),se(i))){var g=0;do{a=n,g>0&&(a+="_".concat(g)),r.has(a)||r.set(a,i),g++}while(r.has(a)&&r.get(a)!==i)}return a}return""}},{key:"isBorderVisible",value:function(e){return void 0!==e&&!("none"===e.style||"0px"===U(e.width)||""===e.color||9===e.color.length&&e.color.endsWith("00"))}},{key:"hasDrawableBackground",value:function(e){return void 0!==e&&(this.isBorderVisible(e.borderTop)||this.isBorderVisible(e.borderRight)||this.isBorderVisible(e.borderBottom)||this.isBorderVisible(e.borderLeft)||e.backgroundImage||e.borderRadius||e.backgroundGradient)}}]),e}();At.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,styles:new Map,dimens:new Map,drawables:new Map,images:new Map};var kt=function(){function e(){r(this,e),this.appName="",this.queue=[]}return o(e,[{key:"addFile",value:function(e,t,n,i){if(""!==n||""!==i){var r=this.queue.findIndex(function(n){return n.pathname===e&&n.filename===t});-1!==r?(this.queue[r].content=n||"",this.queue[r].uri=i||""):this.queue.push({pathname:e,filename:t,content:n,uri:i})}}},{key:"reset",value:function(){this.queue.length=0}},{key:"saveToDisk",value:function(t){location.protocol.startsWith("http")?t.length>0&&(t.push.apply(t,g(this.queue)),fetch("/api/savetodisk"+"?directory=".concat(encodeURIComponent(ne(this.settings.outputDirectory,"/")))+"&appname=".concat(encodeURIComponent(this.appName.trim()))+"&filetype=".concat(this.settings.outputArchiveFileType.toLowerCase())+"&processingtime=".concat((""+this.settings.outputMaxProcessingTime).trim()),{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(t){t&&(t.zipname?fetch("/api/downloadtobrowser?filename=".concat(encodeURIComponent(t.zipname))).then(function(e){return e.blob()}).then(function(n){return e.downloadToDisk(n,oe(t.zipname))}):t.system&&alert("".concat(t.application,"\n\n").concat(t.system)))}).catch(function(e){return alert("ERROR: ".concat(e))})):alert("SERVER (required): See README for instructions")}}],[{key:"downloadToDisk",value:function(e,t){var n=new Blob([e],{type:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")||"application/octet-stream"});if(void 0===window.navigator.msSaveBlob){var i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.setAttribute("download",t),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){return window.URL.revokeObjectURL(i)},1)}else window.navigator.msSaveBlob(n,t)}}]),e}(),Tt=function(){function e(t,n,i,a){r(this,e),this.name=t,this.framework=n,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(i)&&(this.tagNames=i.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return o(e,[{key:"setTarget",value:function(e,t,n){this._node=e,this._parent=t,this._element=n||e&&e.element}},{key:"is",value:function(e){return 0===this.tagNames.length||this.tagNames.includes(e.tagName)}},{key:"require",value:function(e){this.dependencies.push({name:e,preload:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&J(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.preload}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(e){return!1}},{key:"afterInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.preload}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;return!(!e||!Oe(e.element))&&(e.dataset.ext?this.included():this.tagNames.length>0)}},{key:"processNode",value:function(e,t){return{output:"",complete:!1}}},{key:"processChild",value:function(e,t){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.node&&this.node.styleElement){var t=this.node.element,n=P(this.name,"\\.");for(var i in t.dataset)i.length>n.length&&i.startsWith(n)&&(e[V(i.substring(n.length),!1)]=t.dataset[i])}return e}},{key:"node",get:function(){return this._node}},{key:"parent",get:function(){return this._parent}},{key:"element",get:function(){return this._element}}]),e}(),wt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"afterInit",value:function(){for(var e=this,t=Array.from(this.application.cacheProcessing.elements),n=function(){var n=t[i];if(!n.hasBit("excludeProcedure",k.ACCESSIBILITY)){var r=n.element;if(r instanceof HTMLInputElement)switch(r.type){case"radio":case"checkbox":[n.nextElementSibling,n.previousElementSibling].some(function(t){if(t){var i=Ge.getNodeFromElement(t),a=t.parentElement&&"LABEL"===t.parentElement.tagName?Ge.getNodeFromElement(t.parentElement):null;if(i&&i.visible&&i.pageflow&&(se(t.htmlFor)&&t.htmlFor===r.id?n.companion=i:i.textElement&&a&&(n.companion=i,a.renderAs=n),n.companion))return e.options&&!e.options.showLabel&&i.hide(),!0}return!1})}}},i=0;i<t.length;i++)n()}}]),t}(),St=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"is",value:function(e){return f(s(t.prototype),"is",this).call(this,e)&&("INPUT"!==e.tagName||["button","file","image","reset","search","submit"].includes(e.element.type))}},{key:"condition",value:function(){return this.included()}}]),t}(),It=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(C.EXTERNAL,!0),o}return l(t,Tt),o(t,[{key:"processNode",value:function(){var e=this.node,t=this.parent,n=this.getData(),i="";if(n.tag&&(i=e.length>0?this.application.viewController.renderGroup(e,t,n.tag):this.application.viewController.renderNode(e,t,n.tag),e.nodeType=e.blockStatic?T.BLOCK:T.INLINE),n.tagChild)for(var r=Array.isArray(o=e),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var s=l;s.styleElement&&(s.dataset.ext=this.name,s.dataset.andromeCustomTag=n.tagChild)}return{output:i,complete:!1}}}]),t}(),Nt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"beforeInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())&&!Be(this.element,"andromeExternalDisplay")){for(var e=[],t=this.element;t;)e.push(be(t).display),t.style.display="block",t=t.parentElement;Me(this.element,"andromeExternalDisplay",e)}}},{key:"init",value:function(e){return this.included(e)&&this.application.viewElements.add(e),!1}},{key:"afterInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())){var e=Be(this.element,"andromeExternalDisplay");if(e){for(var t=e,n=this.element,i=0;n;)n.style.display=t[i],n=n.parentElement,i++;Fe(this.element,"andromeExternalDisplay")}}}},{key:"is",value:function(){return!1}},{key:"condition",value:function(){return!1}}]),t}(),Rt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"condition",value:function(){var e=this.node;return this.included()||e.length>1&&("table"===e.display&&e.every(function(e){return"table-row"===e.display&&e.every(function(e){return"table-cell"===e.display})})||e.every(function(e){return e.pageflow&&!e.has("backgroundColor")&&!e.has("backgroundImage")&&e.borderTopWidth+e.borderRightWidth+e.borderBottomWidth+e.borderLeftWidth===0&&(!e.inlineElement||e.blockStatic)})&&("none"===e.css("listStyle")||e.every(function(e){return"list-item"===e.display&&"none"===e.css("listStyleType")})||!se(e.dataset.ext)&&!e.flex.enabled&&e.length>1&&e.some(function(e){return e.length>1})&&!e.some(function(e){return"list-item"===e.display||e.textElement})))}},{key:"processNode",value:function(e){var t=this.node,n=this.parent,i=!!this.options.columnBalance,r="",a=[],o={padding:{top:0,left:0,right:0,bottom:0},columnEnd:[],columnCount:0};if(i){var l=[];t.each(function(e,t){l[t]=[],e.each(function(e){return l[t].push(e.bounds.width)}),a.push(e.duplicate())});var s=a[l.findIndex(function(e){return e===l.reduce(function(e,t){return e.length===t.length?e.reduce(function(e,t){return e+t},0)<t.reduce(function(e,t){return e+t},0)?e:t:e.length<t.length?e:t})})];if(s&&s.length>1)for(var u=[],h=!1,c=function(e){var t=s[e].bounds,n=[];if(e<s.length-1)for(var i=function(i){if(a[i]===s)n.push(e);else{var r=a[i].findIndex(function(n,r){return r>=e&&Math.floor(n.bounds.width)===Math.floor(t.width)&&r<a[i].length-1});if(-1===r)return n.length=0,"break";n.push(r)}},r=0;r<a.length;r++){if("break"===i(r))break}else for(r=0;r<a.length;r++)if(a[r].length>s.length){var o=a[r].splice(u[r]+(h?2:1),a[r].length-s.length);a[r][u[r]+(h?1:0)].data(C.GRID,"siblings",g(o))}if(n.length===a.length){var l=n.reduce(function(e,t){return Math.min(e,t)});if(n.reduce(function(e,t){return Math.max(e,t)})>l)for(var c=0;c<a.length;c++)if(n[c]>l){var f=a[c].splice(l,n[c]-l);a[c][u[c]+(h?1:0)].data(C.GRID,"siblings",g(f))}u=n,h=!0}else u=Array(a.length).fill(e),h=!1},f=0;f<s.length;f++)c(f);else a.length=0}else{var d=function(e){return a[0].findIndex(function(t){return ue(t.linear.top,e.linear.top)||e.linear.top>=t.linear.top&&e.linear.bottom<=t.linear.bottom})},p=e[t.depth+2],m=p?Object.keys(p):[],v=[];if(m.length>1){var y=[];for(f=0;f<m.length;f++){var b=ce(p[parseInt(m[f])].filter(function(e){return e.documentParent.documentParent.id===t.id}),"linear.top");if(0===f&&0===b.length)return{output:"",complete:!1};y[f]=0===f?0:y[f-1];for(var E=0;E<b.length;E++){var x=b[E],A=[x.linear.left,x.linear.right],k=A[0],T=A[1],S=f;if(S>0&&Oe(x.element)&&"right"===x.float){x.element.style.cssFloat="left";var I=x.element.getBoundingClientRect();if(I.left-x.marginLeft!==k){k=I.left-x.marginLeft,T=I.right+x.marginRight;for(var N=1;N<y.length&&(S=N,!(k>y[N-1]));N++);}x.element.style.cssFloat="right"}if(0===S||k>=y[S-1])if(void 0===a[S]&&(a[S]=[]),0===S||a[0].length===b.length)a[S][E]=x;else{var R=d(x);-1!==R&&(a[S][R]=x)}else{var L=a.length-1;if(a[L]){var O=a[L].reduce(function(e,t){return Math.min(e,t.linear.left)},Number.MAX_VALUE),_=a[L].reduce(function(e,t){return Math.max(e,t.linear.right)},0);if(k>O&&T>_){var M=a.filter(function(e){return e}),B=d(x);-1!==B&&void 0===M[M.length-1][B]&&(a[L].length=0)}}}y[f]=Math.max(x.linear.right,y[f])}}for(var F=0,D=-1;F<y.length;F++)-1===D&&void 0===a[F]?D=F-1:void 0===a[F]?-1!==D&&F===y.length-1&&(y[D]=y[F]):-1!==D&&(y[D]=y[F-1],D=-1);for(var P=0;P<a.length;P++)a[P]&&a[P].length>0&&v.push(y[P]);for(var G=(a=a.filter(function(e){return e&&e.length>0})).reduce(function(e,t){return Math.max(e,t.length)},0),V=0;V<G;V++)for(var H=0;H<a.length;H++)void 0===a[H][V]&&(a[H][V]={spacer:1})}v.length>0&&(o.columnEnd=v,o.columnEnd[o.columnEnd.length-1]=t.box.right)}if(a.length>1&&a[0].length===t.length){o.columnCount=i?a[0].length:a.length,r=this.application.writeGridLayout(t,n,o.columnCount),t.duplicate().forEach(function(e){return t.remove(e)&&e.hide()});for(var z=0,U=0;z<a.length;z++)for(var X=0,W=0,j=0;W<a[z].length;W++){var Y=a[z][W];if(Y.spacer)1===Y.spacer&&X++;else{Y.parent=t;var Z={inherit:!0,rowSpan:0,columnSpan:0,index:-1,cellFirst:!1,cellLast:!1,rowEnd:!1,rowStart:!1};if(i)Z.rowStart=0===W,Z.rowEnd=W===a[z].length-1,Z.cellFirst=0===z&&0===W,Z.cellLast=z===a.length-1&&Z.rowEnd,Z.index=W;else{for(var q=1,K=1+X,Q=z+1;Q<a.length&&1===a[Q][W].spacer;Q++)K++,a[Q][W].spacer=2;if(1===K)for(var $=W+1;$<a[z].length&&1===a[z][$].spacer;$++)q++,a[z][$].spacer=2;Z.rowSpan=q,Z.columnSpan=K,Z.rowStart=0==j++,Z.rowEnd=K+z===a.length,Z.cellFirst=0==U++,Z.cellLast=Z.rowEnd&&W===a[z].length-1,Z.index=z,X=0}Y.data(C.GRID,"cellData",Z)}}ce(t.list,"documentParent.siblingIndex","siblingIndex"),"table"===t.display&&"collapse"===t.css("borderCollapse")&&(t.modifyBox(w.PADDING_TOP,null),t.modifyBox(w.PADDING_RIGHT,null),t.modifyBox(w.PADDING_BOTTOM,null),t.modifyBox(w.PADDING_LEFT,null)),t.data(C.GRID,"mainData",o),t.render(n)}return{output:r,complete:!0}}},{key:"processChild",value:function(){var e=this.node,t=this.parent,n=t.data(C.GRID,"mainData"),i=e.data(C.GRID,"cellData"),r="";if(n&&i){var a;if(this.options.columnBalance)a=e.data(C.GRID,"siblings");else{var o=n.columnEnd[Math.min(i.index+(i.columnSpan-1),n.columnEnd.length-1)];a=Array.from(e.documentParent.element.children).map(function(t){var n=Ge.getNodeFromElement(t);return n&&n.visible&&!n.excluded&&!n.rendered&&n.linear.left>=e.linear.right&&n.linear.right<=o?n:null}).filter(function(e){return e})}if(a&&a.length>0){a.unshift(e);var l=this.application.viewController.createGroup(t,e,a),s=He.linearX(a);return s&&Et.isRelativeHorizontal(a)?(r=this.application.writeRelativeLayout(l,t),l.alignmentType|=x.HORIZONTAL):(r=s||He.linearY(a)?this.application.writeLinearLayout(l,t,s):this.application.writeConstraintLayout(l,t),l.alignmentType|=x.SEGMENTED),e.alignmentType|=x.EXCLUDE,{output:r,parent:l,complete:!0}}}return{output:r,complete:!0}}}]),t}();function Lt(e){return"none"!==e.css("backgroundImage")&&"no-repeat"===e.css("backgroundRepeat")}var Ct,Ot,_t=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"condition",value:function(){var e=this.node;return f(s(t.prototype),"condition",this).call(this)&&e.length>0&&(e.every(function(e){return e.blockStatic})||e.every(function(e){return e.inlineElement})||e.every(function(e){return e.floating})&&1===He.floated(e.list).size||e.every(function(t,n){return!t.floating&&(0===n||n===e.length-1||t.blockStatic||t.inlineElement&&e.item(n-1).blockStatic&&e.item(n+1).blockStatic)}))&&(e.some(function(e){return"list-item"===e.display&&("none"!==e.css("listStyleType")||Lt(e))})||e.every(function(e){return"LI"!==e.tagName&&"none"===e.styleMap.listStyleType&&Lt(e)}))}},{key:"processNode",value:function(){var e=this.node,t=this.parent,n="";n=He.linearY(e.list)?this.application.writeGridLayout(e,t,e.some(function(e){return"inside"===e.css("listStylePosition")})?3:2):this.application.writeLinearLayout(e,t,!0);for(var i=0,r=Array.isArray(o=e),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var s=l,u={ordinal:"",imageSrc:"",imagePosition:""};if("list-item"===s.display||s.has("listStyleType")||Lt(s)){var h=s.css("listStyleImage");if(h&&"none"!==h)u.imageSrc=h;else switch(s.css("listStyleType")){case"disc":u.ordinal="";break;case"square":u.ordinal="";break;case"decimal":u.ordinal="".concat(""+(i+1),".");break;case"decimal-leading-zero":u.ordinal="".concat((i<9?"0":"")+(i+1),".");break;case"lower-alpha":case"lower-latin":u.ordinal="".concat(X(i).toLowerCase(),".");break;case"upper-alpha":case"upper-latin":u.ordinal="".concat(X(i),".");break;case"lower-roman":u.ordinal="".concat(W(i+1).toLowerCase(),".");break;case"upper-roman":u.ordinal="".concat(W(i+1),".");break;case"none":h="";var c="";"no-repeat"===s.css("backgroundRepeat")&&(h=s.css("backgroundImage"),c=s.css("backgroundPosition")),h&&"none"!==h&&(u.imageSrc=h,u.imagePosition=c,s.excludeResource|=A.IMAGE_SOURCE);break;default:u.ordinal=""}i++}s.data(C.LIST,"mainData",u)}return{output:n,complete:!0}}},{key:"afterRender",value:function(){for(var e=Array.isArray(n=this.subscribers),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;r.modifyBox(w.MARGIN_LEFT,null),r.modifyBox(w.PADDING_LEFT,null)}}}]),t}(),Mt=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(C.EXTERNAL,!0),o}return l(t,Tt),o(t,[{key:"init",value:function(e){if(this.included(e)){var t=!1;if(e.children.length>0){var n=e.children[0].tagName;t=Array.from(e.children).every(function(e){return e.tagName===n});for(var i=e.parentElement;i;){if("NAV"===i.tagName&&this.application.viewElements.has(i)){t=!1;break}i=i.parentElement}}t&&(Array.from(e.querySelectorAll("NAV")).forEach(function(t){"none"===be(e).display&&(Me(t,"andromeExternalDisplay","none"),t.style.display="block")}),this.application.viewElements.add(e))}return!1}},{key:"afterRender",value:function(){var e=this.node;this.included(e.element)&&Array.from(e.element.querySelectorAll("NAV")).forEach(function(e){var t=Be(e,"andromeExternalDisplay");t&&(e.style.display=t,Fe(e,"andromeExternalDisplay"))})}}]),t}(),Bt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"afterInit",value:function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.bounds.left-=t,e.bounds.width+=Math.max(e.marginLeft<0?e.marginLeft+t:t,0),e.css("marginLeft",j(e.marginLeft+t*(n?-1:1))),e.setBounds(!0)}for(var t=Array.from(this.application.cacheProcessing.elements),n=function(){var n=t[i];if(n.some(function(e){if(e.pageflow)return"right"!==e.float&&e.marginLeft<0&&n.marginLeft>=Math.abs(e.marginLeft)&&(Math.abs(e.marginLeft)>=e.bounds.width||n.documentRoot);var t=e.toInt("left"),i=e.toInt("right");return t<0&&n.marginLeft>=Math.abs(t)||i<0&&Math.abs(i)>=e.bounds.width})){for(var r=[],a=[],o=Array.isArray(s=n),l=0,s=o?s:s[Symbol.iterator]();;){var u;if(o){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}var h=u,c=0;if(h.pageflow){var f=h.marginLeft;f<0&&n.marginLeft>=Math.abs(f)&&(c=1)}else{var g=H(h.left)+h.marginLeft,p=H(h.right);g<0?n.marginLeft>=Math.abs(g)&&(c=2):p<0&&Math.abs(p)>=h.bounds.width&&a.push(h)}r.push(c)}if(a.length>0){var m=d(he(n.list,function(e){return!a.includes(e)}),2),v=m[0],y=m[1];if(v.length>0&&y.length>0){n.style.marginLeft&&n.autoMarginLeft&&n.css("marginLeft",n.style.marginLeft),n.modifyBox(w.MARGIN_RIGHT,null);var b=n.has("width",S.UNIT)?n.toInt("width"):Math.max.apply(null,y.map(function(e){return e.bounds.width})),E=Math.max.apply(null,y.map(function(e){return Math.abs(e.toInt("right"))}));v.forEach(function(e){return e.pageflow&&!e.hasWidth&&e.css(e.textElement?"maxWidth":"width",j(b))}),n.css("width",j(b+E))}}var x=Math.max.apply(null,r);x>0&&(n.each(function(t,i){if(2===r[i]){var a=t.toInt("left")+n.marginLeft;t.css("left",j(Math.max(a,0))),a<0&&(t.css("marginLeft",j(t.marginLeft+a)),e(t,a))}else(2===x||t.pageflow&&!t.plainText&&r.includes(1))&&e(t,n.marginLeft)}),n.has("width",S.UNIT)&&n.css("width",j(n.toInt("width")+n.marginLeft)),e(n,n.marginLeft,!0))}},i=0;i<t.length;i++)n()}}]),t}(),Ft=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"condition",value:function(){var e=this.node,t=this.parent;return this.included()||e.alignmentType===x.NONE&&e.pageflow&&e.has("width",S.PERCENT,{not:"100%"})&&(t.linearVertical||t.is(T.FRAME)&&e.singleChild)&&!e.imageElement}},{key:"processNode",value:function(){var e=this.node,t=this.parent,n=this.application.viewController,i=n.createGroup(t,e,[e]),r=this.application.writeGridLayout(i,t,2,1);return i.alignmentType|=x.PERCENT,n["right"===e.float||e.autoMarginLeft?"prependBefore":"appendAfter"](e.id,n.renderColumnSpace(i.renderDepth+1,"".concat(100-e.toInt("width"),"%"))),{output:"",parent:i,renderAs:i,renderOutput:r,complete:!0}}}]),t}(),Dt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"condition",value:function(){var e=this.node,t=!1;if(e.hasWidth&&e.hasHeight&&0===e.length&&!e.inlineText){var n=e.css("backgroundImage");if(!n||"none"===n){n="";var i=O.CSS_URL.exec(e.css("background"));i&&(n=i[0])}if(""!==n){n=xe(n);var r=this.application.cacheImage.get(n);if(r){var a=e.css("fontSize"),o=me(e.has("width")?e.css("width"):e.css("minWidth"),e.bounds.width,a),l=me(e.has("height")?e.css("width"):e.css("minHeight"),e.bounds.height,a),s=Se("".concat(e.css("backgroundPositionX")," ").concat(e.css("backgroundPositionY")),e.bounds,a);o>0&&s.left<=0&&r.width>o&&l>0&&s.top<=0&&r.height>l&&(r.position={x:s.left,y:s.top},e.data(C.SPRITE,"image",r),t=!0)}}}return t&&(!se(e.dataset.ext)||this.included(e.element))}}]),t}(),Pt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Tt),o(t,[{key:"processNode",value:function(){function e(e){e.data(C.TABLE,"percent","".concat(Math.round(e.bounds.width/n.bounds.width*100),"%")),e.data(C.TABLE,"expand",!0)}function t(e){e.css("width",j(e.bounds.width))}var n=this.node,i=this.parent,r=[],a=n.filter(function(e){return"THEAD"===e.tagName}),o=n.filter(function(e){return"TBODY"===e.tagName}),l=n.filter(function(e){return"TFOOT"===e.tagName}),s=Array.from(n.element.children).find(function(e){return"COLGROUP"===e.tagName}),u=n.css("width");a.length>0&&(a[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(a[0],"styleMap")}),r.push.apply(r,g(a[0].list)),a.forEach(function(e){return e.hide()})),o.length>0&&o.forEach(function(e){r.push.apply(r,g(e.list)),e.hide()}),l.length>0&&(l[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(l[0],"styleMap")}),r.push.apply(r,g(l[0].list)),l.forEach(function(e){return e.hide()}));var h="fixed"===n.css("tableLayout"),c="collapse"===n.css("borderCollapse"),f=d(c?[0,0]:n.css("borderSpacing").split(" ").map(function(e){return parseInt(e)}),2),p=f[0],m=f[1];p>0?(n.modifyBox(w.PADDING_LEFT,p),n.modifyBox(w.PADDING_RIGHT,p)):(n.modifyBox(w.PADDING_LEFT,null),n.modifyBox(w.PADDING_RIGHT,null)),m>0?(n.modifyBox(w.PADDING_TOP,m),n.modifyBox(w.PADDING_BOTTOM,m)):(n.modifyBox(w.PADDING_TOP,null),n.modifyBox(w.PADDING_BOTTOM,null));for(var v=j(p>1?Math.round(p/2):p),b=j(m>1?Math.round(m/2):m),E=[],x=[],A=[],k=Array(r.length).fill(0),T=!1,I=0;I<r.length;I++){var N=r[I];A[I]=p;for(var R=0;R<N.length;R++){for(var L=N.item(R),O=L.element,_=0;_<O.rowSpan-1;_++){var M=I+1+_;void 0!==k[M]&&(k[M]+=O.colSpan)}if(!L.has("background")&&!L.has("backgroundColor")){var B=L.element;if(s){var F=be(s.children[k[I]]);F.background?B.style.background=F.background:F.backgroundColor&&(B.style.backgroundColor=F.backgroundColor)}else{var D=Ae(B,"background",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]);""!==D?B.style.background=D:""!==(D=Ae(B,"backgroundColor",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]))&&(B.style.backgroundColor=D)}}var P=L.styleMap.width,G=k[I];if(0===I||void 0===E[G]||!h)if(P&&"auto"!==P){var V=$(P),U=Q(E[G]);(void 0===E[G]||L.bounds.width<x[G]||L.bounds.width===x[G]&&("auto"===E[G]&&(V||U)||V&&U||V&&$(E[G])&&z(P)>z(E[G])||U&&Q(P)&&H(P)>H(E[G])))&&(E[G]=P),1===O.colSpan&&(x[G]=L.bounds.width)}else void 0===E[G]&&(E[G]=P||"0px",x[G]=0);L.css({marginTop:0===I?"0px":b,marginRight:R<N.length-1?v:"0px",marginBottom:I+O.rowSpan-1>=r.length-1?"0px":b,marginLeft:0===k[I]?"0px":v}),T||(T=L.multiLine),(L.length>0||L.inlineText)&&(A[I]+=L.bounds.width+p),k[I]+=O.colSpan}}var X=Math.max.apply(null,k),W=r.length;if(E.every(function(e){return $(e)})&&E.reduce(function(e,t){return e+parseFloat(t)},0)>1){var Z=100;E.forEach(function(e,t){var n=parseFloat(e);Z<=0?E[t]="0px":Z-n<0&&(E[t]="".concat(Z,"%")),Z-=n})}else if(E.every(function(e){return Q(e)})){var q=E.reduce(function(e,t){return e+parseInt(t)},0);$(u)&&"100%"!==u||q<n.viewWidth?E.filter(function(e){return"0px"!==e}).forEach(function(e,t){return E[t]="".concat(parseInt(e)/q*100,"%")}):"auto"===u?E.filter(function(e){return"0px"!==e}).forEach(function(e,t){return E[t]=void 0===x[t]?"undefined":"".concat(x[t]/n.bounds.width*100,"%")}):q>n.viewWidth&&(n.css("width","auto"),h||n.cascade().forEach(function(e){return e.css("width","auto")}))}var K=E.reduce(function(e,t){return e+($(t)?parseFloat(t):0)},0),J=function(){if(E.some(function(e){return $(e)})||E.every(function(e){return Q(e)&&"0px"!==e}))return 3;if(E.every(function(e){return e===E[0]})){if(T)return n.some(function(e){return e.has("height")})?2:3;if("auto"===E[0])return n.has("width")?3:0;if(n.hasWidth)return 2}return E.every(function(e){return"auto"===e||Q(e)&&"0px"!==e})?1:0}();(T||2===J&&!n.hasWidth)&&n.data(C.TABLE,"expand",!0);var ee=n.find(function(e){return"CAPTION"===e.tagName});n.clear(),ee&&(ee.has("textAlign",S.LEFT)||ee.css("textAlign","center"),ee.hasWidth||de(y.EDGE)||(ee.textElement?ee.has("maxWidth")||ee.css("maxWidth",j(ee.bounds.width)):ee.bounds.width>Math.max.apply(null,A)&&t(ee)),W++,ee.data(C.TABLE,"colSpan",X),ee.parent=n),k=Array(r.length).fill(0);for(var te=0,ne=0;ne<r.length;ne++){for(var ie=r[ne],re=ie.duplicate(),ae=0;ae<re.length;ae++){for(var oe=re[ae],le=oe.element,se=0;se<le.rowSpan-1;se++){var ue=ne+1+se;void 0!==k[ue]&&(k[ue]+=le.colSpan)}le.rowSpan>1&&oe.data(C.TABLE,"rowSpan",le.rowSpan),le.colSpan>1&&oe.data(C.TABLE,"colSpan",le.colSpan),oe.has("verticalAlign")||oe.css("verticalAlign","middle"),0===ne&&oe.has("borderTopStyle")&&H(oe.css("borderTopWidth"))>0&&(te|=2),0===ae&&oe.has("borderLeftStyle")&&H(oe.css("borderLeftWidth"))>0&&(te|=4),ae===re.length-1&&oe.has("borderRightStyle")&&H(oe.css("borderRightWidth"))>0&&(te|=8),ne===r.length-1&&oe.has("borderBottomStyle")&&H(oe.css("borderBottomWidth"))>0&&(te|=16);var he=E[k[ne]];if("undefined"!==he)switch(J){case 3:"auto"===he?K>=1?(t(oe),oe.data(C.TABLE,"exceed",!0),oe.data(C.TABLE,"downsized",!0)):e(oe):$(he)?(oe.data(C.TABLE,"percent",he),oe.data(C.TABLE,"expand",!0)):Q(he)&&parseInt(he)>0?oe.bounds.width>=parseInt(he)?(t(oe),oe.data(C.TABLE,"expand",!1),oe.data(C.TABLE,"downsized",!1)):h?(e(oe),oe.data(C.TABLE,"downsized",!0)):(t(oe),oe.data(C.TABLE,"expand",!1)):(oe.has("width")&&!oe.has("width",S.PERCENT)||t(oe),oe.data(C.TABLE,"expand",!1));break;case 2:oe.css("width","0px");break;case 1:"auto"===he?oe.css("width","0px"):(h?oe.data(C.TABLE,"downsized",!0):t(oe),oe.data(C.TABLE,"expand",!1))}k[ne]+=le.colSpan,oe.parent=n}if(k[ne]<X)re[re.length-1].data(C.TABLE,"spaceSpan",X-k[ne]);ie.hide()}return c&&0!==te&&n.css({borderTopWidth:Y(te,2)?"0px":"",borderRightWidth:Y(te,8)?"0px":"",borderBottomWidth:Y(te,16)?"0px":"",borderLeftWidth:Y(te,4)?"0px":""}),{output:this.application.writeGridLayout(n,i,X,W),complete:!0}}}]),t}();e.settings={},e.system={};var Gt=new Set,Vt=new Map;function Ht(e){return!!(Ct&&e instanceof Tt)&&Ct.registerExtension(e)}function zt(n,i){if("object"===t(i)){if(n instanceof Tt)return Object.assign(n.options,i),!0;if(q(n)&&Ct){var r=Ct.getExtension(n)||Array.from(Gt).find(function(e){return e.name===n});if(r)return Object.assign(r.options,i),!0;if(Vt.set(n,i),e.settings.handleExtensionsAsync)return!0}}return!1}function Ut(e){return Ct&&Ct.getExtension(e)}function Xt(){Ct&&Ct.reset()}var Wt={base:{Container:I,Node:Ge,NodeList:He,NodeGroup:ze,Svg:dt,SvgElement:ct,SvgGroup:ut,SvgImage:ft,SvgPath:ht,Application:Et,Controller:xt,Resource:At,File:kt,Extension:Tt,extensions:{Accessibility:wt,Button:St,Custom:It,External:Nt,Grid:Rt,List:_t,Nav:Mt,Origin:Bt,Percent:Ft,Sprite:Dt,Table:Pt}},enumeration:N,constant:_,util:fe,dom:Pe,xml:yt,svg:ot,color:nt};e.setFramework=function(t){if(Ot!==t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.cached():t.create();if(e.settings=Ct||0===Object.keys(e.settings).length?n.settings:Object.assign(n.settings,e.settings),(Ct=n.application).settings=e.settings,Array.isArray(e.settings.builtInExtensions)){for(var i=new Set,r=Array.isArray(o=e.settings.builtInExtensions),a=0,o=r?o:o[Symbol.iterator]();;){var l;if(r){if(a>=o.length)break;l=o[a++]}else{if((a=o.next()).done)break;l=a.value}var s=l;if(s=s.trim(),Ct.builtInExtensions[s])i.add(Ct.builtInExtensions[s]);else for(var u in Ct.builtInExtensions)u.startsWith("".concat(s,"."))&&i.add(Ct.builtInExtensions[u])}i.forEach(function(e){return Ct.registerExtension(e)})}Ot=t,e.system=t.system}Xt()},e.parseDocument=function t(){for(var n=arguments,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];if(Ct&&!Ct.closed){var o;if(e.settings.handleExtensionsAsync){Gt.forEach(function(e){return Ct.registerExtension(e)});var l=Vt.entries(),s=Array.isArray(l),u=0;for(l=s?l:l[Symbol.iterator]();;){var h;if(s){if(u>=l.length)break;h=l[u++]}else{if((u=l.next()).done)break;h=u.value}var c=d(h,2);zt(c[0],c[1])}Gt.clear(),Vt.clear()}return(o=Ct).parseDocument.apply(o,r)}return{then:function(e){Ct?Ct.closed&&confirm("ERROR: Document is closed. Reset and rerun?")&&(Ct.reset(),t.apply(null,n).then(e)):alert("ERROR: Framework not installed.")}}},e.registerExtension=Ht,e.registerExtensionAsync=function(t){return!!Ht(t)||!!(t instanceof Tt&&(Gt.add(t),e.settings.handleExtensionsAsync))},e.configureExtension=zt,e.getExtension=Ut,e.ext=function(e,n){return e instanceof Tt?Ht(e):!!q(e)&&("object"===t(n)?zt(e,n):Ut(e))},e.ready=function(){return Ct&&!Ct.loading&&!Ct.closed},e.close=function(){Ct&&!Ct.loading&&Ct.size>0&&Ct.finalize()},e.reset=Xt,e.saveAllToDisk=function(){Ct&&!Ct.loading&&Ct.size>0&&(Ct.closed||Ct.finalize(),Ct.saveAllToDisk())},e.toString=function(){return Ct?""+Ct:""},e.lib=Wt,Object.defineProperty(e,"__esModule",{value:!0})});
