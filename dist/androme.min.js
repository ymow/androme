!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){this.wrapped=e}function i(e){var t,i;function r(t,i){try{var o=e[t](i),s=o.value,l=s instanceof n;Promise.resolve(l?s.wrapped:s).then(function(e){l?r("next",e):a(o.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):i=null}this._invoke=function(e,n){return new Promise(function(a,o){var s={key:e,arg:n,resolve:a,reject:o,next:null};i?i=i.next=s:(t=i=s,r(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=d(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function g(e,t){return v(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||y()}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e){if(Array.isArray(e))return e}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var b,x,k;!function(e){e[e.NONE=0]="NONE",e[e.DOM_TRAVERSE=2]="DOM_TRAVERSE",e[e.EXTENSION=4]="EXTENSION",e[e.RENDER=8]="RENDER",e[e.ALL=14]="ALL"}(b||(b={})),function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.IMAGE_SOURCE=32]="IMAGE_SOURCE",e[e.ASSET=56]="ASSET",e[e.ALL=126]="ALL"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.CONSTRAINT=2]="CONSTRAINT",e[e.LAYOUT=4]="LAYOUT",e[e.ALIGNMENT=8]="ALIGNMENT",e[e.AUTOFIT=16]="AUTOFIT",e[e.OPTIMIZATION=32]="OPTIMIZATION",e[e.CUSTOMIZATION=64]="CUSTOMIZATION",e[e.ACCESSIBILITY=128]="ACCESSIBILITY",e[e.LOCALIZATION=256]="LOCALIZATION",e[e.ALL=510]="ALL"}(k||(k={}));var A=Object.freeze({get APP_SECTION(){return b},get NODE_RESOURCE(){return x},get NODE_PROCEDURE(){return k}}),S=new Map([[2,"marginTop"],[4,"marginRight"],[8,"marginBottom"],[16,"marginLeft"],[32,"paddingTop"],[64,"paddingRight"],[128,"paddingBottom"],[256,"paddingLeft"]]),E=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],w=["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],_={ACCESSIBILITY:"androme.accessibility",CSS_GRID:"androme.css-grid",EXTERNAL:"androme.external",FLEXBOX:"androme.flexbox",GRID:"androme.grid",LIST:"androme.list",ORIGIN:"androme.origin",PERCENT:"androme.percent",RELATIVE:"androme.relative",SPRITE:"androme.sprite",TABLE:"androme.table",VERTICAL_ALIGN:"androme.verticalalign",WHITESPACE:"androme.whitespace"},T={CSS_URL:/url\("?(.*?)"?\)/,URI:/^[A-Za-z]+:\/\//,UNIT:/^(?:\s*(-?[\d.]+)(px|em|ch|pc|pt|vw|vh|vmin|vmax|mm|cm|in))+$/},B=Object.freeze({CSS_SPACING:S,ELEMENT_BLOCK:E,ELEMENT_INLINE:w,EXT_NAME:_,REGEX_PATTERN:T}),I="ABCDEFGHIJKLMNOPQRSTUVWXYZ",C=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function F(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.sort(function(e,n){for(var r=0;r<i.length;r++){var a=R(e,n,i[r],!0);if(a&&a[0]!==a[1])return 1===t?a[0]>a[1]?1:-1:a[0]<a[1]?1:-1}return 0})}function R(e,t,n,i){for(var r=n.split("."),a=e,o=t,s=Array.isArray(c=r),l=0,c=s?c:c[Symbol.iterator]();;){var h;if(s){if(l>=c.length)break;h=c[l++]}else{if((l=c.next()).done)break;h=l.value}if(void 0===a[h]||void 0===o[h])return(void 0!==a[h]||void 0!==o[h])&&(void 0!==a[h]?[1,0]:[0,1]);a=a[h],o=o[h]}if(i){var u=parseInt(a),d=parseInt(o);if(!isNaN(u)&&!isNaN(d))return[u,d];if(!isNaN(u))return[1,0];if(!isNaN(d))return[0,1]}return[a,o]}function N(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=(e=e.replace(RegExp("^".concat(t,"+")),"")).match(RegExp("(".concat(t,"[a-z])"),"g"));return n&&n.forEach(function(t){return e=e.replace(t,t[1].toUpperCase())}),e}function L(e){return e?e.replace(/[^\w]/g,"_").trim():""}function D(e){return e&&parseInt(e)||0}function P(e){return e&&parseFloat(e)||0}function O(e,t,n){if(e){if(X(e))return"".concat(Math.round(e),"px");if((e=e.trim()).endsWith("px")||e.endsWith("%")||"auto"===e)return e;var i=e.match(T.UNIT);if(i){var r=parseFloat(i[1]);switch(i[2]){case"em":case"ch":r*=n||16;break;case"pc":r*=12;case"pt":r*=4/3;break;case"vw":r*=window.innerWidth/100;break;case"vh":r*=window.innerHeight/100;break;case"vmin":r*=Math.min(window.innerWidth,window.innerHeight)/100;break;case"vmax":r*=Math.max(window.innerWidth,window.innerHeight)/100;break;case"mm":r/=10;case"cm":r/=2.54;case"in":r*=t||96}return"".concat(r,"px")}}return"0px"}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e<1?"".concat(0===t?Math.round(100*e):parseFloat((100*e).toFixed(t)),"%"):"100%"}function H(e){for(var t="";e>=I.length;){var n=Math.floor(e/I.length);n>1&&n<=I.length?(t+=I.charAt(n-1),e-=n*I.length):n>I.length&&(t+=H(n*I.length),e-=n*I.length);var i=e%I.length;t+=I.charAt(i),e-=i+I.length}return t=I.charAt(e)+t}function G(e){for(var t=(""+e).split(""),n="",i=3;i--;)n=(C[parseInt(t.pop()||"")+10*i]||"")+n;return"M".repeat(parseInt(t.join("")))+n}function W(e){return"".concat(isNaN(e=parseFloat(e))?0:Math.round(e),"px")}function z(e){return isNaN(e=parseFloat(e))?"0%":e<1?V(e):"".concat(Math.round(e),"%")}function j(e,t){return(e&t)===t}function X(e){return"number"==typeof e||/^-?\d+(\.\d+)?$/.test(e.trim())}function U(e){return"string"==typeof e&&""!==e}function Y(e){return Array.isArray(e)&&e.length>0}function q(e){return T.UNIT.test(e)}function $(e){return/^\d+(\.\d+)?%$/.test(e)}function K(e,t){return!!e&&e.split(arguments.length>2&&void 0!==arguments[2]?arguments[2]:",").map(function(e){return e.trim()}).includes(t)}function Z(e,n,i){var r,a=!1;if(e&&"object"===t(e)){r=e;var o=n.split("."),s=0;do{r=r[o[s]]}while(null!=r&&++s<o.length&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r);a=null!=r&&s===o.length}switch(i){case"object":return a?r:null;case"number":return a&&!isNaN(parseInt(r))?parseInt(r):0;case"boolean":return a&&!0===r;default:return a?""+r:""}}function Q(e){if(!T.URI.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,i=[],r=0;e.split("/").forEach(function(e){".."===e?r++:i.push(e)}),(n=t=t.slice(0,Math.max(t.length-r,0))).push.apply(n,i),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function J(e){return e?e.trim():""}function ee(e,t){return e?te(ne(e,t),t):""}function te(e,t){return e?e.replace(RegExp("^".concat(t,"+"),"g"),""):""}function ne(e,t){return e?e.replace(RegExp("".concat(t,"+$"),"g"),""):""}function ie(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)}function re(e){return e.substring(e.lastIndexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")+1)}function ae(e){return e.length?Math.min.apply(null,e):Number.MAX_VALUE}function oe(e){return e.length?Math.max.apply(null,e):-1*Number.MAX_VALUE}function se(e,n){var i=[];if("object"===t(n))for(var r in n){var a=n[r];le(e[a])&&i.push([a,e[a]])}else{var o=function(e){return e===n};for(var s in/^\*.+\*$/.test(n)?o=function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?o=function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)&&(o=function(e){return e.startsWith(n.replace(/\*/,""))}),e)o(s)&&i.push([s,e[s]])}return i}function le(e){return null!=e&&""!==(""+e).trim()}function ce(e,t){return e===t||Math.floor(e)===Math.floor(t)||Math.ceil(e)===Math.ceil(t)||Math.ceil(e)===Math.floor(t)||Math.floor(e)===Math.ceil(t)}function he(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function ue(e,t){for(var n=[],i=[],r=0;r<e.length;r++){var a=e[r];t(a,r)?n.push(a):i.push(a)}return[n,i]}function de(e,t){return e.map(function(e,n){return t(e,n)}).filter(function(e){return le(e)})}function fe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return F.apply(void 0,[e,1].concat(n))}function ge(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return F.apply(void 0,[e,2].concat(n))}var pe=Object.freeze({formatString:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e},capitalize:N,convertUnderscore:function(e){var t=(e=e.charAt(0).toLowerCase()+e.substring(1)).match(/([a-z][A-Z])/g);return t&&t.forEach(function(t){return e=e.replace(t,"".concat(t[0],"_").concat(t[1].toLowerCase()))}),e},convertCamelCase:M,convertWord:L,convertInt:D,convertFloat:P,convertPX:O,convertPercent:V,convertAlpha:H,convertRoman:G,convertEnum:function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;r++){var a=i[r];if(e===t[a])return n[a]}return""},formatPX:W,formatPercent:z,hasBit:j,isNumber:X,isString:U,isArray:Y,isUnit:q,isPercent:$,includes:K,optional:Z,optionalAsObject:function(e,t){return Z(e,t,"object")},optionalAsString:function(e,t){return Z(e,t,"string")},optionalAsNumber:function(e,t){return Z(e,t,"number")},optionalAsBoolean:function(e,t){return Z(e,t,"boolean")},resolvePath:Q,trimNull:J,trimString:ee,trimStart:te,trimEnd:ne,repeat:ie,indexOf:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var a=e.indexOf(n[r]);if(-1!==a)return a}return-1},lastIndexOf:re,minArray:ae,maxArray:oe,hasSameValue:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=0;a<i.length;a++){var o=R(e,t,i[a],!1);if(!o||o[0]!==o[1])return!1}return!0},searchObject:se,hasValue:le,withinRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>=e-n&&t<=e+n},withinFraction:ce,assignWhenNull:he,defaultWhenNull:function(e){for(var n=e,i=0;i<(arguments.length<=1?0:arguments.length-1)-1;i++){var r=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];if(i===(arguments.length<=1?0:arguments.length-1)-2)le(n[r])||(n[r]=i+1+1<1||arguments.length<=i+1+1?void 0:arguments[i+1+1]);else{if(!U(r))break;if("object"===t(n[r]))n=n[r];else{if(void 0!==n[r])break;n[r]={},n=n[r]}}}},partition:ue,flatMap:de,sortAsc:fe,sortDesc:ge}),ve=function(){function e(t){r(this,e),this._children=[],Array.isArray(t)&&this.retain(t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._children,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"item",value:function(e,t){return void 0===e||void 0===t?void 0===e?this._children[this._children.length-1]:this._children[e]:e>=0&&e<this._children.length?(this._children[e]=t,t):void 0}},{key:"append",value:function(e){return this._children.push(e),this}},{key:"remove",value:function(e){for(var t=0;t<this._children.length;t++)if(e===this._children[t])return this._children.splice(t,1);return[]}},{key:"contains",value:function(e){return this._children.includes(e)}},{key:"retain",value:function(e){return this._children=e,this}},{key:"duplicate",value:function(){return this._children.slice()}},{key:"clear",value:function(){return this._children.length=0,this}},{key:"each",value:function(e){return this._children.forEach(e),this}},{key:"find",value:function(e,t){return this._children.find("string"==typeof e?function(n){return n[e]===t}:e)}},{key:"filter",value:function(e){return this._children.filter(e)}},{key:"map",value:function(e){return this._children.map(e)}},{key:"flatMap",value:function(e){return this._children.map(e).filter(function(e){return e})}},{key:"partition",value:function(e){return ue(this._children,e)}},{key:"sort",value:function(e){return this._children.sort(e),this}},{key:"every",value:function(e){return this.length>0&&this._children.every(e)}},{key:"some",value:function(e){return this._children.some(e)}},{key:"children",get:function(){return this._children}},{key:"length",get:function(){return this._children.length}}]),e}();function me(e){var t=2;return-1!==navigator.userAgent.indexOf("Edge")?t=8:-1!==navigator.userAgent.indexOf("Firefox")?t=16:-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari")&&(t=4),j(e,t)}function ye(){return{top:0,left:0,right:0,bottom:0}}function be(){return Object.assign({width:0,height:0},{top:0,left:0,right:0,bottom:0})}function xe(e){Array.from(document.getElementsByClassName(e)).forEach(function(e){return e.parentElement&&e.parentElement.removeChild(e)})}function ke(e,t,n,i){return arguments.length>4&&void 0!==arguments[4]&&arguments[4]?$(e)?D(e)/100:parseFloat(O(e,n,i))/t:$(e)?Math.round(t*(D(e)/100)):parseInt(O(e,n,i))}function Ae(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()).filter(function(e){return!(0===Math.round(e.width)&&ce(e.left,e.right))}),i=be(),r=0;if(n.length){i=Se(n[0]);for(var a=new Set([i.top]),o=new Set([i.bottom]),s=1;s<n.length;s++){var l=n[s];a.add(l.top),o.add(l.bottom),i.width+=l.width,i.right=Math.max(l.right,i.right),i.height=Math.max(l.height,i.height)}a.size>1&&o.size>1&&(i.top=ae(Array.from(a)),i.bottom=oe(Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(r=n.length-1))}return Object.assign(i,{multiLine:r})}function Se(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function Ee(e){if(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=ze(e,"style");if(t)return t;var n=Xe(e);if(n){if(n.style)return n.style;if(n.plainText)return n.unsafe("styleMap")}}if("#"!==e.nodeName.charAt(0)){var i=getComputedStyle(e);return We(e,"style",i),i}}return{display:"none"}}function we(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},r=Xe(e),a=Ee(e);return["Top","Left","Right","Bottom"].forEach(function(e){var o=0;["padding","margin"].forEach(function(n){var s=n+e,l=D((r||a)[s]);(t||0!==l)&&(i[s]=l),o+=l}),n&&(i["padding".concat(e)]=o,t?i["margin".concat(e)]=0:delete i["margin".concat(e)])}),i}function _e(e){var t=e.match(T.CSS_URL);return t?Q(t[1]):""}function Te(e,t,n,i){for(var r="",a=e.parentElement;a&&(void 0===i||!i.includes(a.tagName))&&(("inherit"===(r=Ee(a)[t]||"")||n&&n.some(function(e){return-1!==r.indexOf(e)}))&&(r=""),a!==document.body&&!r);)a=a.parentElement;return r}function Be(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return!("#"===e.nodeName.charAt(0)||!i.includes(Ee(e)[t]))||!!e.parentElement&&i.includes(Ee(e.parentElement)[t])}function Ie(e,t){if(e.parentElement&&Ve(e)){var n=Xe(e),i=Ee(e);if(n&&i)return i[t]===Ee(e.parentElement)[t]&&!n.cssInitial(t)}return!1}function Ce(e,t){return e.getAttribute(t)||Ee(e)[M(t)]||""}function Fe(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o={top:0,left:0,right:0,bottom:0,horizontal:"left",vertical:"top",originalX:"",originalY:""},s=e.split(" ");return 4===s.length?s.forEach(function(e,s){switch(s){case 0:o.horizontal=e;break;case 2:o.vertical=e;break;case 1:case 3:var l=ke(e,1===s?t.width:t.height,n,i,a);1===s?r?"right"===o.horizontal?(o.originalX=$(e)?z(100-parseInt(e)):W(t.width-parseInt(O(e,n,i))),o.right=l,o.left=a?1-l:t.width-l):(o.left=l,o.originalX=e):"center"!==o.horizontal&&(o[o.horizontal]=l):r?"bottom"===o.vertical?(o.originalY=$(e)?z(100-parseInt(e)):W(t.height-parseInt(O(e,n,i))),o.bottom=l,o.top=a?1-l:t.height-l):(o.top=l,o.originalY=e):"center"!==o.vertical&&(o[o.vertical]=l)}}):2===s.length&&s.forEach(function(e,s){var l=0===s?t.width:t.height,c=0===s?"left":"top",h=0===s?"originalX":"originalY",u=ke(e,l,n,i,a);if($(e))o[c]=u,o[h]=e;else if(/^[a-z]+$/.test(e)){if(o[0===s?"horizontal":"vertical"]=e,r)switch(e){case"left":case"top":o[h]="0%";break;case"right":case"bottom":o[c]=a?1:l,o[h]="100%";break;case"center":o[c]=a?.5:Math.round(l/2),o[h]="50%"}}else o[c]=u,o[h]=e}),o}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof HTMLElement)for(var n=e.childNodes.length-1;n>=0;n--){var i=Xe(e.childNodes[n]);if(i&&(!i.excluded||t&&i.lineBreak))return i.element}return null}function Ne(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];function n(e){return e.some(function(e){if("#text"===e.nodeName){if(Me(e,t)||Be(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return!0}else if(e instanceof HTMLElement&&He(e)&&e.childNodes.length&&n(Array.from(e.childNodes)))return!0;return!1})}return n("#text"===e.nodeName?[e]:Array.from(e.childNodes))}function Me(e){if(e&&"#text"===e.nodeName&&e.textContent){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){for(var t=e.textContent,n=!1,i=0;i<t.length;i++)switch(t.charCodeAt(i)){case 9:case 10:case 13:case 32:continue;default:n=!0}return n&&""!==t}return""!==e.textContent.trim()}return!1}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=e.textContent||"";if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(n=n.trim()),e instanceof HTMLElement&&e.children.length&&Array.from(e.children).some(function(e){return"BR"===e.tagName}))return!0;if(!t&&/\n/.test(n)){var i=Xe(e),r=i?i.css("whiteSpace"):Ee(e).whiteSpace||"";return["pre","pre-wrap"].includes(r)||"#text"===e.nodeName&&Be(e,"whiteSpace","pre","pre-wrap")}}return!1}function De(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Xe(e);return!!n&&("BR"===n.tagName||t&&n.excluded&&n.blockStatic)}function Pe(e){for(e=e.previousSibling;e;){var t=Xe(e);if(t&&(!t.excluded||t.lineBreak))return t.element;e=e.previousSibling}return null}function Oe(e){for(e=e.nextSibling;e;){var t=Xe(e);if(t&&(!t.excluded||t.lineBreak))return t.element;e=e.nextSibling}return null}function Ve(e){return e instanceof HTMLElement||e instanceof SVGSVGElement}function He(e){var t=e.getBoundingClientRect();return 0!==t.width&&0!==t.height&&!(t.left<0&&t.top<0&&Math.abs(t.left)>=t.width&&Math.abs(t.top)>=t.height)}function Ge(e){if(e.parentElement instanceof SVGSVGElement)return!1;if(Ve(e)){if(le(e.dataset.include))return!0;if(He(e))return!0;for(var t=e.parentElement,n=!0;t;){if("none"===Ee(t).display){n=!1;break}t=t.parentElement}return!(!n||!e.children.length)&&Array.from(e.children).some(function(e){var t=Ee(e),n=t.cssFloat,i=t.position;return"absolute"===i||"fixed"===i||"left"===n||"right"===n})}return Me(e)}function We(e,t,n){e["__".concat(t)]=n}function ze(e,t){return e["__".concat(t)]||void 0}function je(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){delete e["__".concat(n[r])]}}function Xe(e){return U(e.className)&&e.className.startsWith("androme")?void 0:ze(e,"node")}var Ue=Object.freeze({isUserAgent:me,getDataSet:function(e,t){var n={};if(Ve(e))for(var i in t=M(t,"\\."),e.dataset)i.length>t.length&&i.startsWith(t)&&(n[N(i.substring(t.length),!1)]=e.dataset[i]);return n},newBoxRect:ye,newRectDimensions:be,newBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},createElement:function(e){var t=document.createElement(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"div":"span");return t.style.display="none",t.className="androme.display.none",e instanceof HTMLElement&&e.appendChild(t),t},removeElementsByClassName:xe,convertClientUnit:ke,getRangeClientRect:Ae,assignBounds:Se,getStyle:Ee,getBoxSpacing:we,cssResolveUrl:_e,cssInherit:Te,cssParent:Be,cssFromParent:Ie,cssAttribute:Ce,getBackgroundPosition:Fe,getFirstChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof HTMLElement)for(var n=0;n<e.childNodes.length;n++){var i=Xe(e.childNodes[n]);if(i&&(!i.excluded||t&&i.lineBreak))return i.element}return null},getLastChildElement:Re,hasFreeFormText:Ne,isPlainText:Me,hasLineBreak:Le,isLineBreak:De,getBetweenElements:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||e.parentElement===t.parentElement){var r=t.parentElement;if(r){var a=Array.from(r.childNodes),o=e?a.findIndex(function(t){return t===e}):0,s=a.findIndex(function(e){return e===t});if(-1!==o&&-1!==s&&o!==s){var l=a.slice(Math.min(o,s)+1,Math.max(o,s));return l=l.filter(n?function(e){return"#comment"!==e.nodeName}:function(e){return"#"!==e.nodeName.charAt(0)||Me(e)}),i&&(l=l.filter(function(e){return Xe(e)})),l}}}return[]},getPreviousElementSibling:Pe,getNextElementSibling:Oe,hasComputedStyle:Ve,withinViewportOrigin:He,isElementIncluded:Ge,setElementCache:We,getElementCache:ze,deleteElementCache:je,getElementAsNode:Xe}),Ye=function(e){function t(e){var n;return r(this,t),(n=u(this,c(t).call(this,e)))._currentId=0,n}return l(t,ve),o(t,[{key:"append",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return f(c(t.prototype),"append",this).call(this,e),n&&this.delegateAppend&&this.delegateAppend.call(this,e),this}},{key:"reset",value:function(){return this._currentId=0,this.clear(),this}},{key:"visible",get:function(){return this.children.filter(function(e){return e.visible})}},{key:"elements",get:function(){return this.children.filter(function(e){return e.visible&&e.styleElement})}},{key:"nextId",get:function(){return++this._currentId}}],[{key:"actualParent",value:function(e){for(var t=Array.isArray(i=e),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}if(r.baseElement&&r.actualParent)return r.actualParent}}},{key:"baseline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.filter(function(e){return!e.floating&&!q(e.verticalAlign)&&!["absolute","fixed"].includes(e.cssInitial("position"))});n.length&&(e=n),n=e.filter(function(e){return e.textElement||"text-top"!==e.verticalAlign&&"text-bottom"!==e.verticalAlign}),n.length&&(e=n),t&&(e=e.filter(function(e){return e.baseElement&&!e.imageElement}));var i=oe(e.map(function(e){return e.lineHeight})),r=oe(e.map(function(e){return e.bounds.height}));return e.filter(function(e){return i>r?e.lineHeight===i:e.bounds.height===r}).sort(function(e,t){if(e.groupParent||!e.baseline&&t.baseline)return 1;if(t.groupParent||e.baseline&&!t.baseline)return-1;if(!e.imageElement||!t.imageElement){var n=D(e.css("fontSize")),i=D(t.css("fontSize"));if(e.multiLine||t.multiLine){if(e.lineHeight&&t.lineHeight)return e.lineHeight<=t.lineHeight?1:-1;if(n===i)return e.htmlElement||!t.htmlElement?-1:1}if(e.containerType!==t.containerType)return e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.containerType<t.containerType?-1:1;if(t.imageElement)return-1;if(e.imageElement)return 1;if(n===i)return e.htmlElement&&!t.htmlElement?-1:!e.htmlElement&&t.htmlElement?1:e.siblingIndex>=t.siblingIndex?1:-1;if(n!==i&&0!==n&&0!==i)return n>i?-1:1}return 0})}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&e.length>1){e.slice().sort(this.siblingIndex);var t=this.actualParent(e);if(t){for(var n=[],i=e[e.length-1],r=!1,a=0;a<t.element.childNodes.length;a++){var o=Xe(t.element.childNodes[a]);if(o&&(o===e[0]&&(r=!0),r&&n.push(o),o===i))break}n.length>=e.length&&(e=n)}}for(var s=new Map,l=new Set,c=Array.isArray(u=e),h=0,u=c?u:u[Symbol.iterator]();;){var d;if(c){if(h>=u.length)break;d=u[h++]}else{if((h=u.next()).done)break;d=h.value}var f=d;if(f.pageFlow){var g=f.css("clear");l.size>0&&("both"===g?(s.set(f,2===l.size?"both":l.values().next().value),l.clear()):l.has(g)&&(l.delete(g),s.set(f,g))),f.floating&&l.add(f.float)}}return s}},{key:"floatedAll",value:function(e){return this.floated(e.actualChildren.filter(function(e){return e.pageFlow}))}},{key:"clearedAll",value:function(e){return this.cleared(e.actualChildren.filter(function(e){return e.pageFlow}),!1)}},{key:"linearX",value:function(e){var n=e.filter(function(e){return e.pageFlow}).sort(t.siblingIndex);switch(n.length){case 0:return!1;case 1:return!0;default:var i=this.actualParent(n);if(i){for(var r=this.clearedAll(i),a=1;a<n.length;a++)if(n[a].alignedVertically(n[a].previousSiblings(),void 0,r))return!1;for(var o=ae(n.map(function(e){return e.linear.left})),s=oe(n.map(function(e){return e.linear.right})),l=oe(n.filter(function(e){return"left"===e.float}).map(function(e){return e.linear.right})),c=ae(n.filter(function(e){return"right"===e.float}).map(function(e){return e.linear.left})),h=0,u=0,d=0,f=0,g=0;h<n.length;h++){var p=n[h];if(Math.floor(p.linear.left)<=o&&u++,Math.ceil(p.linear.right)>=s&&d++,p.floating||(p.linear.left===l&&f++,p.linear.right===c&&g++),0!==h){if(2===u||2===d||2===f||2===g)return!1;var v=n[h-1];if(v.floating&&p.linear.top>=v.linear.bottom||ce(p.linear.left,v.linear.left))return!1}}return!0}return!1}}},{key:"linearY",value:function(e){var n=e.filter(function(e){return e.pageFlow}).sort(t.siblingIndex);switch(n.length){case 0:return!1;case 1:return!0;default:var i=this.actualParent(n);if(i){for(var r=this.clearedAll(i),a=1;a<n.length;a++)if(!n[a].alignedVertically(n[a].previousSiblings(),n,r))return!1;return!0}return!1}}},{key:"partitionRows",value:function(e){for(var t,n=this,i=g((t=n.actualParent(e))?[t.actualChildren,n.clearedAll(t)]:[e,n.cleared(e)],2),r=i[0],a=i[1],o=[],s=[],l=0;l<r.length;l++){var c=r[l],h=c.previousSiblings();0===l||0===h.length?e.includes(c)&&s.push(c):c.alignedVertically(h,s,a)?(s.length&&o.push(s),s=e.includes(c)?[c]:[]):e.includes(c)&&s.push(c),l===r.length-1&&s.length&&o.push(s)}return o}},{key:"siblingIndex",value:function(e,t){return e.siblingIndex>=t.siblingIndex?1:-1}}]),t}(),qe=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5?arguments[5]:void 0;return r(this,t),(i=u(this,c(t).call(this,l))).parent=e,i.node=n,i.containerType=a,i.alignmentType=o,i.itemCount=s,i.rowCount=0,i.columnCount=0,i.renderType=0,i.renderPosition=!1,i}return l(t,ve),o(t,[{key:"init",value:function(){this.floated=this.getFloated(),this.cleared=this.getCleared(),this.linearX=this.isLinearX()}},{key:"initParent",value:function(){this.floated=this.getFloated(!0),this.cleared=this.getCleared(!0),this.linearX=this.isLinearX()}},{key:"setType",value:function(e){this.containerType=e;for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){this.add(n[r])}}},{key:"add",value:function(e){return this.alignmentType|=e,this.alignmentType}},{key:"retain",value:function(e){return f(c(t.prototype),"retain",this).call(this,e),this.itemCount=e.length,this}},{key:"delete",value:function(e){return j(this.alignmentType,e)&&(this.alignmentType^=e),this.alignmentType}},{key:"getFloated",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Ye.floatedAll(this.parent):Ye.floated(this.children)}},{key:"getCleared",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Ye.clearedAll(this.parent):Ye.cleared(this.children)}},{key:"isLinearX",value:function(){return Ye.linearX(this.children)}},{key:"isLinearY",value:function(){return Ye.linearY(this.children)}},{key:"floated",set:function(e){e.size?this.add(64):this.delete(64),this.every(function(e){return"right"===e.float})?this.add(512):this.delete(512),this._floated=e},get:function(){return this._floated||this.getFloated()}},{key:"cleared",set:function(e){this._cleared=e},get:function(){return this._cleared||this.getCleared()}},{key:"visible",get:function(){return this.children.filter(function(e){return e.visible})}},{key:"linearX",set:function(e){this._linearX=e},get:function(){return this._linearX||this.isLinearX()}},{key:"linearY",set:function(e){this._linearY=e},get:function(){return this._linearY||this.isLinearY()}}]),t}(),$e={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},LightGrey:{hex:"#D3D3D3"},DarkGrey:{hex:"#A9A9A9"},Grey:{hex:"#808080"},DimGrey:{hex:"#696969"},LightSlateGrey:{hex:"#778899"},SlateGrey:{hex:"#708090"},DarkSlateGrey:{hex:"#2F4F4F"},Black:{hex:"#000000"}},Ke=[];for(var Ze in $e){var Qe=$e[Ze];Qe.name=Ze;var Je=ot(Qe.hex);Je&&(Qe.rgba=Je,Qe.hsl=et(Qe.rgba),Ke.push(Qe))}function et(e){var t=e.r,n=void 0===t?0:t,i=e.g,r=void 0===i?0:i,a=e.b,o=void 0===a?0:a,s=Math.min(n/=255,r/=255,o/=255),l=Math.max(n,r,o),c=(l+s)/2,h=c,u=c;if(l===s)c=0,h=0;else{var d=l-s;switch(h=u>.5?d/(2-l-s):d/(l+s),l){case n:c=(r-o)/d+(r<o?6:0);break;case r:c=(o-n)/d+2;break;case o:c=(n-r)/d+4}c/=6}return{h:360*c,s:100*h,l:100*u}}function tt(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],r=n[1];if(i===r){var a=[e.hsl.s,t.hsl.s];if((i=a[0])===(r=a[1])){var o=[e.hsl.l,t.hsl.l];i=o[0],r=o[1]}}return i>=r?1:-1}return 0}function nt(e){return"rgb".concat(e.a<255?"a":"","(").concat(e.r,", ").concat(e.g,", ").concat(e.b).concat(e.a<255?", ".concat((e.a/255).toFixed(2)):"",")")}function it(e){return parseFloat(e)<1?rt("255",parseFloat(e)):"FF"}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="0123456789ABCDEF",i=parseInt(e)*t;return isNaN(i)?"00":n.charAt(((i=Math.max(0,Math.min(i,255)))-i%16)/16)+n.charAt(i%16)}function at(e){for(var t in $e)if(t.toLowerCase()===e.trim().toLowerCase())return $e[t];return null}function ot(e){if(e=e.replace(/#/g,"").trim(),/[A-Za-z\d]{3,}/.test(e)){var t=255;switch(e.length){case 4:t=parseInt(e.charAt(3).repeat(2),16);case 3:e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2);break;case 5:e+=e.charAt(4);break;default:e.length>=8&&(t=parseInt(e.substring(6,8),16)),e=e.substring(0,6)}if(6===e.length)return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16),a:t}}return null}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(e&&"initial"!==e&&"transparent"!==e){if(""===t.trim()&&(t="1"),"#"===e.charAt(0)){var n=ot(e);n&&(e=nt(n))}else if(!e.startsWith("rgb")){var i=at(e);i&&i.rgba&&(i.rgba.a=parseFloat(it(t)),e=nt(i.rgba))}var r=e.match(/rgba?\((\d+), (\d+), (\d+),?\s*([\d.]+)?\)/);if(r&&r.length>=4&&(void 0===r[4]||parseFloat(r[4])>0)){void 0===r[4]&&(r[4]=parseFloat(t).toFixed(2));var a=rt(r[1])+rt(r[2])+rt(r[3]),o=it(r[4]),s="#".concat(a+o),l=parseFloat(r[4]);return{valueRGB:"#".concat(a),valueRGBA:s,valueARGB:"#".concat(o+a),alpha:l,rgba:ot(s),opaque:l<1,visible:l>0}}}return null}Ke.sort(tt);var lt=Object.freeze({convertHex:rt,getColorByName:at,getColorByShade:function(e){var t=Ke.slice(),n=t.findIndex(function(t){return t.hex===e});if(-1!==n)return t[n];var i=ot(e);if(i){var r=et(i);if(r)return t.push({name:"",hsl:r,rgba:{r:-1,g:-1,b:-1,a:1},hex:""}),t.sort(tt),n=t.findIndex(function(e){return""===e.name}),t[Math.min(n+1,t.length-1)]}return null},convertRGBA:ot,parseRGBA:st,reduceRGBA:function(e,t){var n=ot(e);if(n){var i=t<0?0:255;return n.r=Math.round((i-n.r)*(t=Math.abs(t)))+n.r,n.g=Math.round((i-n.g)*t)+n.g,n.b=Math.round((i-n.b)*t)+n.b,st(nt(n))}return null}});function ct(e){return"{".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:":")+""+e,"}")}function ht(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="number"==typeof t?ct(t):t;return e.replace(r,(i?r:"")+n+(i?"":r))}function ut(e,t){if(t>=0){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+ie(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function dt(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t))}).replace(/\u00A0/g,"&#160;").replace(/\u2002/g,"&#8194;").replace(/\u2003/g,"&#8195;").replace(/\u2009/g,"&#8201;").replace(/\u200C/g,"&#8204;").replace(/\u200D/g,"&#8205;").replace(/\u200E/g,"&#8206;").replace(/\u200F/g,"&#8207;")}var ft=Object.freeze({getEnclosingTag:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=ie(Math.max(0,n)),a="{<".concat(t,"}");return a+=""!==i?r+"<".concat(e).concat(0===n?"{#0}":"","{@").concat(t,"}>\n")+i+r+"</".concat(e,">\n"):r+"<".concat(e).concat(0===n?"{#0}":"","{@").concat(t,"} />\n"),a+="{>".concat(t,"}")},formatPlaceholder:ct,removePlaceholderAll:function(e){return e.replace(/{[<:@>]\d+(\^\d+)?}/g,"").trim()},replacePlaceholder:ht,replaceIndent:ut,replaceTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return t>0&&(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.split("\n").map(function(e){var n=e.match(/^(\t+)(.*)$/);return n?" ".repeat(t*n[1].length)+n[2]:e}).join("\n"):e.replace(/\t/g," ".repeat(t))),e},replaceEntity:dt,replaceCharacter:function(e){return e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z0-9]{2,};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},parseTemplate:function(e){for(var t,n={__root:e},i=!1,r=e.length,a="";;){if(i){var o=i[0].replace(RegExp("^".concat(i[1],"\\n")),"").replace(RegExp("".concat(i[1],"$")),"");for(var s in n)n[s]=n[s].replace(RegExp(i[0],"g"),"{%".concat(i[2],"}"));n[i[2]]=o,r-=i[0].length,a=i[2]}if(null===i||0===r){if(!a)break;if(!(e=n[a]))break;r=e.length,a="",i=null}if(i||(t=/(!(\w+))\n[\w\W]*\n*\1/g),!t)break;i=t.exec(e)}return n},createTemplate:function e(t,n,i){var r=void 0===i?t.__root.trim():t[i];for(var a in n){var o="";if(Y(n[a])){for(var s=0;s<n[a].length;s++)o+=e(t,n[a][s],""+a);o=ne(o,"\\n")}else o=n[a];var l="";U(o)&&(l=Y(n[a])?"%":"[&~]",r=r.replace(RegExp("{".concat(l+a,"}"),"g"),o)),(!1===o||Array.isArray(o)&&0===o.length||l&&"%"!==l)&&(r=r.replace(RegExp("{%".concat(a,"}\\n*"),"g"),"")),""===l&&RegExp("{&".concat(a,"}")).test(r)&&(r="")}return void 0===i&&(r=r.replace(/\n{%\w+}\n/g,"\n")),r.replace(/\s+([\w:]+="[^"]*)?{~\w+}"?/g,"")},getTemplateSection:function(e){for(var t=e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=g(i[a].split("-"),2),s=o[0],l=o[1],c=void 0===l?"0":l;if(!t[s]||!t[s][parseInt(c)])return{};t=t[s][parseInt(c)]}return t}}),gt=function(){function e(t,n){r(this,e),this.application=t,this.cache=n}return o(e,[{key:"finalize",value:function(e){}},{key:"reset",value:function(){for(var t in e.ASSETS)e.ASSETS[t]=new Map;for(var n in e.STORED)e.STORED[n]=new Map;this.fileHandler&&this.fileHandler.reset()}},{key:"setBoxStyle",value:function(){for(var t=Array.isArray(i=this.cache.elements),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r,o={background:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,borderRadius:null,backgroundColor:null,backgroundSize:null,backgroundImage:null,backgroundRepeat:null,backgroundPositionX:null,backgroundPositionY:null};for(var s in o){var l=a.css(s);switch(s){case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":var c=a.css("".concat(s,"Color"));switch(c.toLowerCase()){case"initial":c="#000000";break;case"inherit":case"currentcolor":c=Te(a.element,"".concat(s,"Color"))}var h=a.css("".concat(s,"Width"))||"1px",u=a.css("".concat(s,"Style"))||"none";"inset"===u&&"0px"===h&&(h="1px");var d=st(c,a.css("opacity"));o[s]={width:h,style:u,color:"none"!==u&&d?d.valueRGBA:""};break;case"borderRadius":var f=[a.css("borderTopLeftRadius"),a.css("borderTopRightRadius"),a.css("borderBottomLeftRadius"),a.css("borderBottomRightRadius")],g=f[0],p=f[1],v=f[2],m=f[3];o.borderRadius=g===p&&p===v&&v===m?0===D(g)?void 0:[g]:[g,p,v,m];break;case"backgroundColor":if(!a.has("backgroundColor")&&(l===a.cssParent("backgroundColor",!1,!0)||a.documentParent.visible&&Ie(a.element,"backgroundColor")))o.backgroundColor="";else{var y=st(l,a.css("opacity"));o.backgroundColor=y?y.valueRGBA:""}break;case"background":case"backgroundImage":"none"===l||a.hasBit("excludeResource",x.IMAGE_SOURCE)||function(){for(var e=function(e){return"".concat(e?"":"(?:",",?\\s*(").concat(e?"":"?:","rgba?\\(\\d+, \\d+, \\d+(?:, [\\d.]+)?\\)|[a-z]+)\\s*(").concat(e?"":"?:","\\d+%)?").concat(e?"":")")},t=[],n=RegExp("([a-z-]+)-gradient\\(([\\w\\s%]+)?(".concat(e(!1),"+)\\)"),"g"),i=void 0;null!==(i=n.exec(l));){var r=void 0;"linear"===i[1]?(/^to/.test(i[2])||/deg$/.test(i[2])||(i[3]=i[2]+i[3],i[2]="180deg"),r={type:"linear",angle:function(){switch(i[2]){case"to top":return 0;case"to right top":return 45;case"to right":return 90;case"to right bottom":return 135;case"to bottom":return 180;case"to left bottom":return 225;case"to left":return 270;case"to left top":return 315;default:return D(i[2])}}(),colorStop:[]}):r={type:"radial",shapePosition:function(){var e=["ellipse","center"];if(i[2]){var t=i[2].split("at").map(function(e){return e.trim()});switch(t[0]){case"ellipse":case"circle":case"closest-side":case"closest-corner":case"farthest-side":case"farthest-corner":e[0]=t[0];break;default:e[1]=t[0]}t[1]&&(e[1]=t[1])}return e}(),colorStop:[]};for(var s=i[3].trim().split(RegExp(e(!0),"g")),c=a.css("opacity"),h=0;h<s.length;h+=3){var u=s[h+1];if(u){var d=st(u,c);d&&d.visible&&r.colorStop.push({color:d.valueRGBA,offset:s[h+2]||"0%",opacity:d.alpha})}}r.colorStop.length>1&&t.push(r)}if(t.length)o.backgroundGradient=t;else{var f=[];for(n=RegExp(T.CSS_URL,"g"),i=null;null!==(i=n.exec(l));)i&&f.push(i[0]);f.length&&(o.backgroundImage=f)}}();break;case"backgroundSize":case"backgroundRepeat":case"backgroundPositionX":case"backgroundPositionY":o[s]=l}}var b=JSON.stringify(o.borderTop);b===JSON.stringify(o.borderRight)&&b===JSON.stringify(o.borderBottom)&&b===JSON.stringify(o.borderLeft)&&(o.border=o.borderTop),a.data(e.KEY_NAME,"boxStyle",o)}}},{key:"setFontStyle",value:function(){for(var t=Array.isArray(i=this.cache),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r,o=e.hasDrawableBackground(a.data(e.KEY_NAME,"boxStyle"));if(!(a.renderChildren.length||void 0===a.baseElement||a.imageElement||"HR"===a.tagName||a.inlineText&&!o&&!a.preserveWhiteSpace&&""===a.element.innerHTML.trim())){var s=a.css("opacity"),l=st(a.css("color"),s),c=void 0;c=o||a.cssParent("backgroundColor",!1,!0)===a.css("backgroundColor")&&(a.plainText||a.style.backgroundColor!==a.cssInitial("backgroundColor"))||!a.has("backgroundColor")&&a.documentParent.visible&&Ie(a.element,"backgroundColor")?null:st(a.css("backgroundColor"),s);var h=a.css("fontFamily"),u=a.css("fontSize"),d=a.css("fontWeight");if(me(8)&&!a.has("fontFamily"))switch(a.tagName){case"TT":case"CODE":case"KBD":case"SAMP":h="monospace"}if(0===D(u))switch(u){case"xx-small":u="8px";break;case"x-small":u="10px";break;case"small":u="13px";break;case"medium":u="16px";break;case"large":u="18px";break;case"x-large":u="24px";break;case"xx-large":u="32px"}if(!X(d))switch(d){case"lighter":d="200";break;case"bold":d="700";break;case"bolder":d="900";break;default:d="400"}var f={fontFamily:h,fontStyle:a.css("fontStyle"),fontSize:u,fontWeight:d,color:l?l.valueRGBA:"",backgroundColor:c?c.valueRGBA:""};a.data(e.KEY_NAME,"fontStyle",f)}}}},{key:"setBoxSpacing",value:function(){for(var t=Array.isArray(i=this.cache.elements),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r,o=we(a.element);if(Object.keys(o).length){var s={};for(var l in o)s[l]=!a.inlineStatic||"marginTop"!==l&&"marginBottom"!==l?a.convertPX(o[l]):"0px";a.data(e.KEY_NAME,"boxSpacing",s)}}}},{key:"setValueString",value:function(){function t(e,t){var n=e.renderParent;switch(e.multiLine&&n&&!n.layoutVertical&&(t=t.replace(/^\s*\n/,"")),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," ");break;case"pre":case"pre-wrap":n&&!n.layoutVertical&&(t=t.replace(/^\n/,"")),t=(t=t.replace(/\n/g,"\\n")).replace(/\s/g,"&#160;");break;case"pre-line":t=(t=t.replace(/\n/g,"\\n")).replace(/\s+/g," ");break;default:var i=e.baseElement;return i&&(i.previousSibling&&De(i.previousSibling)&&(t=t.replace(/^\s+/,"")),i.nextSibling&&De(i.nextSibling)&&(t=t.replace(/\s+$/,""))),[t,!1]}return[t,!0]}for(var n=Array.isArray(r=this.cache.visible),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a,s=o.baseElement;if(s){var l="",c="",h=!1,u=!0;if(s instanceof HTMLInputElement)switch(s.type){case"text":case"number":case"email":case"search":case"submit":case"reset":case"button":c=s.value.trim();break;default:o.companion&&!o.companion.visible&&(c=o.companion.textContent.trim())}else if(s instanceof HTMLTextAreaElement)c=s.value.trim();else if(s instanceof HTMLElement)if("BUTTON"===s.tagName)c=s.innerText;else if(o.inlineText){l=o.textContent.trim();var d=g(t(o,c="CODE"===s.tagName?dt(s.innerHTML):Le(s,!0)?(c=(c=dt(s.innerHTML)).replace(/\s*<br[^>]*>\s*/g,"\\n")).replace(/(<([^>]+)>)/gi,""):dt(o.textContent)),2);c=d[0],h=d[1]}else""===s.innerText.trim()&&e.hasDrawableBackground(o.data(e.KEY_NAME,"boxStyle"))&&(c=dt(s.innerText),u=!1);else if(o.plainText){l=o.textContent.trim();var f=g(t(o,c=(c=dt(o.textContent)).replace(/&[A-Za-z]+;/g,function(e){return e.replace("&","&amp;")})),2);c=f[0],h=f[1]}if(""!==c){if(u){var p=o.previousSiblings().pop(),v=o.nextSiblings().shift(),m=!1;if(void 0===p||p.multiLine||p.lineBreak||p.plainText&&/\s+$/.test(p.textContent)?c=c.replace(/^\s+/,""):m=/\s+$/.test(p.element.innerText||p.element.textContent||""),h){var y=c;c=c.trim(),!p||p.block||p.lineBreak||m||!/^\s+/.test(y)||(c="&#160;"+c),v&&!v.lineBreak&&/\s+$/.test(y)&&(c+="&#160;")}else/^\s+$/.test(c)?c.length&&(c="&#160;"+c.substring(1)):c=(c=c.replace(/^\s+/,p&&(p.block||p.lineBreak||p.element instanceof HTMLElement&&p.element.innerText.length>1&&m||o.multiLine&&Le(s))?"":"&#160;")).replace(/\s+$/,"table-cell"===o.display||v&&v.lineBreak||o.blockStatic?"":"&#160;")}""!==c&&o.data(e.KEY_NAME,"valueString",{name:l,value:c})}}}}},{key:"stored",get:function(){return e.STORED}}],[{key:"generateId",value:function(e,t,n){var i=t,r=n;1===n&&(t+="_".concat(""+r));for(var a=this.ASSETS.ids.get(e)||[];;){if(!a.includes(t)){a.push(t);break}t="".concat(i,"_").concat(""+ ++r)}return this.ASSETS.ids.set(e,a),t}},{key:"getStoredName",value:function(t,n){var i=e.STORED[t].entries(),r=Array.isArray(i),a=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(a>=i.length)break;o=i[a++]}else{if((a=i.next()).done)break;o=a.value}var s=g(o,2),l=s[0],c=s[1];if(JSON.stringify(n)===JSON.stringify(c))return l}return""}},{key:"insertStoredAsset",value:function(t,n,i){var r=e.STORED[t];if(r){var a=this.getStoredName(t,i);if(""===a&&((X(n)||/^\d/.test(n))&&(n="__".concat(n)),le(i))){var o=0;do{a=n,o>0&&(a+="_".concat(o)),r.has(a)||r.set(a,i),o++}while(r.has(a)&&r.get(a)!==i)}return a}return""}},{key:"isBorderVisible",value:function(e){return!!e&&!("none"===e.style||"0px"===e.width||""===e.color||9===e.color.length&&e.color.endsWith("00"))}},{key:"hasDrawableBackground",value:function(e){return!!e&&(this.isBorderVisible(e.borderTop)||this.isBorderVisible(e.borderRight)||this.isBorderVisible(e.borderBottom)||this.isBorderVisible(e.borderLeft)||!!e.backgroundImage||!!e.borderRadius||!!e.backgroundGradient)}}]),e}();function pt(e,t,n){var i=[],r=t;do{r.dataset.include&&i.push.apply(i,p(r.dataset.include.split(",").map(function(e){return e.trim()}))),r=r!==e?r.parentElement:null}while(r);if(i.length){for(var a=[],o=[],s=Array.isArray(c=n),l=0,c=s?c:c[Symbol.iterator]();;){var h;if(s){if(l>=c.length)break;h=c[l++]}else{if((l=c.next()).done)break;h=l.value}var u=h,d=i.indexOf(u.name);-1!==d?a[d]=u:o.push(u)}return p(a.filter(function(e){return e})).concat(o)}return n}function vt(e,t){var n=e.nextSiblings();return!(!e.positionAuto||e.element!==Re(t.element)&&0!==n.length&&!n.every(function(e){return e.blockStatic||e.lineBreak||e.excluded}))&&(e.css({position:"static",display:"inline-block",verticalAlign:"top"}),e.unsetCache(),!0)}gt.KEY_NAME="androme.resource",gt.ASSETS={ids:new Map,images:new Map},gt.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,styles:new Map,dimens:new Map,drawables:new Map,images:new Map};var mt=function(){function e(t,n,i,a){r(this,e),this.framework=t,this.nodeConstructor=a,this.initialized=!1,this.closed=!1,this.builtInExtensions={},this.extensions=new Set,this.parseElements=new Set,this.session={cache:new Ye,image:new Map,renderQueue:new Map,excluded:new Ye},this.processing={cache:new Ye,depthMap:new Map,node:null,layout:null,excluded:new Ye},this._renderPosition=new Map,this._views=[],this._includes=[],this.controllerHandler=new n(this,this.processing.cache),this.resourceHandler=new i(this,this.processing.cache)}return o(e,[{key:"registerController",value:function(e){e.application=this,e.cache=this.processing.cache,this.controllerHandler=e}},{key:"registerResource",value:function(e){e.application=this,e.cache=this.processing.cache,this.resourceHandler=e}},{key:"finalize",value:function(){for(var e=this.session.cache.filter(function(e){return e.visible&&e.rendered}),t=Array.isArray(i=e),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r;a.hasBit("excludeProcedure",k.LAYOUT)||a.setLayout(),a.hasBit("excludeProcedure",k.ALIGNMENT)||a.setAlignment()}for(var o=Array.isArray(l=e),s=0,l=o?l:l[Symbol.iterator]();;){var c;if(o){if(s>=l.length)break;c=l[s++]}else{if((s=l.next()).done)break;c=s.value}var h=c;h.hasBit("excludeProcedure",k.OPTIMIZATION)||h.applyOptimizations(),h.hasBit("excludeProcedure",k.CUSTOMIZATION)||h.applyCustomizations()}for(var u=Array.isArray(f=this.extensions),d=0,f=u?f:f[Symbol.iterator]();;){var g;if(u){if(d>=f.length)break;g=f[d++]}else{if((d=f.next()).done)break;g=d.value}for(var p=g,v=Array.isArray(y=p.subscribers),m=0,y=v?y:y[Symbol.iterator]();;){var b;if(v){if(m>=y.length)break;b=y[m++]}else{if((m=y.next()).done)break;b=m.value}p.postProcedure(b)}}for(var x=Array.isArray(S=this.extensions),A=0,S=x?S:S[Symbol.iterator]();;){var E;if(x){if(A>=S.length)break;E=S[A++]}else{if((A=S.next()).done)break;E=A.value}E.afterProcedure()}this.processRenderQueue(),this.resourceHandler.finalize(this.sessionData),this.controllerHandler.finalize(this.sessionData);for(var w=Array.isArray(T=this.extensions),_=0,T=w?T:T[Symbol.iterator]();;){var B;if(w){if(_>=T.length)break;B=T[_++]}else{if((_=T.next()).done)break;B=_.value}B.afterFinalize()}this.closed=!0}},{key:"saveAllToDisk",value:function(){this.resourceHandler.fileHandler&&this.resourceHandler.fileHandler.saveAllToDisk(this.sessionData)}},{key:"reset",value:function(){this.session.cache.each(function(e){return e.baseElement&&je(e.baseElement,"node","style","styleMap")});for(var e=Array.isArray(n=this.parseElements),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;delete r.dataset.iteration,delete r.dataset.layoutName}this.appName="",this.session.renderQueue.clear(),this.session.image.clear(),this.session.cache.reset(),this.session.excluded.reset(),this.processing.cache.reset(),this.controllerHandler.reset(),this.resourceHandler.reset(),this._views.length=0,this._includes.length=0,this._renderPosition.clear();for(var a=Array.isArray(s=this.extensions),o=0,s=a?s:s[Symbol.iterator]();;){var l;if(a){if(o>=s.length)break;l=s[o++]}else{if((o=s.next()).done)break;l=o.value}var c=l;c.subscribers.clear(),c.subscribersChild.clear()}this.closed=!1}},{key:"parseDocument",value:function(){var e,t=this;this.parseElements.clear(),this.initialized=!1,this.setStyleMap();for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];""===this.appName&&0===i.length&&i.push(document.body);for(var a=0;a<i.length;a++){var o=i[a],s="string"==typeof o?document.getElementById(o):o;s&&Ve(s)&&this.parseElements.add(s)}var l=this.parseElements.values().next().value,c=function(){t.initialized=!1,t.userSettings.preloadImages&&xe("androme.image.preload");var n=t.session.image.entries(),i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var o=g(a,2);gt.ASSETS.images.set(o[0],o[1])}for(var s=Array.isArray(c=t.extensions),l=0,c=s?c:c[Symbol.iterator]();;){var h;if(s){if(l>=c.length)break;h=c[l++]}else{if((l=c.next()).done)break;h=l.value}h.beforeParseDocument()}for(var u=Array.isArray(f=t.parseElements),d=0,f=u?f:f[Symbol.iterator]();;){var p;if(u){if(d>=f.length)break;p=f[d++]}else{if((d=f.next()).done)break;p=d.value}var v=p;""===t.appName&&(t.appName=v.id||"untitled");var m=J(v.dataset.filename).replace(RegExp(".".concat(t.controllerHandler.localSettings.layout.fileExtension,"$")),"");""===m&&(m=v.id||"document_".concat(t.size));var y=parseInt(v.dataset.iteration||"0")+1;v.dataset.iteration=""+y,v.dataset.layoutName=L(y>1?"".concat(m,"_").concat(y):m),t.createCache(v)&&(t.setBaseLayout(),t.setConstraints(),t.setResources())}for(var b=Array.isArray(k=t.extensions),x=0,k=b?k:k[Symbol.iterator]();;){var A;if(b){if(x>=k.length)break;A=k[x++]}else{if((x=k.next()).done)break;A=x.value}for(var S=A,E=Array.isArray(_=S.subscribers),w=0,_=E?_:_[Symbol.iterator]();;){var T;if(E){if(w>=_.length)break;T=_[w++]}else{if((w=_.next()).done)break;T=w.value}S.postParseDocument(T)}}for(var B=Array.isArray(C=t.extensions),I=0,C=B?C:C[Symbol.iterator]();;){var F;if(B){if(I>=C.length)break;F=C[I++]}else{if((I=C.next()).done)break;F=I.value}F.afterParseDocument()}xe("androme.display.none"),"function"==typeof e&&e.call(t)};if(this.userSettings.preloadImages){Array.from(this.parseElements).forEach(function(e){e.querySelectorAll("svg image").forEach(function(e){if(e.href){var n=Q(e.href.baseVal);n&&t.session.image.set(n,{width:e.width.baseVal.value,height:e.height.baseVal.value,uri:n})}})});var h=this.session.image.values(),u=Array.isArray(h),d=0;for(h=u?h:h[Symbol.iterator]();;){var f;if(u){if(d>=h.length)break;f=h[d++]}else{if((d=h.next()).done)break;f=d.value}var p=f;if(0===p.width&&0===p.height&&p.uri){var v=document.createElement("img");v.src=p.uri,v.complete&&v.naturalWidth>0&&v.naturalHeight>0?(p.width=v.naturalWidth,p.height=v.naturalHeight):(v.className="androme.image.preload",v.style.display="none",l.appendChild(v))}}}for(var m=[],y=Array.isArray(x=this.parseElements),b=0,x=y?x:x[Symbol.iterator]();;){var k;if(y){if(b>=x.length)break;k=x[b++]}else{if((b=x.next()).done)break;k=b.value}Array.from(k.querySelectorAll("IMG")).forEach(function(e){e instanceof SVGImageElement||(e.complete?t.addImagePreload(e):m.push(e))})}return 0===m.length?c():(this.initialized=!0,Promise.all(m.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})})).then(function(e){if(Array.isArray(e))for(var n=Array.isArray(r=e),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a;try{t.addImagePreload(o.target)}catch(e){}}c()}).catch(function(e){var t=e.target?e.target.src:"";le(t)&&!confirm("FAIL: ".concat(t))||c()})),{then:function(n){t.initialized?e=n:n()}}}},{key:"renderNode",value:function(e){return 0===e.itemCount?this.controllerHandler.renderNode(e):(this.saveRenderPosition(e.node,e.renderPosition),this.controllerHandler.renderNodeGroup(e))}},{key:"renderLayout",value:function(e){var t="",n=j(e.renderType,64);return n&&j(e.renderType,8)?t=this.processFloatHorizontal(e):n&&j(e.renderType,16)?t=this.processFloatVertical(e):0!==e.containerType&&(t=this.renderNode(e)),t}},{key:"addLayoutFile",value:function(e,t,n){var i={pathname:n=n||this.controllerHandler.localSettings.layout.pathName,filename:e,content:t};arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&this._views.length&&""===this._views[0].content?this._views[0]=i:this._views.push(i),this.processing.layout=i}},{key:"addIncludeFile",value:function(e,t){this._includes.push({filename:e,content:t,pathname:this.controllerHandler.localSettings.layout.pathName})}},{key:"addRenderTemplate",value:function(e,t,n){var i=this;if(""!==n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&t.renderChildren.some(function(e){var n=i.processing.depthMap.values(),r=Array.isArray(n),a=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(a>=n.length)break;o=n[a++]}else{if((a=n.next()).done)break;o=a.value}var s=o,l=e.renderPositionId,c=s.get(l);if(c){var h=t.renderDepth+1;return e.renderDepth!==h&&(c=ut(c,h),e.renderDepth=h),s.set(l,c),!0}}return!1}),!this.parseElements.has(t.element))if(t.dataset.target){var r=document.getElementById(t.dataset.target);if(r&&r!==e.element)return this.addRenderQueue(t.dataset.target,n),void(t.positioned=!0)}else if(e.dataset.target){if(document.getElementById(e.dataset.target))return this.addRenderQueue(e.controlId,n),void(t.dataset.target=e.controlId)}this.processing.depthMap.has(e.id)||this.processing.depthMap.set(e.id,new Map);var a=this.processing.depthMap.get(e.id);a&&a.set(t.renderPositionId,n)}}},{key:"addRenderQueue",value:function(e,t){var n=this.session.renderQueue.get(e)||[];n.push(t),this.session.renderQueue.set(e,n)}},{key:"addImagePreload",value:function(e){e&&e.complete&&le(e.src)&&this.session.image.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,uri:e.src})}},{key:"saveRenderPosition",value:function(e,t){var n;if(e.groupParent){var i=e.parent;if(i){var r,a=i.id,o=this._renderPosition.get(a);if(o){var s=o.children.filter(function(t){return!e.contains(t)});if(e.siblingIndex<s.length){s.splice(e.siblingIndex,0,e);for(var l=e.siblingIndex+1;l<s.length;l++)s[l].siblingIndex=l;r=s}else e.siblingIndex=s.length,s.push(e);this._renderPosition.set(a,{parent:e.parent,children:s})}else r=i.children;if(r)for(var c=e.siblingIndex+1;c<r.length;c++)r[c]&&(r[c].siblingIndex=c)}}if(t){var h,u=this._renderPosition.get(e.id);if(u)(h=n=u.children.filter(function(t){return!e.contains(t)})).push.apply(h,p(e.children));else n=e.duplicate();this._renderPosition.set(e.id,{parent:e,children:n})}}},{key:"includeExtension",value:function(e){var t=this,n=this.retrieveExtension(e.name);return n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options),!0):!(0!==e.framework&&!j(e.framework,this.framework)||!e.dependencies.every(function(e){return!!t.retrieveExtension(e.name)}))&&(e.application=this,this.extensions.add(e),!0)}},{key:"excludeExtension",value:function(e){return this.extensions.delete(e)}},{key:"retrieveExtension",value:function(e){return Array.from(this.extensions).find(function(t){return t.name===e})||null}},{key:"getExtensionOptionValue",value:function(e,n){var i=this.retrieveExtension(e);if(i&&"object"===t(i.options))return i.options[n]}},{key:"getExtensionOptionValueAsObject",value:function(e,n){var i=this.getExtensionOptionValue(e,n);return"object"===t(i)?i:null}},{key:"getExtensionOptionValueAsString",value:function(e,t){var n=this.getExtensionOptionValue(e,t);return"string"==typeof n?n:""}},{key:"getExtensionOptionValueAsNumber",value:function(e,t){var n=this.getExtensionOptionValue(e,t);return"number"==typeof n?n:0}},{key:"getExtensionOptionValueAsBoolean",value:function(e,t){var n=this.getExtensionOptionValue(e,t);return"boolean"==typeof n&&n}},{key:"toString",value:function(){return this._views.length?this._views[0].content:""}},{key:"createCache",value:function(e){var t=this,n=function(){if(e===document.body){var t=0;return document.querySelectorAll(Array.from(document.body.childNodes).some(function(e){return Ge(e)&&++t>1})?"body, body *":"body *")}return e.querySelectorAll("*")}();this.processing.cache.delegateAppend=void 0,this.processing.cache.clear(),this.processing.excluded.clear(),this.processing.node=null;for(var i=Array.isArray(a=this.extensions),r=0,a=i?a:a[Symbol.iterator]();;){var o;if(i){if(r>=a.length)break;o=a[r++]}else{if((r=a.next()).done)break;o=r.value}o.beforeInit(e)}var s=this.insertNode(e);if(!s)return!1;s.parent=new this.nodeConstructor(0,(e===document.body?document.body:e.parentElement)||document.body,this.controllerHandler.delegateNodeInit),s.parent.setBounds(),s.documentRoot=!0,s.documentParent=s.parent,this.processing.node=s;for(var l=this.controllerHandler.localSettings,c=Array.from(n),h=function(){var n=c[u];if(!t.parseElements.has(n)&&(pt(e,n,Array.from(t.extensions)).some(function(e){return e.init(n)}),!t.parseElements.has(n)&&!(l.unsupported.tagName.has(n.tagName)||n instanceof HTMLInputElement&&l.unsupported.tagName.has("".concat(n.tagName,":").concat(n.type))))){for(var i=!0,r=n.parentElement;r&&r!==e;){if(t.parseElements.has(r)){i=!1;break}r=r.parentElement}i&&t.insertNode(n)}},u=0;u<c.length;u++)h();if(this.processing.cache.length){for(var d=function(){if(f){if(g>=v.length)return"break";m=v[g++]}else{if((g=v.next()).done)return"break";m=g.value}var e=m;if("SELECT"!==e.tagName){var n=[],i=!1;Array.from(e.element.childNodes).forEach(function(e){if("#text"===e.nodeName)n.push(e);else if("BR"!==e.tagName){var t=Xe(e);t&&!t.excluded&&(i=!0)}}),i&&n.forEach(function(n){return t.insertNode(n,e)})}},f=Array.isArray(v=this.processing.cache),g=0,v=f?v:v[Symbol.iterator]();;){var m;if("break"===d())break}for(var y={},b=new Set,x=function(){if(k){if(A>=S.length)return"break";E=S[A++]}else{if((A=S.next()).done)return"break";E=A.value}var e=E;if(e.styleElement){var t=e.element,n={},i=e.css("textAlign");["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===i&&(n.textAlign=e,t.style.textAlign="left",!0)}),e.pageFlow&&["marginTop","marginRight","marginBottom","marginLeft"].forEach(function(i){var r=e.style[i];parseInt(r)<0&&(n[i]=r,t.style[i]="0px")}),e.positionRelative&&!e.positionStatic&&["top","right","bottom","left"].forEach(function(i){e.has(i)&&(n[i]=e.css(i),t.style[i]="auto")}),"rtl"===t.dir&&(t.dir="ltr",b.add(t)),y[e.id]=n}},k=Array.isArray(S=this.processing.cache),A=0,S=k?S:S[Symbol.iterator]();;){var E;if("break"===x())break}for(var w=Array.isArray(T=this.processing.cache),_=0,T=w?T:T[Symbol.iterator]();;){var B;if(w){if(_>=T.length)break;B=T[_++]}else{if((_=T.next()).done)break;B=_.value}B.setBounds()}for(var I=Array.isArray(F=this.processing.excluded),C=0,F=I?F:F[Symbol.iterator]();;){var R;if(I){if(C>=F.length)break;R=F[C++]}else{if((C=F.next()).done)break;R=C.value}R.lineBreak||R.setBounds()}for(var N=Array.isArray(L=this.processing.cache),M=0,L=N?L:L[Symbol.iterator]();;){var D;if(N){if(M>=L.length)break;D=L[M++]}else{if((M=L.next()).done)break;D=M.value}if(D.styleElement){var P=y[D.id];if(P){var O=D.element;for(var V in P)O.style[V]=P[V];b.has(O)&&(O.dir="rtl")}}}for(var H=Array.isArray(W=this.processing.cache),G=0,W=H?W:W[Symbol.iterator]();;){var z;if(H){if(G>=W.length)break;z=W[G++]}else{if((G=W.next()).done)break;z=G.value}var j=z;if(!j.documentRoot){var X=j.actualParent;switch(j.position){case"fixed":if(!j.positionAuto){X=s;break}case"absolute":if(X&&vt(j,X))break;if(this.userSettings.supportNegativeLeftTop){for(var U=j.absoluteParent,Y=void 0,q=!1;X&&(X!==s||0!==X.id);){if(void 0===Y){if(U===X){if(Y=X,"hidden"===X.css("overflow"))break;if(!(j.left<0&&j.outsideX(X.box)||j.top<0&&j.outsideY(X.box)))break;q=!0}}else if(q&&(X.documentRoot||"hidden"===X.css("overflow")||j.withinX(X.box)&&j.withinY(X.box))){Y=X;break}X=X.actualParent}Y&&(X=Y);break}X=j.absoluteParent}j.pageFlow||void 0!==X&&0!==X.id||(X=s),X?(j.parent=X,j.documentParent=X):j.hide()}}for(var $=function(){if(K){if(Z>=Q.length)return"break";J=Q[Z++]}else{if((Z=Q.next()).done)return"break";J=Z.value}var e=J;if(e.htmlElement){var t=0;Array.from(e.element.childNodes).forEach(function(n){var i=Xe(n);!i||i.excluded||!i.pageFlow&&i.documentParent!==e||(i.siblingIndex=t++)});var n=[];e.each(function(t){if(t.siblingIndex===Number.MAX_VALUE)for(var i=function(){if(r){if(a>=o.length)return"break";s=o[a++]}else{if((a=o.next()).done)return"break";s=a.value}var e=s;if(e.actualChildren.includes(t)||t.ascend().some(function(t){return e.cascade().includes(t)})){var i=-1;return i=t.toInt("zIndex")>=0||e!==t.actualParent?e.siblingIndex+1:e.siblingIndex-1,void 0===n[i]&&(n[i]=[]),n[i].push(t),"break"}},r=Array.isArray(o=e.children),a=0,o=r?o:o[Symbol.iterator]();;){var s;if("break"===i())break}});for(var i,r=function(t){var i=n[t];if(i){i.sort(function(e,t){var n=e.toInt("zIndex"),i=t.toInt("zIndex");return n===i?e.id<t.id?-1:1:n<i?-1:1}),e.each(function(e){e.siblingIndex!==Number.MAX_VALUE&&e.siblingIndex>=t&&(e.siblingIndex+=i.length)});for(var r=0;r<i.length;r++)i[r].siblingIndex=t+r}},a=0;a<n.length;a++)r(a);if(e.length)e.sort(Ye.siblingIndex),(i=e.initial.children).push.apply(i,p(e.duplicate()))}},K=Array.isArray(Q=this.processing.cache),Z=0,Q=K?Q:Q[Symbol.iterator]();;){var J;if("break"===$())break}fe(this.processing.cache.children,"depth","id");for(var ee=Array.isArray(ne=this.extensions),te=0,ne=ee?ne:ne[Symbol.iterator]();;){var ie;if(ee){if(te>=ne.length)break;ie=ne[te++]}else{if((te=ne.next()).done)break;ie=te.value}ie.afterInit(e)}return!0}return!1}},{key:"setBaseLayout",value:function(){var e,t,n=this,i=this.userSettings,r=this.controllerHandler.localSettings,a=this.processing.node,o=[],s=new Map,l=Array.from(this.extensions).filter(function(e){return!e.eventOnly}),c=r.baseTemplate,h=!0;function u(e,t,n){var i=s.get(e)||new Map;i.set(t,n),s.set(e,i)}function d(e){var t=s.values(),n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var a=r,o=a.values(),l=Array.isArray(o),c=0;for(o=l?o:o[Symbol.iterator]();;){var h;if(l){if(c>=o.length)break;h=o[c++]}else{if((c=o.next()).done)break;h=c.value}if(h.id===e)return void a.delete(h.id)}}}u(-1,0,a.parent);for(var f=0,v=Array.isArray(y=this.processing.cache.visible),m=0,y=v?y:y[Symbol.iterator]();;){var x;if(v){if(m>=y.length)break;x=y[m++]}else{if((m=y.next()).done)break;x=m.value}var k=x,A=Math.floor(k.linear.left);void 0===o[k.depth]&&(o[k.depth]={}),void 0===o[k.depth][A]&&(o[k.depth][A]=[]),o[k.depth][A].push(k),u(k.depth,k.id,k),f=Math.max(k.depth,f)}for(var S=0;S<f;S++)s.set(-1*S-2,new Map);this.processing.cache.delegateAppend=function(e){d(e.id),u(-1*e.initial.depth-2,e.id,e),e.cascade().forEach(function(e){d(e.id),u(-1*e.initial.depth-2,e.id,e)})};var E=s.values(),w=Array.isArray(E),_=0;for(E=w?E:E[Symbol.iterator]();;){var T;if(w){if(_>=E.length)break;T=E[_++]}else{if((_=E.next()).done)break;T=_.value}var B=T;this.processing.depthMap.clear();var I=function(){if(F){if(R>=C.length)return"break";N=C[R++]}else{if((R=C.next()).done)return"break";N=R.value}var e=N;if(0===e.length||e.every(function(e){return e.rendered}))return"continue";for(var t=e.duplicate(),r=t.some(function(e){return e.floating}),c=r?Ye.clearedAll(e):new Map,h=l.filter(function(e){return e.subscribersChild.size}),u=-1,d=function(){var e=t[u];if(e.rendered||!e.visible||!e.documentRoot&&e.baseElement&&n.parseElements.has(e.baseElement))return"continue";var d=e.parent,f=d.hasAlign(2),g=e.hasAlign(8192);if(e.pageFlow&&t.length>1&&u<t.length-1&&!d.hasAlign(4)&&(0===d.alignmentType||f||g)&&!e.hasBit("excludeSection",b.DOM_TRAVERSE)){var v,m,y=function(e){return!A.length&&!E&&(k.push(e),!0)},x=function(e){if(d.layoutVertical&&A.length){var t=A[A.length-1];if(t.layoutVertical)return e.parent=t,!0}return A.push(e),!0},k=[],A=[],S=new Set,E=!1,w=u,_=0;g&&d.layoutVertical&&(k.push(e),w++,_++);e:for(;w<t.length;w++,_++){var T=t[w];if(T.pageFlow){if(r){var B=c.get(T);B&&("both"===B?S.clear():S.delete(B)),T.floating&&S.add(T.float)}var I=T.previousSiblings(),C=I[I.length-1],F=T.nextSiblings().shift();if(0===_&&F)T.blockStatic||F.alignedVertically([T],[T],c)?A.push(T):k.push(T);else{if(!C)break e;if(r){var R=T.alignedVertically(I,void 0,c);if(R||c.has(T)||i.floatOverlapDisabled&&C.floating&&T.blockStatic&&2===S.size){if(k.length){if(!i.floatOverlapDisabled&&S.size>0&&!I.some(function(e){return e.lineBreak&&!c.has(e)})&&!k.concat([T]).some(function(e){return"both"===c.get(e)})&&T.bounds.top<oe(k.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))){var N=Ye.floated(k);if(c.has(T)){if(S.size<2&&2===N.size&&!T.floating){T.alignmentType|=8192,E=!0,k.push(T);continue}break e}if(!R||1===N.size&&(!T.floating||S.has(T.float))){k.push(T);continue}}break e}x(T)}else if(!y(T))break e}else if(T.alignedVertically(I))x(T);else if(!y(T))break e}}}if(k.length>1){var M=new qe(d,e,0,0,k.length,k);M.init(),v=n.controllerHandler.processTraverseHorizontal(M,t),m=k[k.length-1]}else if(A.length>1){var L=new qe(d,e,0,0,A.length,A);L.init(),v=n.controllerHandler.processTraverseVertical(L,t),(m=A[A.length-1]).blockStatic||m===t[t.length-1]||(m.alignmentType|=8192)}if(f&&m===t[t.length-1]&&(d.alignmentType^=2,f=!1),v){var D=v.layout,P=n.renderLayout(D);""!==P&&(n.addRenderTemplate(d,D.node,P,!0),d=e.parent)}}if(f&&u===t.length-1&&(d.alignmentType^=2),g&&(e.alignmentType^=8192),e.renderAs&&d.appendTry(e,e.renderAs,!1)&&(e.hide(),(e=e.renderAs).positioned&&(d=e.parent)),!e.rendered&&!e.hasBit("excludeSection",b.EXTENSION)){var O=!1;if(d.renderExtension.size||h.length)for(var V=p(d.renderExtension).concat(p(h.filter(function(t){return t.subscribersChild.has(e)}))),H=0;H<V.length;H++){var G=V[H].processChild(e,d);if(""!==G.output&&n.addRenderTemplate(d,e,G.output),G.renderAs&&G.outputAs&&n.addRenderTemplate(d,G.renderAs,G.outputAs),G.parent&&(d=G.parent),O=!0===G.next,G.complete||G.next)break}if(O)return"continue";if(e.styleElement&&(pt(a.element,e.element,l).some(function(t){if(t.is(e)&&t.condition(e,d)){var i=t.processNode(e,d,o,s);if(""!==i.output&&n.addRenderTemplate(d,e,i.output),i.renderAs&&i.outputAs&&n.addRenderTemplate(d,i.renderAs,i.outputAs),i.parent&&(d=i.parent),""===i.output&&!0!==i.include||(t.subscribers.add(e),e.renderExtension.add(t)),O=!0===i.next,i.complete||i.next)return!0}return!1}),O))return"continue"}if(!e.rendered&&!e.hasBit("excludeSection",b.RENDER)){var W=new qe(d,e,e.containerType,e.alignmentType,e.length,e.children);if(0===W.containerType){var z;if(!0===(z=e.length?n.controllerHandler.processUnknownParent(W):n.controllerHandler.processUnknownChild(W)).next)return"continue";if(z.renderAs)return t[u]=z.renderAs,u--,"continue";W=z.layout}var j=n.renderLayout(W);""!==j&&n.addRenderTemplate(d,e,j)}};++u<t.length;)d()};var C=B.values(),F=Array.isArray(C),R=0;e:for(C=F?C:C[Symbol.iterator]();;){var N;switch(I()){case"break":break e;case"continue":continue}}var M=function(){if(D){if(P>=L.length)return"break";O=L[P++]}else{if((P=L.next()).done)return"break";O=P.value}var e=g(O,2),t=e[0],i=e[1],r=n._renderPosition.get(t),a=void 0;if(r)a=n.controllerHandler.sortRenderPosition(r.parent,r.children);else{var o=n.processing.cache.find("id",t);a=o?n.controllerHandler.sortRenderPosition(o,o.children):[]}if(a.length){var s=new Map;a.forEach(function(e){var t=e.id+(-1!==e.renderPosition?":".concat(e.renderPosition):""),n=i.get(t)||(e.companion?i.get(""+e.companion.id):null);n&&s.set(t,n)}),s.size===i.size&&(a.forEach(function(e,t){return e.renderIndex=t}),n.processing.depthMap.set(t,s))}},L=this.processing.depthMap.entries(),D=Array.isArray(L),P=0;for(L=D?L:L[Symbol.iterator]();;){var O;if("break"===M())break}for(var V=Array.isArray(G=this.extensions),H=0,G=V?G:G[Symbol.iterator]();;){var W;if(V){if(H>=G.length)break;W=G[H++]}else{if((H=G.next()).done)break;W=H.value}W.afterDepthLevel()}var z=this.processing.depthMap.entries(),j=Array.isArray(z),X=0;for(z=j?z:z[Symbol.iterator]();;){var U;if(j){if(X>=z.length)break;U=z[X++]}else{if((X=z.next()).done)break;U=X.value}var Y=g(U,2),q=Y[0],$=Y[1].entries(),K=Array.isArray($),Z=0;for($=K?$:$[Symbol.iterator]();;){var Q;if(K){if(Z>=$.length)break;Q=$[Z++]}else{if((Z=$.next()).done)break;Q=Z.value}var te=g(Q,2),ne=te[0],ie=te[1],re=ct(-1!==ne.indexOf("^")?ne:q);-1!==c.indexOf(re)?(c=ht(c,re,ie),h=!1):this.addRenderQueue(-1!==ne.indexOf("^")?"".concat(q,"|").concat(ne):""+q,ie)}}}!a.dataset.layoutName||le(a.dataset.target)&&0!==a.renderExtension.size||this.addLayoutFile(a.dataset.layoutName,h?"":c,ee(J(a.dataset.pathname),"/"),a.renderExtension.size>0&&Array.from(a.renderExtension).some(function(e){return e.documentRoot})),h&&0===a.renderExtension.size&&a.hide(),this.processing.cache.sort(function(e,t){return e.visible?e.renderDepth!==t.renderDepth?e.renderDepth<t.renderDepth?-1:1:e.documentParent!==t.documentParent?e.documentParent.id>=t.documentParent.id?1:-1:e.renderIndex>=t.renderIndex?1:-1:1}),(e=this.session.cache.children).push.apply(e,p(this.processing.cache.duplicate())),(t=this.session.excluded.children).push.apply(t,p(this.processing.excluded));for(var ae=Array.isArray(ce=this.extensions),se=0,ce=ae?ce:ce[Symbol.iterator]();;){var he;if(ae){if(se>=ce.length)break;he=ce[se++]}else{if((se=ce.next()).done)break;he=se.value}for(var ue=he,de=Array.isArray(ge=ue.subscribers),fe=0,ge=de?ge:ge[Symbol.iterator]();;){var pe;if(de){if(fe>=ge.length)break;pe=ge[fe++]}else{if((fe=ge.next()).done)break;pe=fe.value}ue.postBaseLayout(pe)}}for(var ve=Array.isArray(ye=this.extensions),me=0,ye=ve?ye:ye[Symbol.iterator]();;){var be;if(ve){if(me>=ye.length)break;be=ye[me++]}else{if((me=ye.next()).done)break;be=me.value}be.afterBaseLayout()}}},{key:"setConstraints",value:function(){this.controllerHandler.setConstraints();for(var e=Array.isArray(n=this.extensions),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}for(var r=i,a=Array.isArray(s=r.subscribers),o=0,s=a?s:s[Symbol.iterator]();;){var l;if(a){if(o>=s.length)break;l=s[o++]}else{if((o=s.next()).done)break;l=o.value}r.postConstraints(l)}}for(var c=Array.isArray(u=this.extensions),h=0,u=c?u:u[Symbol.iterator]();;){var d;if(c){if(h>=u.length)break;d=u[h++]}else{if((h=u.next()).done)break;d=h.value}d.afterConstraints()}}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString();for(var e=Array.isArray(n=this.extensions),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}i.afterResources()}}},{key:"processRenderQueue",value:function(){var e={},t=this.session.renderQueue.entries(),n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if((i=t.next()).done)break;r=i.value}var a=g(r,2),o=a[1],s=g((B=a[0]).split("|"),2),l=s[0],c=s[1],h=l;if(!X(h)){var u=document.getElementById(h);if(u){var d=Xe(u);d&&(h=""+d.id)}}var f=o.join("\n");if(h!==l){var p=this.session.cache.find("id",parseInt(h));if(p){var v=p.renderDepth+1;f=ut(f,v);for(var m=/{@(\d+)}/g,y=void 0,b=0;null!==(y=m.exec(f));){var x=this.session.cache.find("id",parseInt(y[1]));x&&(x.renderDepth=0==b++?v:x.parent?x.parent.renderDepth+1:v)}}}e[c||h]=f}for(var k in e)for(var A in e)k!==A&&(e[k]=e[k].replace(ct(A),e[A]),e[A]=e[A].replace(ct(k),e[k]));for(var S=Array.isArray(w=this.viewData),E=0,w=S?w:w[Symbol.iterator]();;){var _;if(S){if(E>=w.length)break;_=w[E++]}else{if((E=w.next()).done)break;_=E.value}var T=_;for(var B in e)T.content=T.content.replace(ct(B),e[B]);T.content=this.controllerHandler.replaceRenderQueue(T.content)}}},{key:"processFloatHorizontal",value:function(e){var t=this,n=this.userSettings,i=[],r="";if(0===e.cleared.size&&!e.some(function(e){return e.autoMargin.horizontal})){for(var a=[],o=[],s=[],l=Array.isArray(h=e),c=0,h=l?h:h[Symbol.iterator]();;){var u;if(l){if(c>=h.length)break;u=h[c++]}else{if((c=h.next()).done)break;u=c.value}var d=u;"right"===d.float?s.push(d):"left"===d.float?o.push(d):a.push(d)}var f=new qe(e.parent,e.node,0,0,e.itemCount,e.children);if(f.init(),a.length===f.itemCount||o.length===f.itemCount||s.length===f.itemCount)return this.controllerHandler.processLayoutHorizontal(f),this.renderNode(f);if(0===o.length||0===s.length){var g=[];if(0===s.length){g.push.apply(g,o.concat(a));var v=this.controllerHandler.containerTypeHorizontal;f.setType(v.containerType,v.alignmentType),i=[o,a]}else{g.push.apply(g,a.concat(s));var m=this.controllerHandler.containerTypeVerticalMargin;f.setType(m.containerType,m.alignmentType),i=[a,s]}f.retain(g),r=this.renderNode(f)}}var y=[],b=[],x=[],k=[],A=[],S=[],E=[],w=[];if(0===i.length){for(var _="",T=0,B=0;B<e.length;B++){var I=e.item(B);if(e.cleared.has(I)){var C=e.cleared.get(I);if(j(T,"right"===C?4:2)||0!==T&&"both"===C)switch(C){case"left":T^=2,_="left";break;case"right":T^=4,_="right";break;case"both":switch(T){case 2:_="left";break;case 4:_="right";break;default:_="both"}T=0}}if(""===_)"right"===I.float?(k.push(I),I.floating&&(T|=4)):"left"===I.float?(x.push(I),I.floating&&(T|=2)):I.autoMargin.horizontal?I.autoMargin.left?k.length?S.push(I):k.push(I):I.autoMargin.right?x.length?A.push(I):x.push(I):y.length?0===x.length?x.push(I):k.push(I):y.push(I):y.push(I);else if("right"===I.float)0===S.length&&(T|=4),!n.floatOverlapDisabled&&"right"!==_&&k.length?k.push(I):S.push(I);else if("left"===I.float)0===A.length&&(T|=2),!n.floatOverlapDisabled&&"left"!==_&&x.length?x.push(I):A.push(I);else if(I.autoMargin.horizontal)I.autoMargin.left&&S.length?S.push(I):I.autoMargin.right&&A.length?A.push(I):b.push(I);else switch(_){case"left":A.push(I);break;case"right":S.push(I);break;default:b.push(I)}}x.length&&A.length?E=[x,A]:x.length?E=x:A.length&&(E=A),k.length&&S.length?w=[k,S]:k.length?w=k:S.length&&(w=S);var F=new qe(e.parent,e.node,0,k.length+S.length===e.length?512:0);if(n.floatOverlapDisabled){if(e.node.groupParent&&e.parent.layoutVertical)e.node.alignmentType|=F.alignmentType,r=ct(e.node.id),e.node.render(e.parent),e.node.renderDepth--;else{var R=this.controllerHandler.containerTypeVertical;F.setType(R.containerType,R.alignmentType),r=this.renderNode(F)}i.push(y,[x,k],[A,S],b),F.itemCount=i.length}else{var N;y.length?S.length?i.push(E=[y,x],w):A.length?i.push(w=[y,k],E):i.push(y,E,w):E===A&&w===k||E===x&&w===S?i.push(0===A.length?[x,S]:[k,A]):i.push(E,w),i=i.filter(function(e){return e.length>0}),F.itemCount=i.length,F.setType((N=0!==y.length||0!==E.length&&0!==w.length?this.controllerHandler.containerTypeVerticalMargin:this.controllerHandler.containerTypeVertical).containerType,N.alignmentType),r=this.renderNode(F)}}if(i.length){var M,L=[y,x,A,k,S];i.forEach(function(i,a){if(Array.isArray(i[0])){var o=[];i.forEach(function(e){return o.push.apply(o,p(e))}),o.sort(Ye.siblingIndex),M=t.controllerHandler.createNodeGroup(o[0],o,e.node);var s,l=new qe(e.node,M,0,i.some(function(e){return e===w||e===k})?512:0,i.length);n.floatOverlapDisabled?s=t.controllerHandler.containerTypeVerticalMargin:e.node.layoutVertical?M=e.node:s=t.controllerHandler.containerTypeVertical,s&&(l.setType(s.containerType,s.alignmentType),r=ht(r,e.node.id,t.renderNode(l)))}else M=null;(Array.isArray(i[0])?i:[i]).forEach(function(n){var i=e.node;if(M&&L.includes(n)&&(i=M),n.length>1){var o=t.controllerHandler.createNodeGroup(n[0],n,i),s=new qe(i,o,0,128,n.length,n);if(s.linearY){var l=t.controllerHandler.containerTypeVertical;s.setType(l.containerType,l.alignmentType)}else s.init(),t.controllerHandler.processLayoutHorizontal(s);r=ht(r,i.id,t.renderNode(s))}else if(n.length){var c=n[0];c.alignmentType|=2048,c.renderPosition=a,r=ht(r,i.id,ct(c.renderPositionId))}})})}return r}},{key:"processFloatVertical",value:function(e){var t,n=this,i=this.controllerHandler,r=i.containerTypeVertical,a="";if(e.parent.of(r.containerType,r.alignmentType))a=ct((t=e.parent).id);else{t=e.node;var o=new qe(e.parent,e.node,r.containerType,r.alignmentType,e.length);a=this.renderNode(o)}for(var s=[],l=[],c=[],h=[],u=!1,d=!1,f=!0,g=Array.isArray(v=e),p=0,v=g?v:v[Symbol.iterator]();;){var m;if(g){if(p>=v.length)break;m=v[p++]}else{if((p=v.next()).done)break;m=p.value}var y=m;y.blockStatic&&0===h.length?(c.push(y),d=!0):(e.cleared.has(y)&&(y.floating?u=!0:(y.modifyBox(2,null),s.push(c.slice()),c.length=0,l.push(h.slice()),h.length=0)),y.floating?(d&&(s.push(c.slice()),l.push(null),c.length=0,h.length=0,d=!1),h.push(y)):(u&&!e.cleared.has(y)&&(f=!1),c.push(y)))}return h.length&&l.push(h),c.length&&s.push(c),f||function(){for(var o="",c=0;c<Math.max(l.length,s.length);c++){var h=s[c]||[];if(null===l[c]&&h.length)if(h.length>1){var u=i.containerTypeVertical;u.alignmentType|=128;var d=new qe(t,i.createNodeGroup(h[0],h,t),u.containerType,u.alignmentType,h.length,h);o+=n.renderNode(d)}else{var f=h[0];f.alignmentType|=2048,f.renderPosition=c,a=ht(a,t.id,ct(f.renderPositionId))}else{var g=l[c]||[];(h.length||g.length)&&function(){var a=i.createNodeGroup(g[0]||h[0],[],t),s=i.containerTypeVerticalMargin,l=new qe(t,a,s.containerType,s.alignmentType),c=[],u=void 0;g.length&&(g.length>1?(u=i.createNodeGroup(g[0],g,a),l.add(64),g.every(function(e){return"right"===e.float})&&l.add(512)):(u=g[0]).parent=a),u&&(c.push(u),u=void 0),h.length&&(h.length>1?u=i.createNodeGroup(h[0],h,a):(u=h[0]).parent=a),u&&c.push(u),a.init(),l.itemCount=c.length,o+=n.renderNode(l),c.forEach(function(t,i){if(e.contains(t)||0===t.length)o=ht(o,a.id,ct(t.id));else{var s=new qe(a,t,r.containerType,128|r.alignmentType,t.length,t.children);o=ht(o,a.id,n.renderNode(s))}})}()}}a=ht(a,t.id,o)}(),a}},{key:"insertNode",value:function(e,t){var n=null;if(Ve(e)){var i=new this.nodeConstructor(this.nextId,e,this.controllerHandler.delegateNodeInit);!this.controllerHandler.localSettings.unsupported.excluded.has(e.tagName)&&Ge(e)?(n=i).setExclusions():(i.visible=!1,i.excluded=!0,this.processing.excluded.append(i))}else"#"===e.nodeName.charAt(0)&&"#text"===e.nodeName&&(Me(e,!0)||Be(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeConstructor(this.nextId,e,this.controllerHandler.delegateNodeInit),t?n.inherit(t,"style"):n.css("whiteSpace",Ee(e.parentElement).whiteSpace||"normal"),n.css({position:"static",display:"inline",verticalAlign:"baseline",cssFloat:"none",clear:"none"}));return n&&this.processing.cache.append(n),n}},{key:"setStyleMap",value:function(){for(var e=this,t=this.userSettings.resolutionDPI,n=me(16),i=!1,r=0;r<document.styleSheets.length;r++){var a=document.styleSheets[r];if(a.cssRules)for(var o=0;o<a.cssRules.length;o++)try{a.cssRules[o]instanceof CSSStyleRule&&function(){var i=a.cssRules[o],r=new Set;Array.from(i.style).forEach(function(e){return r.add(M(e))}),Array.from(document.querySelectorAll(i.selectorText)).forEach(function(a){var o=new Set(r);Array.from(a.style).forEach(function(e){return o.add(M(e))});for(var s=Ee(a),l=parseInt(O(s.fontSize||"16px",t,0)),c={},h=Array.isArray(d=o),u=0,d=h?d:d[Symbol.iterator]();;){var f;if(h){if(u>=d.length)break;f=d[u++]}else{if((u=d.next()).done)break;f=u.value}var g=f;if(a.style[g])c[g]=a.style[g];else{var p=i.style[g];if("initial"!==p)if(s[g]===p)c[g]=s[g];else switch(g){case"backgroundColor":case"borderTopColor":case"borderRightColor":case"borderBottomColor":case"borderLeftColor":case"color":case"fontSize":case"fontWeight":c[g]=s[g]||p;break;case"width":case"height":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":case"lineHeight":case"verticalAlign":case"textIndent":case"columnGap":case"top":case"right":case"bottom":case"left":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":c[g]=/^[A-Za-z\-]+$/.test(p)||$(p)?p:O(p,t,l);break;default:void 0===c[g]&&(c[g]=p)}}}if(e.userSettings.preloadImages&&le(c.backgroundImage)&&"initial"!==c.backgroundImage&&c.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(t){var n=_e(t);""===n||e.session.image.has(n)||e.session.image.set(n,{width:0,height:0,uri:n})}),n&&void 0===c.display)switch(a.tagName){case"INPUT":case"TEXTAREA":case"SELECT":case"BUTTON":c.display="inline-block"}var v=ze(a,"styleMap");v?Object.assign(v,c):(We(a,"style",s),We(a,"styleMap",c))})}()}catch(e){i||(alert("External CSS files cannot be parsed with Chrome 64+ when loading HTML pages directly from your hard drive [file://]. Either use a local web server [http://], embed your CSS into a &lt;style&gt; element, or use a different browser. See the README for more detailed instructions.\n\n"+"".concat(a.href,"\n\n").concat(e)),i=!0)}}}},{key:"appName",set:function(e){this.resourceHandler.fileHandler&&(this.resourceHandler.fileHandler.appName=e)},get:function(){return this.resourceHandler.fileHandler?this.resourceHandler.fileHandler.appName:""}},{key:"userSettings",set:function(e){this._userSettings=e},get:function(){return this._userSettings||{}}},{key:"viewData",get:function(){return p(this._views).concat(p(this._includes))}},{key:"sessionData",get:function(){return{cache:this.session.cache,views:this._views,includes:this._includes}}},{key:"nextId",get:function(){return this.processing.cache.nextId}},{key:"size",get:function(){return this._views.length+this._includes.length}}]),e}(),yt=function(){function e(t,n){r(this,e),this.application=t,this.cache=n,this._before={},this._after={}}return o(e,[{key:"reset",value:function(){this._before={},this._after={}}},{key:"replaceRenderQueue",value:function(e){for(var t in this._before)e=e.replace("{<".concat(t,"}"),this._before[t].join(""));for(var n in this._after)e=e.replace("{>".concat(n,"}"),this._after[n].join(""));return e}},{key:"prependBefore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;void 0===this._before[e]&&(this._before[e]=[]),-1!==n&&n<this._before[e].length?this._before[e].splice(n,0,t):this._before[e].push(t)}},{key:"appendAfter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;void 0===this._after[e]&&(this._after[e]=[]),-1!==n&&n<this._after[e].length?this._after[e].splice(n,0,t):this._after[e].push(t)}},{key:"hasAppendProcessing",value:function(e){return void 0!==this._before[e]||void 0!==this._after[e]}}]),e}(),bt=function(){function e(t,n,i,a){r(this,e),this.name=t,this.framework=n,this.tagNames=[],this.documentRoot=!1,this.eventOnly=!1,this.preloaded=!1,this.options={},this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(i)&&(this.tagNames=i.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return o(e,[{key:"is",value:function(e){return!!e.styleElement&&(0===this.tagNames.length||this.tagNames.includes(e.element.tagName))}},{key:"require",value:function(e){this.dependencies.push({name:e,preload:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}},{key:"included",value:function(e){return K(e.dataset.include,this.name)}},{key:"beforeInit",value:function(e){var t=this;!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.included(e)&&this.dependencies.filter(function(e){return e.preload}).forEach(function(n){var i=t.application.retrieveExtension(n.name);i&&!i.preloaded&&(i.beforeInit(e,!0),i.preloaded=!0)})}},{key:"init",value:function(e){return!1}},{key:"afterInit",value:function(e){var t=this;!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.included(e)&&this.dependencies.filter(function(e){return e.preload}).forEach(function(n){var i=t.application.retrieveExtension(n.name);i&&i.preloaded&&(i.afterInit(e,!0),i.preloaded=!1)})}},{key:"condition",value:function(e,t){return!!Ve(e.element)&&(e.dataset.include?this.included(e.element):this.tagNames.length>0)}},{key:"processNode",value:function(e,t,n,i){return{output:"",complete:!1}}},{key:"processChild",value:function(e,t,n,i){return{output:"",complete:!1}}},{key:"postBaseLayout",value:function(e){}},{key:"postConstraints",value:function(e){}},{key:"postParseDocument",value:function(e){}},{key:"postProcedure",value:function(e){}},{key:"beforeParseDocument",value:function(){}},{key:"afterDepthLevel",value:function(){}},{key:"afterBaseLayout",value:function(){}},{key:"afterConstraints",value:function(){}},{key:"afterResources",value:function(){}},{key:"afterParseDocument",value:function(){}},{key:"afterProcedure",value:function(){}},{key:"afterFinalize",value:function(){}},{key:"application",set:function(e){this._application=e},get:function(){return this._application||{}}},{key:"installed",get:function(){return this.application instanceof mt&&this.application.extensions.has(this)}}],[{key:"findNestedByName",value:function(e,t){return Ve(e)&&Array.from(e.children).find(function(e){return K(e.dataset.include,t)})||null}}]),e}(),xt=function(){function e(t){r(this,e),this.resource=t,this.appName="",this.assets=[],t.fileHandler=this}return o(e,[{key:"addAsset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!==n||""!==i){var r=this.assets.findIndex(function(n){return n.pathname===e&&n.filename===t});-1!==r?(this.assets[r].content=n||"",this.assets[r].uri=i||""):this.assets.push({pathname:e,filename:t,content:n,uri:i})}}},{key:"reset",value:function(){this.assets.length=0}},{key:"saveToDisk",value:function(t){var n=this.userSettings;location.protocol.startsWith("http")?t.length&&(t.push.apply(t,p(this.assets)),fetch("/api/savetodisk"+"?directory=".concat(encodeURIComponent(ee(n.outputDirectory,"/")))+"&appname=".concat(encodeURIComponent(this.appName.trim()))+"&filetype=".concat(n.outputArchiveFileType.toLowerCase())+"&processingtime=".concat((""+n.outputMaxProcessingTime).trim()),{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(t){t&&(t.zipname?fetch("/api/downloadtobrowser?filename=".concat(encodeURIComponent(t.zipname))).then(function(e){return e.blob()}).then(function(n){return e.downloadToDisk(n,re(t.zipname))}):t.system&&alert("".concat(t.application,"\n\n").concat(t.system)))}).catch(function(e){return alert("ERROR: ".concat(e))})):alert("SERVER (required): See README for instructions")}},{key:"stored",get:function(){return this.resource.stored}}],[{key:"downloadToDisk",value:function(e,t){var n=new Blob([e],{type:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")||"application/octet-stream"});if(void 0===window.navigator.msSaveBlob){var i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.setAttribute("download",t),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){return window.URL.revokeObjectURL(i)},1)}else window.navigator.msSaveBlob(n,t)}}]),e}(),kt=function(e){function n(e,t){var i;return r(this,n),(i=u(this,c(n).call(this))).id=e,i.alignmentType=0,i.depth=-1,i.siblingIndex=Number.MAX_VALUE,i.renderIndex=Number.MAX_VALUE,i.renderPosition=-1,i.documentRoot=!1,i.baselineActive=!1,i.positioned=!1,i.visible=!0,i.excluded=!1,i.rendered=!1,i.renderExtension=new Set,i.controlId="",i._cached={},i._styleMap={},i._initialized=!1,i._renderDepth=-1,i._data={},i._excludeSection=0,i._excludeProcedure=0,i._excludeResource=0,i._element=null,i.initial={depth:-1,children:[],styleMap:{},bounds:be()},t&&(i._element=t,i.init()),i.style=Ve(t)?ze(t,"style")||getComputedStyle(t):{},i}return l(n,ve),o(n,[{key:"init",value:function(){if(!this._initialized){if(this.styleElement){var e=this._element,t=ze(e,"styleMap")||{};Array.from(e.style).forEach(function(n){return t[M(n)]=e.style[n]}),this._styleMap=Object.assign({},t),Object.assign(this.initial.styleMap,t)}0!==this.id&&this._element&&We(this._element,"node",this),this._initialized=!0}}},{key:"is",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some(function(t){return e.containerType===t})}},{key:"of",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.containerType===e&&i.some(function(e){return t.hasAlign(e)})}},{key:"unsafe",value:function(e){return this["_".concat(e)]||void 0}},{key:"attr",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="__".concat(e);if(le(n)){if(void 0===this[r]&&(this._namespaces.add(e),this[r]={}),!i&&void 0!==this[r][t])return"";this[r][t]=""+n}return this[r][t]||""}},{key:"namespace",value:function(e){return this["__".concat(e)]||{}}},{key:"delete",value:function(e){var t="__".concat(e);if(this[t]){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.indexOf("*")){var s=se(this[t],o),l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){var h;if(l){if(c>=s.length)break;h=s[c++]}else{if((c=s.next()).done)break;h=c.value}var u=g(h,1);delete this[t][u[0]]}}else delete this[t][o]}}}},{key:"apply",value:function(e){if("object"===t(e))for(var n in e){var i=e[n];if("object"===t(i)){for(var r in i)this.attr(n,r,i[r]);delete e[n]}}}},{key:"each",value:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.renderChildren.filter(function(e){return e.visible}):this.children).forEach(e),this}},{key:"render",value:function(e){this.renderParent=e,this.renderDepth=this.documentRoot||this===e||le(e.dataset.target)?0:e.renderDepth+1,this.rendered=!0}},{key:"hide",value:function(){this.rendered=!0,this.visible=!1}},{key:"data",value:function(e,n,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return le(i)&&(void 0===this._data[e]&&(this._data[e]={}),"object"===t(this._data[e])&&(r||void 0===this._data[e][n])&&(this._data[e][n]=i)),void 0===this._data[e]||void 0===this._data[e][n]?void 0:this._data[e][n]}},{key:"unsetCache",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length)for(var i=0;i<t.length;i++){var r=t[i];switch(r){case"width":this._cached.hasWidth=void 0;break;case"height":this._cached.hasHeight=void 0;break;case"verticalAlign":this._cached.baseline=void 0;break;default:r.startsWith("margin")&&(this._cached.autoMargin=void 0)}this._cached[r]=void 0}else this._cached={}}},{key:"ascend",value:function(){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=[],n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.renderParent?"renderParent":"parent":"actualParent",i=this[n],r=-1;i&&0!==i.id&&!t.includes(i)&&(t.push(i),++r!==e);)i=i[n];return t}},{key:"cascade",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];function t(n){for(var i=[],r=Array.isArray(o=n.children),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}var l=s;e&&!l.baseElement||i.push(l),l.length&&i.push.apply(i,p(t(l)))}return i}return t(this)}},{key:"inherit",value:function(e){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];for(var o=0;o<r.length;o++){switch(r[o]){case"initial":Object.assign(this.initial,e.initial);break;case"base":this.style=e.style,this.documentParent=e.documentParent,""===this.tagName&&(this.tagName=e.tagName);case"dimensions":this._bounds=Se(e.bounds),this._linear=Se(e.linear),this._box=Se(e.box);break;case"alignment":["position","top","right","bottom","left","display","verticalAlign","cssFloat","clear","zIndex"].forEach(function(t){n._styleMap[t]=e.css(t),n.initial.styleMap[t]=e.initial.styleMap[t]}),["marginTop","marginRight","marginBottom","marginLeft"].forEach(function(t){"auto"===e.cssInitial(t)&&(n._styleMap[t]="auto",n.initial.styleMap[t]="auto")});break;case"style":var s={whiteSpace:e.css("whiteSpace")};for(var l in e.style)if(l.startsWith("font")||l.startsWith("color")){var c=M(l);s[c]=e.style[c]}this.css(s);break;case"styleMap":he(this._styleMap,e.unsafe("styleMap"));break;case"data":for(var h in this._data)for(var u in this._data[h]){var d=this._data[h][u];if("object"===t(d)&&!0===d.inherit){var f=e.data(h,u);if(f)for(var g in d)switch(t(d[g])){case"number":f[g]+=d[g];break;case"boolean":!0===d[g]&&(f[g]=!0);break;default:f[g]=d[g]}else e.data(h,u,d);delete this._data[h][u]}}}}}},{key:"alignedVertically",value:function(e,t,n){var i=this;if(this.lineBreak)return!0;if(this.pageFlow&&e.length){var r=this.actualParent;if(Y(t)&&this!==t[0]){if(n&&n.has(this))return!0;if(this.floating&&(this.linear.top>=t[t.length-1].linear.bottom||"left"===this.float&&t.filter(function(e){return e.siblingIndex<i.siblingIndex&&ce(i.linear.left,e.linear.left)}).length>0||"right"===this.float&&t.filter(function(e){return e.siblingIndex<i.siblingIndex&&ce(i.linear.right,e.linear.right)}).length>0))return!0}for(var a=Array.isArray(s=e),o=0,s=a?s:s[Symbol.iterator]();;){var l;if(a){if(o>=s.length)break;l=s[o++]}else{if((o=s.next()).done)break;l=o.value}var c=l;if(c.blockStatic||this.blockStatic&&(!c.inlineFlow||n&&n.has(c))||!c.floating&&(this.blockStatic||!this.inlineFlow&&!this.floating)||r&&c.bounds.width>(r.has("width",2)?r.width:r.box.width)&&(!c.textElement||c.textElement&&"nowrap"===c.css("whiteSpace"))||c.lineBreak||"left"===c.float&&this.autoMargin.right||"right"===c.float&&this.autoMargin.left)return!0}}return!1}},{key:"intersectX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return e.top>=t.top&&e.top<t.bottom||e.bottom>t.top&&e.bottom<=t.bottom||t.top>=e.top&&t.bottom<=e.bottom||e.top>=t.top&&e.bottom<=t.bottom}},{key:"intersectY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return e.left>=t.left&&e.left<t.right||e.right>t.left&&e.right<=t.right||t.left>=e.left&&t.right<=e.right||e.left>=t.left&&e.right<=t.right}},{key:"withinX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return Math.ceil(t.top)>=Math.floor(e.top)&&Math.floor(t.bottom)<=Math.ceil(e.bottom)}},{key:"withinY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return Math.ceil(t.left)>=Math.floor(e.left)&&Math.floor(t.right)<=Math.ceil(e.right)}},{key:"outsideX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return Math.ceil(t.left)<Math.floor(e.left)||Math.floor(t.left)>=Math.ceil(e.right)}},{key:"outsideY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"];return Math.ceil(t.top)<Math.floor(e.top)||Math.floor(t.top)>=Math.ceil(e.bottom)}},{key:"css",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"===t(e)){if(Object.assign(this._styleMap,e),i)for(var r in e)this.unsetCache(r);return""}return arguments.length>=2&&(this._styleMap[e]=le(n)?n:"",i&&this.unsetCache(e)),this._styleMap[e]||this.style&&this.style[e]||""}},{key:"cssInitial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this._styleMap[e]:this.initial.styleMap[e];return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!le(t)&&(t=this.style[e]),t||""}},{key:"cssParent",value:function(e){for(var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this:this.actualParent;i;){if((n=i.initial.styleMap[e]||"")||i.documentBody){t&&!i.visible&&(n="");break}i=i.actualParent}return n}},{key:"cssSort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.duplicate():this.children;return n.sort(function(n,i){var r=n.toInt(e),a=i.toInt(e);return r===a?0:t?r>a?-1:1:r<a?-1:1}),n}},{key:"cssTry",value:function(e,t){if(this.styleElement){var n=this._element,i=this.css(e);if(n.style[e]=t,n.style[e]===t)return We(n,e,i),!0}return!1}},{key:"cssFinally",value:function(e){if(this.styleElement){var t=this._element,n=ze(t,e);if(n)return t.style[e]=n,je(t,e),!0}return!1}},{key:"toInt",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return parseInt((arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.initial.styleMap:this._styleMap)[e])||t}},{key:"convertPX",value:function(e){return this.convertPercent(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2])||O(e,this.dpi,this.fontSize)}},{key:"convertPercent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if($(e)){var i,r=(n?this.absoluteParent:null)||this,a=t?"width":"height";return i=r.has(a,2)?r.toInt(a):r[n?"box":"bounds"][a],"".concat(Math.round((parseFloat(e)>=1?parseInt(e)/100:parseFloat(e))*i),"px")}return""}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this._styleMap)[e];if(le(i))switch(i){case"0px":if(j(t,64))return!0;switch(e){case"top":case"right":case"bottom":case"left":return!0}case"left":if(j(t,8))return!0;case"baseline":if(j(t,16))return!0;case"auto":if(j(t,4))return!0;case"none":case"initial":case"normal":case"transparent":case"rgba(0, 0, 0, 0)":return!1;default:if(n&&n.not)if(Array.isArray(n.not))for(var r=Array.isArray(o=n.not),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}if(i===s)return!1}else if(i===n.not)return!1;var l=0===t;return j(t,2)&&q(i)&&(l=!0),j(t,32)&&$(i)&&(l=!0),j(t,4)&&(l=!1),l}return!1}},{key:"hasBit",value:function(e,t){return void 0!==this[e]&&j(this[e],t)}},{key:"hasAlign",value:function(e){return j(this.alignmentType,e)}},{key:"exclude",value:function(e){var t=e.section,n=void 0===t?0:t,i=e.procedure,r=void 0===i?0:i,a=e.resource,o=void 0===a?0:a;n&&(this._excludeSection|=n),r&&(this._excludeProcedure|=r),o&&(this._excludeResource|=o)}},{key:"setExclusions",value:function(){var e=this;if(this.styleElement){var t=function(t,n){var i=e.actualParent,r=[J(e.dataset["exclude".concat(t)]),i?J(i.dataset["exclude".concat(t,"Child")]):""].filter(function(e){return e}).join("|"),a=0;r.split("|").map(function(e){return e.toUpperCase().trim()}).forEach(function(e){void 0!==n[e]&&(a|=n[e])}),a>0&&e.exclude(s({},t.toLowerCase(),a))};t("Section",b),t("Procedure",k),t("Resource",x)}}},{key:"setBounds",value:function(){var e=this._element;if(e&&!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(this.styleElement)this._bounds=Se(e.getBoundingClientRect());else if(this.plainText){var t=Ae(e);this._bounds=Se(t)}Object.assign(this.initial.bounds,this._bounds)}}},{key:"appendTry",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<this.length;i++)if(e===this.item(i))return t.siblingIndex=e.siblingIndex,this.item(i,t),t.parent=this,!0;if(n){var r=-1;return this.each(function(e){e.siblingIndex!==Number.MAX_VALUE&&(r=Math.max(e.siblingIndex,r))}),t.siblingIndex=r+1,t.parent=this,!0}return!1}},{key:"modifyBox",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0!==t){var i=S.get(e);i&&(null===t?this._boxReset[i]=1:(this._boxAdjustment[i]+=t,!n&&this._boxAdjustment[i]<0&&(this._boxAdjustment[i]=0)))}}},{key:"valueBox",value:function(e){var t=S.get(e);return t?[this._boxReset[t],this._boxAdjustment[t]]:[0,0]}},{key:"resetBox",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Array.from(S.keys()),a=function(e,a,o){var s=0,l=Array.from(S.values()).slice(e,a),c=Array.isArray(l),h=0;for(l=c?l:l[Symbol.iterator]();;){var u;if(c){if(h>=l.length)break;u=l[h++]}else{if((h=l.next()).done)break;u=h.value}n._boxReset[u]=1,t&&t.modifyBox(i?r[s]:r[s+4],n[o?r[s]:r[s+4]]),s++}};j(e,30)&&a(0,4,!0),j(e,480)&&a(4,8,!1)}},{key:"inheritBox",value:function(e,t){var n=this,i=Array.from(S.keys()),r=function(e,r,a){var o=a?0:4,s=Array.from(S.values()).slice(e,r),l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){var h;if(l){if(c>=s.length)break;h=s[c++]}else{if((c=s.next()).done)break;h=c.value}var u=h;n._boxAdjustment[u]>0&&(t.modifyBox(i[o],n._boxAdjustment[u],!1),n._boxAdjustment[u]=0),o++}};j(e,30)&&r(0,4,!0),j(e,480)&&r(4,8,!1)}},{key:"previousSiblings",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,r=[];if(this._element)i=this._element.previousSibling;else if(this.initial.children.length){var a=this.initial.children.filter(function(e){return e.pageFlow});i=a.length?a[0].element.previousSibling:null}for(;i;){var o=Xe(i);if(o)if(e&&o.lineBreak||t&&o.excluded)r.push(o);else if(!o.excluded&&o.pageFlow&&(r.push(o),!n||o.visible))break;i=i.previousSibling}return r}},{key:"nextSiblings",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,r=[];if(this._element)i=this._element.nextSibling;else if(this.initial.children.length){var a=this.initial.children.filter(function(e){return e.pageFlow});i=a.length?a[0].element.nextSibling:null}for(;i;){var o=Xe(i);if(o)if(e&&o.lineBreak||t&&o.excluded)r.push(o);else if(!o.excluded&&o.pageFlow&&(r.push(o),!n||o.visible))break;i=i.nextSibling}return r}},{key:"firstChild",value:function(e){if(e=e||this._element)for(var t=0;t<e.childNodes.length;t++){var n=Xe(e.childNodes[t]);if(n&&this.initial.children.includes(n))return n}}},{key:"lastChild",value:function(e){if(e=e||this._element)for(var t=e.childNodes.length-1;t>=0;t--){var n=Xe(e.childNodes[t]);if(n&&this.initial.children.includes(n))return n}}},{key:"actualRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear",t=this.companion&&!this.companion.visible&&this.companion[e].right>this[e].right?this.companion:this;return t[e].right-(t.marginRight<0?t.marginRight:0)}},{key:"setDimensions",value:function(e){var t=this.unsafe(e);if(t){if(t.width=this.bounds.width,t.height=t.bottom-t.top,this.styleElement)switch(e){case"linear":t.width+=(this.marginLeft>0?this.marginLeft:0)+this.marginRight;break;case"box":t.width-=this.contentBoxWidth}void 0===this.initial[e]&&(this.initial[e]=Se(t))}}},{key:"convertPosition",value:function(e){var t=0;if(!this.positionStatic){var n=this.initial.styleMap[e];(q(n)||$(n))&&(t=D(this.percentValue(e,n,"left"===e||"right"===e)))}return t}},{key:"convertBox",value:function(e,t){var n=e+t;return D(this.percentValue(n,this.css(n),"Left"===t||"Right"===t))}},{key:"percentValue",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return $(t)?q(this.style[e])?this.style[e]:this.convertPercent(t,n,i):t}},{key:"parent",set:function(e){e!==this._parent&&(this._parent&&this._parent.remove(this),this._parent=e),e?(e.contains(this)||(e.append(this),this.groupParent&&e.siblingIndex!==Number.MAX_VALUE&&(this.siblingIndex=Math.min(this.siblingIndex,e.siblingIndex))),-1===this.initial.depth&&Object.assign(this.initial,{depth:e.depth+1}),this.depth=e.depth+1):this.depth=-1},get:function(){return this._parent}},{key:"tagName",set:function(e){this._cached.tagName=e.toUpperCase()},get:function(){if(void 0===this._cached.tagName){var e=this._element,t="";e&&(this.styleElement?t=("INPUT"===e.tagName?e.type:e.tagName).toUpperCase():"#text"===e.nodeName&&(t="PLAINTEXT")),this._cached.tagName=t}return this._cached.tagName}},{key:"element",get:function(){if(this._element)return this._element;var e=document.createElement("span");return We(e,"node",this),e}},{key:"baseElement",get:function(){return this._element}},{key:"htmlElement",get:function(){return this._element instanceof HTMLElement}},{key:"svgElement",get:function(){return this._element instanceof SVGSVGElement}},{key:"styleElement",get:function(){return Ve(this._element)}},{key:"imageElement",get:function(){return"IMG"===this.tagName}},{key:"flexElement",get:function(){return"flex"===this.display||"inline-flex"===this.display}},{key:"gridElement",get:function(){return"grid"===this.display}},{key:"textElement",get:function(){return this.plainText||this.inlineText}},{key:"tableElement",get:function(){return"TABLE"===this.tagName||"table"===this.display}},{key:"groupParent",get:function(){return!1}},{key:"plainText",get:function(){return"PLAINTEXT"===this.tagName}},{key:"lineBreak",get:function(){return"BR"===this.tagName}},{key:"documentBody",get:function(){return this._element===document.body}},{key:"bounds",get:function(){return this._bounds||be()}},{key:"linear",get:function(){if(void 0===this._linear&&this._bounds){if(this._element){var e=this._bounds;this._linear={top:e.top-(this.marginTop>0?this.marginTop:0),right:e.right+this.marginRight,bottom:e.bottom+this.marginBottom,left:e.left-(this.marginLeft>0?this.marginLeft:0),width:0,height:0}}else this._linear=Se(this._bounds);this.setDimensions("linear")}return this._linear||be()}},{key:"box",get:function(){if(void 0===this._box&&this._bounds){if(this._element){var e=this._bounds;this._box={top:e.top+(this.paddingTop+this.borderTopWidth),right:e.right-(this.paddingRight+this.borderRightWidth),bottom:e.bottom-(this.paddingBottom+this.borderBottomWidth),left:e.left+(this.paddingLeft+this.borderLeftWidth),width:0,height:0}}else this._box=Se(this._bounds);this.setDimensions("box")}return this._box||be()}},{key:"renderAs",set:function(e){this.rendered||!e||e.rendered||(this._renderAs=e)},get:function(){return this._renderAs}},{key:"renderDepth",set:function(e){this._renderDepth=e},get:function(){return-1!==this._renderDepth?this._renderDepth:0}},{key:"dataset",get:function(){return this._element instanceof HTMLElement?this._element.dataset:{}}},{key:"excludeSection",get:function(){return this._excludeSection}},{key:"excludeProcedure",get:function(){return this._excludeProcedure}},{key:"excludeResource",get:function(){return this._excludeResource}},{key:"extension",get:function(){return this.dataset.include?this.dataset.include.split(",")[0].trim():""}},{key:"flexbox",get:function(){if(void 0===this._cached.flexbox){var e=this.actualParent;this._cached.flexbox={order:D(this.css("order")),wrap:this.css("flexWrap"),direction:this.css("flexDirection"),alignSelf:!this.has("alignSelf")&&e&&e.has("alignItems")?e.css("alignItems"):this.css("alignSelf"),justifyContent:this.css("justifyContent"),basis:this.css("flexBasis"),grow:D(this.css("flexGrow")),shrink:D(this.css("flexShrink"))}}return this._cached.flexbox}},{key:"width",get:function(){if(void 0===this._cached.width){for(var e=0,t=[this._styleMap.width,this._styleMap.minWidth],n=0;n<t.length;n++){var i=t[n];if((q(i)||$(i))&&(e=D(this.convertPX(i)))>0)break}this._cached.width=e}return this._cached.width}},{key:"height",get:function(){if(void 0===this._cached.height){for(var e=0,t=[this._styleMap.height,this._styleMap.minHeight],n=0;n<t.length;n++){var i=t[n];if((q(i)||this.hasHeight&&$(i))&&(e=D(this.convertPX(i,!0)))>0)break}this._cached.height=e}return this._cached.height}},{key:"hasWidth",get:function(){var e=this;if(void 0===this._cached.hasWidth){var t=this.cssInitial("width",!0);this._cached.hasWidth=!e.inlineStatic&&($(t)?"0%"!==t:!!(q(t)&&"0px"!==t||e.toInt("minWidth")>0))}return this._cached.hasWidth}},{key:"hasHeight",get:function(){var e=this;if(void 0===this._cached.hasHeight){var t=this.cssInitial("height",!0);this._cached.hasHeight=function(){if(e.inlineStatic)return!1;if($(t)){var n=e.actualParent;if(n&&n.hasHeight)return"0%"!==t}else if(q(t)&&"0px"!==t||e.toInt("minHeight")>0)return!0;return!1}()}return this._cached.hasHeight}},{key:"lineHeight",get:function(){return void 0===this._cached.lineHeight&&(this._cached.lineHeight=this.textElement||0===this.length?this.toInt("lineHeight"):D(this.cssParent("lineHeight",!0))),this._cached.lineHeight}},{key:"display",get:function(){return this.css("display")}},{key:"position",get:function(){return this.css("position")}},{key:"positionStatic",get:function(){var e=this;return void 0===this._cached.positionStatic&&(this._cached.positionStatic=function(){switch(e.position){case"fixed":case"absolute":return!1;case"sticky":case"relative":return 0===e.toInt("top")&&0===e.toInt("right")&&0===e.toInt("bottom")&&0===e.toInt("left");case"inherit":var t=e.actualParent;return!!t&&!("absolute"===t.position||"fixed"===t.position);default:return!0}}()),this._cached.positionStatic}},{key:"positionRelative",get:function(){var e=this.position;return"relative"===e||"sticky"===e}},{key:"positionAuto",get:function(){if(void 0===this._cached.positionAuto){var e=this.initial.styleMap;this._cached.positionAuto=!(this.pageFlow||"auto"!==e.top&&e.top||"auto"!==e.right&&e.right||"auto"!==e.bottom&&e.bottom||"auto"!==e.left&&e.left)}return this._cached.positionAuto}},{key:"top",get:function(){return void 0===this._cached.top&&(this._cached.top=this.convertPosition("top")),this._cached.top}},{key:"right",get:function(){return void 0===this._cached.right&&(this._cached.right=this.convertPosition("right")),this._cached.right}},{key:"bottom",get:function(){return void 0===this._cached.bottom&&(this._cached.bottom=this.convertPosition("bottom")),this._cached.bottom}},{key:"left",get:function(){return void 0===this._cached.left&&(this._cached.left=this.convertPosition("left")),this._cached.left}},{key:"marginTop",get:function(){return void 0===this._cached.marginTop&&(this._cached.marginTop=this.inlineStatic&&!this.baselineActive?0:this.convertBox("margin","Top")),this._cached.marginTop}},{key:"marginRight",get:function(){return void 0===this._cached.marginRight&&(this._cached.marginRight=this.convertBox("margin","Right")),this._cached.marginRight}},{key:"marginBottom",get:function(){return void 0===this._cached.marginBottom&&(this._cached.marginBottom=this.inlineStatic&&!this.baselineActive?0:this.convertBox("margin","Bottom")),this._cached.marginBottom}},{key:"marginLeft",get:function(){return void 0===this._cached.marginLeft&&(this._cached.marginLeft=this.convertBox("margin","Left")),this._cached.marginLeft}},{key:"borderTopWidth",get:function(){return"none"!==this.css("borderTopStyle")?D(this.css("borderTopWidth")):0}},{key:"borderRightWidth",get:function(){return"none"!==this.css("borderRightStyle")?D(this.css("borderRightWidth")):0}},{key:"borderBottomWidth",get:function(){return"none"!==this.css("borderBottomStyle")?D(this.css("borderBottomWidth")):0}},{key:"borderLeftWidth",get:function(){return"none"!==this.css("borderLeftStyle")?D(this.css("borderLeftWidth")):0}},{key:"paddingTop",get:function(){return void 0===this._cached.paddingTop&&(this._cached.paddingTop=this.convertBox("padding","Top")),this._cached.paddingTop}},{key:"paddingRight",get:function(){return void 0===this._cached.paddingRight&&(this._cached.paddingRight=this.convertBox("padding","Right")),this._cached.paddingRight}},{key:"paddingBottom",get:function(){return void 0===this._cached.paddingBottom&&(this._cached.paddingBottom=this.convertBox("padding","Bottom")),this._cached.paddingBottom}},{key:"paddingLeft",get:function(){return void 0===this._cached.paddingLeft&&(this._cached.paddingLeft=this.convertBox("padding","Left")),this._cached.paddingLeft}},{key:"contentBoxWidth",get:function(){return this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderLeftWidth+this.paddingLeft+this.paddingRight+this.borderRightWidth}},{key:"contentBoxHeight",get:function(){return this.tableElement&&"collapse"===this.css("borderCollapse")?0:this.borderTopWidth+this.paddingTop+this.paddingBottom+this.borderBottomWidth}},{key:"inline",get:function(){if(void 0===this._cached.inline){var e=this.display;this._cached.inline="inline"===e||("initial"===e||"unset"===e)&&w.includes(this.tagName)}return this._cached.inline}},{key:"inlineStatic",get:function(){return void 0===this._cached.inlineStatic&&(this._cached.inlineStatic=this.inline&&!this.floating&&!this.imageElement),this._cached.inlineStatic}},{key:"inlineVertical",get:function(){if(void 0===this._cached.inlineVertical){var e=this.display;this._cached.inlineVertical=(e.startsWith("inline")||"table-cell"===e)&&!this.floating&&!this.plainText}return this._cached.inlineVertical}},{key:"inlineText",get:function(){if(void 0===this._cached.inlineText){var e=this._element,t=!1;if(e)switch(e.tagName){case"INPUT":case"BUTTON":case"IMG":case"SELECT":case"TEXTAREA":break;default:t=this.htmlElement&&Ne(e)&&(0===e.children.length||Array.from(e.children).every(function(e){var t=Xe(e);return!(t&&!t.excluded||Ve(e)&&le(e.dataset.include))}))}this._cached.inlineText=t}return this._cached.inlineText}},{key:"block",get:function(){if(void 0===this._cached.block){var e=this.display;this._cached.block="block"===e||"list-item"===e||"initial"===e&&E.includes(this.tagName)}return this._cached.block}},{key:"blockStatic",get:function(){return void 0===this._cached.blockStatic&&(this._cached.blockStatic=this.block&&this.pageFlow&&(!this.floating||"100%"===this.cssInitial("width"))),this._cached.blockStatic}},{key:"blockDimension",get:function(){if(void 0===this._cached.blockDimension){var e=this.display;this._cached.blockDimension=this.block||"inline-block"===e||"table-cell"===e}return this._cached.blockDimension}},{key:"pageFlow",get:function(){return void 0===this._cached.pageFlow&&(this._cached.pageFlow=this.positionStatic||this.positionRelative),this._cached.pageFlow}},{key:"inlineFlow",get:function(){if(void 0===this._cached.inlineFlow){var e=this.display;this._cached.inlineFlow=this.inline||e.startsWith("inline")||"table-cell"===e||this.imageElement||this.floating}return this._cached.inlineFlow}},{key:"rightAligned",get:function(){return void 0===this._cached.rightAligned&&(this._cached.rightAligned="right"===this.float||this.autoMargin.left||this.inlineVertical&&"right"===this.cssParent("textAlign",!0)||!this.pageFlow&&this.has("right")),this._cached.rightAligned||this.hasAlign(512)}},{key:"bottomAligned",get:function(){return void 0===this._cached.bottomAligned&&(this._cached.bottomAligned=!this.pageFlow&&this.has("bottom")&&this.bottom>=0),this._cached.bottomAligned}},{key:"autoMargin",get:function(){if(void 0===this._cached.autoMargin)if(!this.pageFlow||this.blockStatic||"table"===this.display){var e=this.initial.styleMap,t="auto"===e.marginLeft&&(!!this.pageFlow||this.has("right")),n="auto"===e.marginRight&&(!!this.pageFlow||this.has("left")),i="auto"===e.marginTop&&(!!this.pageFlow||this.has("bottom")),r="auto"===e.marginBottom&&(!!this.pageFlow||this.has("top"));this._cached.autoMargin={horizontal:t||n,left:t&&!n,right:!t&&n,leftRight:t&&n,vertical:i||r,top:i&&!r,bottom:!i&&r,topBottom:i&&r}}else this._cached.autoMargin={horizontal:!1,left:!1,right:!1,leftRight:!1,top:!1,bottom:!1,vertical:!1,topBottom:!1};return this._cached.autoMargin}},{key:"floating",get:function(){if(void 0===this._cached.floating)if(this.pageFlow){var e=this.css("cssFloat");this._cached.floating="left"===e||"right"===e}else this._cached.floating=!1;return this._cached.floating}},{key:"float",get:function(){return void 0===this._cached.float&&(this._cached.float=this.floating?this.css("cssFloat"):"none"),this._cached.float}},{key:"textContent",get:function(){if(void 0===this._cached.textContent){var e=this._element,t="";e&&(e instanceof HTMLElement?t=e.textContent||e.innerText:this.plainText&&(t=e.textContent||"")),this._cached.textContent=t}return this._cached.textContent}},{key:"overflow",set:function(e){0!==e&&16!==e&&8!==e&&24!==e||(this._cached.overflow=e)},get:function(){if(void 0===this._cached.overflow){var e=[this.css("overflow"),this.css("overflowX"),this.css("overflowY")],t=e[0],n=e[1],i=e[2],r=this._element,a=0;this.hasWidth&&("scroll"===t||"scroll"===n||"auto"===n&&r&&r.clientWidth!==r.scrollWidth)&&(a|=8),this.hasHeight&&("scroll"===t||"scroll"===i||"auto"===i&&r&&r.clientHeight!==r.scrollHeight)&&(a|=16),this._cached.overflow=a}return this._cached.overflow}},{key:"overflowX",get:function(){return j(this.overflow,8)}},{key:"overflowY",get:function(){return j(this.overflow,16)}},{key:"baseline",get:function(){if(void 0===this._cached.baseline){var e=this.verticalAlign;this._cached.baseline=this.pageFlow&&!this.floating&&("baseline"===e||"initial"===e)}return this._cached.baseline}},{key:"verticalAlign",get:function(){return this.css("verticalAlign")}},{key:"multiLine",set:function(e){this._cached.multiLine=e},get:function(){return void 0===this._cached.multiLine&&(this._cached.multiLine=this.plainText||"table-cell"===this.display?Ae(this._element).multiLine:0),this._cached.multiLine}},{key:"visibleStyle",get:function(){if(void 0===this._cached.visibleStyle){var e=this.borderTopWidth>0||this.borderRightWidth>0||this.borderBottomWidth>0||this.borderLeftWidth>0,t=T.CSS_URL.test(this.css("backgroundImage"))||T.CSS_URL.test(this.css("background")),n=this.has("backgroundColor"),i=this.css("backgroundRepeat"),r=this.paddingLeft+this.paddingRight>0,a=this.paddingTop+this.paddingBottom>0;this._cached.visibleStyle={padding:r||a,paddingHorizontal:r,paddingVertical:a,background:e||t||n,borderWidth:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:"no-repeat"!==i,backgroundRepeatX:"repeat"===i||"repeat-x"===i||i.startsWith("repeat "),backgroundRepeatY:"repeat"===i||"repeat-y"===i||i.endsWith(" repeat")}}return this._cached.visibleStyle}},{key:"preserveWhiteSpace",get:function(){if(void 0===this._cached.preserveWhiteSpace){var e=this.css("whiteSpace");this._cached.preserveWhiteSpace="pre"===e||"pre-wrap"===e}return this._cached.preserveWhiteSpace}},{key:"layoutHorizontal",get:function(){return this.hasAlign(8)}},{key:"layoutVertical",get:function(){return this.hasAlign(16)}},{key:"controlName",set:function(e){this.rendered&&void 0!==this._controlName||(this._controlName=e)},get:function(){return this._controlName||""}},{key:"documentParent",set:function(e){this._documentParent=e},get:function(){return this._documentParent||this.actualParent||this.parent||this}},{key:"absoluteParent",get:function(){var e=this.actualParent;if(!this.pageFlow)for(;e&&0!==e.id;){var t=e.cssInitial("position",!1,!0);if(e.documentBody||"static"!==t&&"initial"!==t&&"unset"!==t)return e;e=e.actualParent}return e}},{key:"renderParent",set:function(e){e&&(e!==this&&-1===e.renderChildren.indexOf(this)&&e.renderChildren.push(this),this._renderParent=e)},get:function(){return this._renderParent}},{key:"renderPositionId",get:function(){return this.id+(-1!==this.renderPosition?"^".concat(this.renderPosition):"")}},{key:"actualParent",get:function(){return this.element.parentElement?Xe(this.element.parentElement):void 0}},{key:"actualChildren",get:function(){return void 0===this._cached.actualChildren&&(this._cached.actualChildren=this.htmlElement?de(Array.from(this.element.childNodes),function(e){return Xe(e)}):this.groupParent?this.initial.children.slice():[]),this._cached.actualChildren}},{key:"actualHeight",get:function(){return this.plainText?this.bounds.bottom-this.bounds.top:this.bounds.height}},{key:"dir",get:function(){if(void 0===this._cached.dir)switch(this._cached.dir=this.css("direction"),this._cached.dir){case"unset":case"inherit":for(var e=this.actualParent;e&&0!==e.id;){var t=e.dir;if(""!==t){this._cached.dir=t;break}e=e.actualParent}this._cached.dir=document.body.dir}return this._cached.dir}},{key:"nodes",get:function(){return this.rendered?this.renderChildren:this.children}},{key:"center",get:function(){return{x:this.bounds.left+Math.floor(this.bounds.width/2),y:this.bounds.top+Math.floor(this.actualHeight/2)}}}]),n}(),At=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,kt),o(t,[{key:"setBounds",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.length){var e=this.outerRegion;this._bounds=Object.assign({width:e.right-e.left,height:e.bottom-e.top},e)}}},{key:"previousSiblings",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.item(0);return i?i.previousSiblings(e,t,n):[]}},{key:"nextSiblings",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.item();return i?i.nextSiblings(e,t,n):[]}},{key:"firstChild",value:function(){var e=Ye.actualParent(this.initial.children);return e?f(c(t.prototype),"firstChild",this).call(this,e.element):this.initial.children.length?this.initial.children.slice().sort(Ye.siblingIndex)[0]:void 0}},{key:"lastChild",value:function(){var e=Ye.actualParent(this.initial.children);return e?f(c(t.prototype),"lastChild",this).call(this,e.element):this.initial.children.length?this.initial.children.slice().sort(Ye.siblingIndex)[this.initial.children.length-1]:void 0}},{key:"inline",get:function(){return this.every(function(e){return e.inline})}},{key:"pageFlow",get:function(){return this.every(function(e){return e.pageFlow})}},{key:"inlineFlow",get:function(){return this.inlineStatic||this.hasAlign(128)}},{key:"inlineStatic",get:function(){return this.every(function(e){return e.inlineStatic})}},{key:"inlineVertical",get:function(){return this.every(function(e){return e.inlineVertical})}},{key:"block",get:function(){return this.some(function(e){return e.block})}},{key:"blockStatic",get:function(){return this.some(function(e){return e.blockStatic})}},{key:"blockDimension",get:function(){return this.some(function(e){return e.blockDimension})}},{key:"floating",get:function(){return this.every(function(e){return e.floating})}},{key:"float",get:function(){return this.floating?this.hasAlign(512)?"right":"left":"none"}},{key:"baseline",get:function(){var e=this.cssInitial("verticalAlign",!0);return""!==e?"baseline"===e:this.every(function(e){return e.baseline})}},{key:"multiLine",get:function(){return this.children.reduce(function(e,t){return e+t.multiLine},0)}},{key:"display",get:function(){return this.css("display")||this.some(function(e){return e.block})?"block":this.some(function(e){return e.blockDimension})?"inline-block":"inline"}},{key:"element",get:function(){var e=this.cascade(!0);return e.length?e[0].element:f(c(t.prototype),"element",this)}},{key:"groupParent",get:function(){return!0}},{key:"outerRegion",get:function(){var e=this.children.slice(),t=e[0],n=t,i=t,r=t;this.each(function(t){return t.companion&&!t.companion.visible&&e.push(t.companion)});for(var a=1;a<e.length;a++){var o=e[a];o.linear.top<t.linear.top&&(t=o),o.linear.right>n.linear.right&&(n=o),o.linear.bottom>i.linear.bottom&&(i=o),o.linear.left<r.linear.left&&(r=o)}return{top:t.linear.top,right:n.linear.right,bottom:i.linear.bottom,left:r.linear.left}}}]),t}(),St=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,ve),t}();function Et(e){for(var t=[],n=Array.from(e.getElementsByTagName("stop")),i=0;i<n.length;i++){var r=n[i],a=st(Ce(r,"stop-color"),Ce(r,"stop-opacity"));a&&a.visible&&t.push({color:a.valueRGBA,offset:Ce(r,"offset"),opacity:a.alpha})}return t}function wt(e){for(var t={length:e.transform.baseVal.numberOfItems,translateX:0,translateY:0,scaleX:1,scaleY:1,rotateAngle:0,rotateX:0,rotateY:0,skewX:0,skewY:0},n=0;n<e.transform.baseVal.numberOfItems;n++){var i=e.transform.baseVal.getItem(n);switch(i.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX+=i.matrix.e,t.translateY+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:t.scaleX*=i.matrix.a,t.scaleY*=i.matrix.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:t.rotateAngle+=i.angle,i.matrix.e>0&&(t.rotateX=Math.round((i.matrix.e-i.matrix.f)/2),t.rotateY=i.matrix.e-t.rotateX);break;case SVGTransform.SVG_TRANSFORM_SKEWX:t.skewX+=i.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWY:t.skewY+=i.angle}}return t}function _t(e,t,n){var i=Ee(e);if(i.transformOrigin)switch(i.transformOrigin){case"0px 0px":case"0% 0%":case"left top":break;default:return Fe(i.transformOrigin,e.getBoundingClientRect(),t,n,!0)}}function Tt(e){return"none"!==Ce(e,"display")&&!["hidden","collpase"].includes(Ce(e,"visibility"))}var Bt=Object.freeze({createColorStop:Et,createTransform:wt,createTransformOrigin:_t,getOffsetX:function(e,t){return t*Math.sin(e*Math.PI/180)},getOffsetY:function(e,t){return t*Math.cos(e*Math.PI/180)*-1},isSvgVisible:Tt}),It=function(e){return function(t){function n(e){var t;return r(this,n),(t=u(this,c(n).call(this))).name="",t.visibility=!0,e&&(t.setElement(e),t.build(),t._element&&(t.visibility=Tt(e))),t}return l(n,e),o(n,[{key:"setElement",value:function(e){e instanceof SVGGraphicsElement&&(this._element=e)}},{key:"setTransformOrigin",value:function(e,t){var n=this._element;n&&this.transform&&this.transform.length&&(this.transform.origin=_t(n,e,t))}},{key:"build",value:function(){var e=this._element;e&&(this.name=e.id,this.transform=wt(e))}},{key:"element",get:function(){return this._element}}]),n}()},Ct=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,It(St)),t}(),Ft=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,It(Object)),t}(),Rt=function(e){function t(e,n){var i;return r(this,t),(i=u(this,c(t).call(this,e))).uri="",n&&(i.uri=n),i}return l(t,Ft),o(t,[{key:"setElement",value:function(e){e instanceof SVGImageElement&&(this._element=e)}}]),t}(),Nt=function(){function e(t,n){r(this,e),this.name="",this.visibility=!0,this.d="",this.color="",this.fillRule="",this.fill="",this.fillOpacity=1,this.stroke="",this.strokeWidth="",this.strokeOpacity=1,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit="",this.clipPath="",this.clipRule="",t&&(this.setElement(t),this.build()),n&&(this.d=n)}return o(e,[{key:"setElement",value:function(e){e instanceof SVGGraphicsElement&&(this._element=e)}},{key:"build",value:function(){var t=this._element;if(t){switch(t.tagName){case"path":this.d=Ce(t,"d");break;case"line":this.d=e.getLine(t.x1.baseVal.value,t.y1.baseVal.value,t.x2.baseVal.value,t.y2.baseVal.value);break;case"rect":this.d=e.getRect(t.width.baseVal.value,t.height.baseVal.value,t.x.baseVal.value,t.y.baseVal.value);break;case"polyline":case"polygon":var n=t;this.d="polygon"===t.tagName?e.getPolygon(n.points):e.getPolyline(n.points);break;case"circle":this.d=e.getCircle(t.cx.baseVal.value,t.cy.baseVal.value,t.r.baseVal.value);break;case"ellipse":this.d=e.getEllipse(t.cx.baseVal.value,t.cy.baseVal.value,t.rx.baseVal.value,t.ry.baseVal.value)}var i={fill:Ce(t,"fill"),stroke:Ce(t,"stroke")},r=st(Ce(t,"color"))||st(Te(t,"color")),a=/url\("?#(.*?)"?\)/;for(var o in i){var s=a.exec(i[o]);if(s)i[o]="@".concat(s[1]);else if(U(i[o]))switch(i[o].toLowerCase()){case"none":case"transparent":i[o]="";break;case"currentcolor":i[o]=r?r.valueRGB:"";break;default:var l=st(i[o]);l&&(i[o]=l.valueRGB)}}var c="",h=a.exec(Ce(t,"clip-path"));h&&(c=h[1]);var u=parseFloat(Ce(t,"fill-opacity")),d=parseFloat(Ce(t,"stroke-opacity"));this.name=t.id,this.color=r?r.valueRGB:"",this.fillRule=Ce(t,"fill-rule"),this.fill=i.fill,this.stroke=i.stroke,this.strokeWidth=""+D(Ce(t,"stroke-width")),this.fillOpacity=!isNaN(u)&&u<1?u:1,this.strokeOpacity=!isNaN(d)&&d<1?d:1,this.strokeLinecap=Ce(t,"stroke-linecap"),this.strokeLinejoin=Ce(t,"stroke-linejoin"),this.strokeMiterlimit=Ce(t,"stroke-miterlimit"),this.clipPath=c,this.clipRule=Ce(t,"clip-rule"),this.visibility=Tt(t)}}},{key:"element",get:function(){return this._element}}],[{key:"getLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0!==e||0!==t||0!==n||0!==i?"M".concat(e,",").concat(t," L").concat(n,",").concat(i):""}},{key:"getRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e>0&&t>0?"M".concat(n,",").concat(i," H").concat(n+e," V").concat(i+t," H").concat(n," Z"):""}},{key:"getPolyline",value:function(e){var t=[];if(e instanceof SVGPointList)for(var n=0;n<e.numberOfItems;n++){var i=e.getItem(n);t.push(i)}else t.push.apply(t,p(e));return t.length?"M".concat(t.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" ")):""}},{key:"getPolygon",value:function(e){var t=this.getPolyline(e);return""!==t?t+" Z":""}},{key:"getCircle",value:function(e,t,n){return n>0?"M".concat(e,",").concat(t," m-").concat(n,",0 a").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0"):""}},{key:"getEllipse",value:function(e,t,n,i){return n>0&&i>0?"M".concat(e-n,",").concat(t," a").concat(n,",").concat(i," 0 1,0 ").concat(2*n,",0 a").concat(n,",").concat(i," 0 1,0 -").concat(2*n,",0"):""}}]),e}(),Mt=function(e){function t(e,n,i){var a;return r(this,t),(a=u(this,c(t).call(this))).name="",a.dpi=0,a.fontSize=0,a.defs={image:[],clipPath:new Map,gradient:new Map},a._width=0,a._height=0,a._viewBoxWidth=0,a._viewBoxHeight=0,a._opacity=1,n&&(a.dpi=n),i&&(a.fontSize=i),e&&(a.setElement(e),a.build()),a}return l(t,ve),o(t,[{key:"setElement",value:function(e){e instanceof SVGSVGElement&&(this._element=e)}},{key:"setDimensions",value:function(e,t){this._width=e,this._height=t}},{key:"setViewBox",value:function(e,t){this._viewBoxWidth=e,this._viewBoxHeight=t}},{key:"setOpacity",value:function(e){this._opacity=!isNaN(e=parseFloat(""+e))&&e<1?e:1}},{key:"build",value:function(){var e=this,n=this._element;if(n){this.name=n.id,this.defs.image=[],this.setDimensions(n.width.baseVal.value,n.height.baseVal.value),this.setViewBox(n.viewBox.baseVal.width,n.viewBox.baseVal.height),this.setOpacity(Ce(n,"opacity")),n.querySelectorAll("clipPath, linearGradient, radialGradient, image").forEach(function(n){switch(n.tagName){case"clipPath":var i=t.createClipPath(n);i.length&&e.defs.clipPath.set("".concat(n.id),i);break;case"linearGradient":var r=n;e.defs.gradient.set("@".concat(r.id),{type:"linear",x1:r.x1.baseVal.value,x2:r.x2.baseVal.value,y1:r.y1.baseVal.value,y2:r.y2.baseVal.value,x1AsString:r.x1.baseVal.valueAsString,x2AsString:r.x2.baseVal.valueAsString,y1AsString:r.y1.baseVal.valueAsString,y2AsString:r.y2.baseVal.valueAsString,colorStop:Et(r)});break;case"radialGradient":var a=n;e.defs.gradient.set("@".concat(a.id),{type:"radial",cx:a.cx.baseVal.value,cy:a.cy.baseVal.value,r:a.r.baseVal.value,cxAsString:a.cx.baseVal.valueAsString,cyAsString:a.cy.baseVal.valueAsString,rAsString:a.r.baseVal.valueAsString,fx:a.fx.baseVal.value,fy:a.fy.baseVal.value,fxAsString:a.fx.baseVal.valueAsString,fyAsString:a.fy.baseVal.valueAsString,colorStop:Et(a)});break;case"image":var o=n,s=new Rt(o,Q(o.href.baseVal));s.width=o.width.baseVal.value,s.height=o.height.baseVal.value,s.x=o.x.baseVal.value,s.y=o.y.baseVal.value,s.setTransformOrigin(e.dpi,e.fontSize),e.defs.image.push(s)}});var i=new Set(["svg","g"]);[n].concat(p(Array.from(n.children).filter(function(e){return i.has(e.tagName)}))).forEach(function(t,n){var i=new Ct(t);if(n>0&&"svg"===t.tagName){var r=t;i.x=r.x.baseVal.value,i.y=r.y.baseVal.value,i.width=r.width.baseVal.value,i.height=r.height.baseVal.value,i.setTransformOrigin(e.dpi,e.fontSize)}for(var a=0;a<t.children.length;a++)switch(t.children[a].tagName){case"g":case"use":case"image":case"clipPath":case"linearGradient":case"radialGradient":break;default:var o=new Nt(t.children[a]);o.d&&"none"!==o.d&&i.append(o)}e.append(i)}),n.querySelectorAll("use").forEach(function(t){var n;if("none"!==Ce(t,"display")&&(e.some(function(e){return e.some(function(e){return t.href.baseVal==="#".concat(e.name)&&(n=e,!0)})}),n)){var i=new Nt(t,n.d);if(i){var r=!1;if(0===t.transform.baseVal.numberOfItems&&0===t.x.baseVal.value&&0===t.y.baseVal.value&&0===t.width.baseVal.value&&0===t.height.baseVal.value&&e.some(function(e){return t.parentElement instanceof SVGGraphicsElement&&t.parentElement===e.element&&(e.append(i),r=!0,!0)}),!r){var a=new Ct(t);a.x=t.x.baseVal.value,a.y=t.y.baseVal.value,a.width=t.width.baseVal.value,a.height=t.height.baseVal.value,a.setTransformOrigin(e.dpi,e.fontSize),a.append(i),e.append(a)}}}});for(var r=new Set,a=Array.from(n.children),o=0;o<a.length;o++)for(var s=a[o],l=new Set(Array.from(s.querySelectorAll("*"))),c=Array.isArray(u=this.children),h=0,u=c?u:u[Symbol.iterator]();;){var d;if(c){if(h>=u.length)break;d=u[h++]}else{if((h=u.next()).done)break;d=h.value}var f=d;if(f.element&&(f.element===s||l.has(f.element))){r.delete(f),r.add(f);break}for(var g=Array.isArray(m=f),v=0,m=g?m:m[Symbol.iterator]();;){var y;if(g){if(v>=m.length)break;y=m[v++]}else{if((v=m.next()).done)break;y=v.value}if(y.element&&(y.element===s||l.has(y.element))){r.delete(f),r.add(f);break}}}this.retain(p(this.filter(function(e){return e.length>0&&!r.has(e)})).concat(p(r)))}}},{key:"element",get:function(){return this._element}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"viewBoxWidth",get:function(){return this._viewBoxWidth}},{key:"viewBoxHeight",get:function(){return this._viewBoxHeight}},{key:"opacity",get:function(){return this._opacity}}],[{key:"createClipPath",value:function(e){var t=[];if(e.id)for(var n=Array.from(e.children),i=0;i<n.length;i++){var r=new Nt(n[i]);r&&t.push(r)}return t}}]),t}(),Lt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"afterInit",value:function(){for(var e=this,t=function(){if(n){if(i>=r.length)return"break";a=r[i++]}else{if((i=r.next()).done)return"break";a=i.value}var t=a;if(!t.hasBit("excludeProcedure",k.ACCESSIBILITY)){var o=t.element;if(o instanceof HTMLInputElement)switch(o.type){case"radio":case"checkbox":[Pe(o),Oe(o)].some(function(n){if(n){var i=Xe(n),r=n.parentElement&&"LABEL"===n.parentElement.tagName?Xe(n.parentElement):null;if(i&&i.visible&&i.pageFlow&&(le(n.htmlFor)&&n.htmlFor===o.id?t.companion=i:i.textElement&&r&&(t.companion=i,r.renderAs=t),t.companion))return e.options&&!e.options.showLabel&&i.hide(),!0}return!1})}}},n=Array.isArray(r=this.application.processing.cache.elements),i=0,r=n?r:r[Symbol.iterator]();;){var a;if("break"===t())break}}}]),t}(),Dt="[\\d.]+[a-z%]+|auto|max-content|min-content",Pt="minmax\\((.*?), (.*?)\\)",Ot="fit-content\\(([\\d.]+[a-z%]+)\\)",Vt="repeat\\((auto-fit|auto-fill|[0-9]+), ((?:minmax|fit-content)\\(.*?\\)|.*?)\\)",Ht="\\[([\\w\\-\\s]+)\\]",Gt={UNIT:RegExp("^(".concat(Dt,")$")),NAMED:RegExp("\\s*(".concat(Ht,"|").concat(Vt,"|").concat(Pt,"|").concat(Ot,"|").concat(Dt,")\\s*"),"g")},Wt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e){return e.gridElement&&e.length>0}},{key:"processNode",value:function(e,n){var i={children:new Set,rowData:[],templateAreas:{},row:Object.assign(t.createDataAttribute(),{gap:parseInt(e.convertPX(e.css("rowGap")))}),column:Object.assign(t.createDataAttribute(),{gap:parseInt(e.convertPX(e.css("columnGap")))}),alignItems:e.css("alignItems"),justifyItems:e.css("justifyItems")},r=e.css("gridAutoFlow"),a=-1!==r.indexOf("row"),o=-1!==r.indexOf("dense"),s=[],l=[],c=[],h={};function u(t){return q(t)?e.convertPX(t):t}if([e.cssInitial("gridTemplateRows",!0),e.cssInitial("gridTemplateColumns",!0),e.css("gridAutoRows"),e.css("gridAutoColumns")].forEach(function(t,n){if(t&&"none"!==t&&"auto"!==t)for(var r,a=1;null!==(r=Gt.NAMED.exec(t));)if(n<2){var o=i[0===n?"row":"column"];if("["===r[1].charAt(0))void 0===o.name[r[2]]&&(o.name[r[2]]=[]),o.name[r[2]].push(a);else if(r[1].startsWith("repeat")){var s=1;switch(r[3]){case"auto-fit":o.autoFit=!0;break;case"auto-fill":o.autoFill=!0;break;default:s=D(r[3])}var l=RegExp(Pt).exec(r[4]);if(l)o.unit.push(u(l[2])),o.unitMin.push(u(l[1])),a++;else if(Gt.UNIT.test(r[4]))for(var c=0;c<s;c++)o.unit.push(r[4]),o.unitMin.push(""),a++;else if("["===r[4].charAt(0)){var h=r[4].split(" ");if(2===h.length){var d=h[0].substring(1,h[0].length-1);void 0===o.name[d]&&(o.name[d]=[]);for(var f=0;f<s;f++)o.name[d].push(a),o.unit.push(h[1]),o.unitMin.push(""),a++}}}else Gt.UNIT.test(r[1])&&(o.unit.push(u(r[1])),o.unitMin.push(""),a++)}else i[2===n?"row":"column"].auto.push(e.convertPX(r[1]))}),!e.has("gridTemplateAreas")&&e.every(function(e){return"auto"===e.css("gridRowStart")&&"auto"===e.css("gridRowEnd")&&"auto"===e.css("gridColumnStart")&&"auto"===e.css("gridColumnEnd")})){var d=0,f=0,g=a?"left":"top";e.cssSort("order").forEach(function(t,n){ce(t.linear[g],e.box[g])&&(d++,f=1),c[n]={placement:a?[d,f,d+1,f+1]:[f,d,f+1,d+1],rowSpan:1,columnSpan:1},f++})}else e.css("gridTemplateAreas").split(/"[\s\n]+"/).map(function(e){return ee(e.trim(),'"')}).forEach(function(e,t){e.split(" ").forEach(function(e,n){"."!==e&&(void 0===i.templateAreas[e]?i.templateAreas[e]={rowStart:t,rowSpan:1,columnStart:n,columnSpan:1}:(i.templateAreas[e].rowSpan=t-i.templateAreas[e].rowStart+1,i.templateAreas[e].columnSpan++))})}),e.cssSort("order").forEach(function(e,t){for(var n=[e.css("gridRowStart"),e.css("gridColumnStart"),e.css("gridRowEnd"),e.css("gridColumnEnd")],r=[],a=1,o=1,s=0;s<n.length;s++){var l=n[s],h=i.templateAreas[l];if(void 0===h){var u=/^([\w\-]+)-(start|end)$/.exec(l);if(u&&(h=i.templateAreas[u[1]]))if("start"===u[2])switch(s){case 0:case 2:r[s]=h.rowStart+1;break;case 1:case 3:r[s]=h.columnStart+1}else switch(s){case 0:case 2:r[s]=h.rowStart+h.rowSpan+1;break;case 1:case 3:r[s]=h.columnStart+h.columnSpan+1}}else switch(s){case 0:r[s]=h.rowStart+1;break;case 1:r[s]=h.columnStart+1;break;case 2:r[s]=h.rowStart+h.rowSpan+1;break;case 3:r[s]=h.columnStart+h.columnSpan+1}}if(r.filter(function(e){return e}).length<4)for(var d=function(e,t){if(X(e))return r[t]=parseInt(e),!0;if(e.startsWith("span")){var n=parseInt(e.split(" ")[1]);return r[t-2]?r[t]=r[t-2]+n:t%2==0?a=n:o=n,!0}return!1},f=0;f<n.length;f++){var g=n[f];if("auto"!==g&&!r[f]&&!d(g,f)){var p=i[f%2==0?"row":"column"],v=g.split(" ");1===v.length&&(v[1]=v[0],v[0]="1"),p.name[v[1]]&&parseInt(v[0])<=p.name[v[1]].length&&(r[f]=p.name[v[1]][parseInt(v[0])-1]+(v[1]===n[f-2]?1:0))}r[f]||d(g,f)}c[t]={placement:r,rowSpan:a,columnSpan:o}});var p=i[a?"column":"row"];p.count=Math.max(p.unit.length,1);for(var v=0;v<c.length;v++){var m=c[v];m&&(p.count=oe([p.count,a?m.columnSpan:m.rowSpan,m.placement[a?1:0]||0,(m.placement[a?3:2]||0)-1]))}if(p.autoFill||p.autoFit){for(var y=p.unit[p.unit.length-1]||"auto",b=p.unit.length;b<p.count;b++)p.unit[b]=y;if(p.unitMin.length)for(var x="",k=0;k<p.count;k++)p.unitMin[k]&&(x=p.unitMin[k]),p.unitMin[k]=x}if(e.each(function(e,t){for(var n=c[t],r=n.placement,u=a?n.rowSpan:n.columnSpan,d=a?n.columnSpan:n.rowSpan,f=a?i.column.count:i.row.count,g=a?0:1,p=a?1:0,v=a?2:3,m=a?3:2;!r[0]||!r[1];){var y=r.slice();if(!y[g])for(var b=0,x=0;b<s.length;b++)if(!h[b]&&l[b]<f&&++x===u){y[g]=b+1;break}if(y[g]){if(!y[p]){y[v]||(y[v]=y[g]+u);for(var k=[],A=y[g]-1;A<y[v]-1;A++)if(void 0===s[A])k.push([[0,-1]]);else{if(!(s[A].map(function(e){return e}).length+d<=f))break;for(var S=[],E=0,w=0,T=-1;w<f;w++)void 0===s[A][w]&&(-1===T&&(T=w),E++),(s[A][w]||w===f-1)&&(E>=d&&S.push([T,T+E]),T=-1,E=0);if(!S.length)break;k.push(S)}if(d===k.length)if(k.length>1)e:for(var B=Array.isArray(C=k[0]),I=0,C=B?C:C[Symbol.iterator]();;){var F;if(B){if(I>=C.length)break;F=C[I++]}else{if((I=C.next()).done)break;F=I.value}for(var R=F,N=R[0];N<R[1];N++)for(var M=1;M<k.length;M++)for(var L=0;L<k[M].length;L++){var D=k[M][L];if(N>=D[0]&&(-1===D[1]||N+d<=D[1])){y[p]=N+1;break e}}}else y[p]=k[0][0][0]+1}}else r[g]=s.length+1,r[p]||(r[p]=1);y[g]&&y[p]?(r[g]=y[g],r[p]=y[p]):y[g]&&(h[y[g]-1]=!0)}r[v]||(r[v]=r[g]+u),r[m]||(r[m]=r[p]+d),function(e,t){if(t.every(function(e){return e>0})){for(var n=t[a?0:1]-1;n<t[a?2:3]-1;n++){void 0===s[n]&&(s[n]=[]);for(var i=t[a?1:0]-1;i<t[a?3:2]-1;i++)void 0===l[n]&&(l[n]=0),void 0===s[n][i]&&(s[n][i]=[],l[n]++),s[n][i].push(e)}return!0}return!1}(e,r)&&(e.data(_.CSS_GRID,"cellData",{rowStart:r[0]-1,rowSpan:r[2]-r[0],columnStart:r[1]-1,columnSpan:r[3]-r[1]}),o&&(h={}))}),a)i.rowData=s;else for(var A=0;A<s.length;A++)for(var S=0;S<s[A].length;S++)void 0===i.rowData[S]&&(i.rowData[S]=[]),i.rowData[S][A]=s[A][S];if(i.rowData.length){for(var E=Array.isArray(T=i.rowData),w=0,T=E?T:T[Symbol.iterator]();;){var B;if(E){if(w>=T.length)break;B=T[w++]}else{if((w=T.next()).done)break;B=w.value}var I=B;i.column.count=Math.max(I.length,i.column.count);for(var C=Array.isArray(R=I),F=0,R=C?R:R[Symbol.iterator]();;){var N;if(C){if(F>=R.length)break;N=R[F++]}else{if((F=R.next()).done)break;N=F.value}N&&N.forEach(function(e){return i.children.add(e)})}}i.children.size===e.length&&function(){i.row.count=i.rowData.length;for(var t=new Set,n=function(e){for(var n=function(n){var r=i.rowData[e][n];r&&r.forEach(function(r){if(r&&!t.has(r)){var a=r.data(_.CSS_GRID,"cellData"),o=e+(a?a.rowSpan-1:0);n+(a?a.columnSpan-1:0)<i.column.count-1&&r.modifyBox(4,i.column.gap),o<i.row.count-1&&r.modifyBox(8,i.row.gap),t.add(r)}})},r=0;r<i.column.count;r++)n(r)},r=0;r<i.row.count;r++)n(r);e.retain(Array.from(i.children)),e.cssSort("zIndex"),e.data(_.CSS_GRID,"mainData",i)}()}return{output:""}}}],[{key:"createDataAttribute",value:function(){return{count:0,gap:0,unit:[],unitMin:[],auto:[],autoFill:!1,autoFit:!1,name:{}}}}]),t}(),zt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e){return e.flexElement&&e.length>0}},{key:"processNode",value:function(e){var n=this.application.controllerHandler,i=e.children.filter(function(e){return e.pageFlow}),r=e.flexbox,a=Object.assign(t.createDataAttribute(i),{wrap:r.wrap.startsWith("wrap"),wrapReverse:"wrap-reverse"===r.wrap,directionReverse:r.direction.endsWith("reverse"),justifyContent:r.justifyContent,rowDirection:r.direction.startsWith("row"),columnDirection:r.direction.startsWith("column")});if(e.cssTry("display","block")){for(var o=Array.isArray(l=i),s=0,l=o?l:l[Symbol.iterator]();;){var c;if(o){if(s>=l.length)break;c=l[s++]}else{if((s=l.next()).done)break;c=s.value}var h=c,u=h.element.getBoundingClientRect();Object.assign(h.initial.bounds,{width:u.width,height:u.height})}e.cssFinally("display")}if(a.wrap){var d=function(t,r,o){var s=new Map;i.sort(function(e,n){return e.linear[t]<n.linear[t]?e.linear[t]<n.linear[t]?-1:1:e.linear[r]<n.linear[r]?-1:1});for(var l=Array.isArray(h=i),c=0,h=l?h:h[Symbol.iterator]();;){var u;if(l){if(c>=h.length)break;u=h[c++]}else{if((c=h.next()).done)break;u=c.value}var d=u,f=Math.round(d.linear[t]),g=s.get(f)||[];g.push(d),s.set(f,g)}if(s.size>0){var p=0;Array.from(s.values()).forEach(function(t,i){var r=n.createNodeGroup(t[0],t,e);r.siblingIndex=i;var a=r.unsafe("box");a&&(a[o]=e.box[o]),r.alignmentType|=128,p=Math.max(t.length,p)}),e.sort(Ye.siblingIndex),a.rowDirection?(a.rowCount=s.size,a.columnCount=p):(a.rowCount=p,a.columnCount=s.size)}};a.rowDirection?d(a.wrapReverse?"bottom":"top","left","right"):d("left","top","bottom")}else i.some(function(e){return 0!==e.flexbox.order})&&(a.directionReverse?ge(e.children,"flexbox.order"):fe(e.children,"flexbox.order")),a.rowDirection?(a.rowCount=1,a.columnCount=e.length):(a.rowCount=e.length,a.columnCount=1);return e.data(_.FLEXBOX,"mainData",a),{output:""}}}],[{key:"createDataAttribute",value:function(e){return{wrap:!1,wrapReverse:!1,directionReverse:!1,justifyContent:"",rowDirection:!1,rowCount:0,columnDirection:!1,columnCount:0,children:e}}}]),t}(),jt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"beforeInit",value:function(e){if((arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.included(e))&&!ze(e,"andromeExternalDisplay")){for(var t=[],n=e;n;)t.push(Ee(n).display),n.style.display="block",n=n.parentElement;We(e,"andromeExternalDisplay",t)}}},{key:"init",value:function(e){return this.included(e)&&this.application.parseElements.add(e),!1}},{key:"afterInit",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.included(e)){var t=ze(e,"andromeExternalDisplay");if(t){for(var n=t,i=e,r=0;i;)i.style.display=n[r],i=i.parentElement,r++;je(e,"andromeExternalDisplay")}}}}]),t}(),Xt=function(e){function t(){var e;return r(this,t),(e=u(this,c(t).apply(this,arguments))).options={columnBalanceEqual:!1},e}return l(t,bt),o(t,[{key:"condition",value:function(e){return this.included(e.element)||e.length>1&&!e.flexElement&&!e.gridElement&&(e.every(function(e){return e.pageFlow&&!e.visibleStyle.background&&(!e.inlineFlow||e.blockStatic)})&&("none"===e.css("listStyle")||e.every(function(e){return"list-item"===e.display&&"none"===e.css("listStyleType")})||e.some(function(e){return e.length>1})&&!e.some(function(e){return e.textElement||"list-item"===e.display}))||"table"===e.display&&e.every(function(e){return"table-row"===e.display&&e.every(function(e){return"table-cell"===e.display})}))}},{key:"processNode",value:function(e,n,i){var r=t.createDataAttribute(),a=[],o=this.options.columnBalanceEqual,s=[];if(o){var l=[];e.each(function(e,t){l[t]=[],e.each(function(e){return l[t].push(e.bounds.width)}),s.push(e.duplicate())});var c=s[l.findIndex(function(e){return e===l.reduce(function(e,t){return e.length===t.length?e.reduce(function(e,t){return e+t},0)<t.reduce(function(e,t){return e+t},0)?e:t:e.length<t.length?e:t})})];if(c&&c.length>1)for(var h=[],u=!1,d=function(e){var t=c[e].bounds,n=[];if(e<c.length-1)for(var i=function(i){if(s[i]===c)n.push(e);else{var r=s[i].findIndex(function(n,r){return r>=e&&Math.floor(n.bounds.width)===Math.floor(t.width)&&r<s[i].length-1});if(-1===r)return n.length=0,"break";n.push(r)}},r=0;r<s.length;r++){if("break"===i(r))break}else for(r=0;r<s.length;r++)if(s[r].length>c.length){var a=s[r].splice(h[r]+(u?2:1),s[r].length-c.length);s[r][h[r]+(u?1:0)].data(_.GRID,"cellData",{siblings:p(a)})}if(n.length===s.length){var o=n.reduce(function(e,t){return Math.min(e,t)});if(n.reduce(function(e,t){return Math.max(e,t)})>o)for(var l=0;l<s.length;l++)if(n[l]>o){var d=s[l].splice(o,n[l]-o);s[l][h[l]+(u?1:0)].data(_.GRID,"cellData",{siblings:p(d)})}h=n,u=!0}else h=Array(s.length).fill(e),u=!1},f=0;f<c.length;f++)d(f);else s.length=0}else{var g=function(e){return s[0].findIndex(function(t){return ce(t.linear.top,e.linear.top)||e.linear.top>=t.linear.top&&e.linear.bottom<=t.linear.bottom})},v=i[e.depth+2],m=v?Object.keys(v):[];if(m.length>1){var y=[];for(f=0;f<m.length;f++){var b=fe(v[parseInt(m[f])].filter(function(t){return t.documentParent.documentParent.id===e.id}),"linear.top");if(0===f&&0===b.length)return{output:""};y[f]=0===f?0:y[f-1];for(var x=0;x<b.length;x++){var k=b[x],A=[k.linear.left,k.linear.right],S=A[0],E=A[1],w=f;if("right"===k.float&&k.cssTry("float","none")){var T=k.element.getBoundingClientRect();if(T.left-k.marginLeft!==S){var B=[T.left-k.marginLeft,T.right+k.marginRight];S=B[0],E=B[1];for(var I=1;I<y.length&&(w=I,!(S>y[I-1]));I++);}k.cssFinally("float")}if(0===w||S>=y[w-1])if(void 0===s[w]&&(s[w]=[]),0===w||s[0].length===b.length)s[w][x]=k;else{var C=g(k);-1!==C&&(s[w][C]=k)}else{var F=s.length-1;if(s[F]){var R=s[F].reduce(function(e,t){return Math.min(e,t.linear.left)},Number.MAX_VALUE),N=s[F].reduce(function(e,t){return Math.max(e,t.linear.right)},-1*Number.MAX_VALUE);if(S>R&&E>N){var M=s.filter(function(e){return e}),L=g(k);-1!==L&&void 0===M[M.length-1][L]&&(s[F].length=0)}}}y[f]=Math.max(k.linear.right,y[f])}}for(var D=0,P=-1;D<y.length;D++)void 0===s[D]?-1===P?P=D-1:D===y.length-1&&(y[P]=y[D]):-1!==P&&(y[P]=y[D-1],P=-1);for(var O=(s=s.filter(function(e,t){return!!(e&&e.length>0)&&(a.push(y[t]),!0)})).reduce(function(e,t){return Math.max(e,t.length)},0),V=0;V<O;V++)for(var H=0;H<s.length;H++)void 0===s[H][V]&&(s[H][V]={spacer:1})}a.push(e.box.right)}if(s.length>1&&s[0].length===e.length){r.columnCount=o?s[0].length:s.length,e.duplicate().forEach(function(t){return e.remove(t)&&t.hide()});for(var G=0,W=0;G<s.length;G++)for(var z=0,j=function(n,i){var r=s[G][i];if(r.spacer)1===r.spacer&&z++;else{r.parent=e;var l=Object.assign(t.createDataCellAttribute(),r.data(_.GRID,"cellData")||{});if(o)l.rowStart=0===i,l.rowEnd=i===s[G].length-1,l.cellStart=0===G&&0===i,l.cellEnd=G===s.length-1&&l.rowEnd,l.index=i;else{for(var c,h=1,u=1+z,d=G+1;d<s.length&&1===s[d][i].spacer;d++)u++,s[d][i].spacer=2;if(1===u)for(var f=i+1;f<s[G].length&&1===s[G][f].spacer;f++)h++,s[G][f].spacer=2;var g=Math.min(G+(u-1),a.length-1);(c=l.siblings).push.apply(c,p(de(Array.from(r.documentParent.element.children),function(e){var t=Xe(e);return U=n,t&&t.visible&&!t.rendered&&t.linear.left>=r.linear.right&&t.linear.right<=a[g]?t:null}))),l.rowSpan=h,l.columnSpan=u,l.rowStart=0==n++,l.rowEnd=u+G===s.length,l.cellStart=0==W++,l.cellEnd=l.rowEnd&&i===s[G].length-1,l.index=G,z=0}r.data(_.GRID,"cellData",l)}U=n},X=0,U=0;X<s[G].length;X++)j(U,X);fe(e.children,"documentParent.siblingIndex","siblingIndex"),e.tableElement&&"collapse"===e.css("borderCollapse")&&(e.modifyBox(32,null),e.modifyBox(64,null),e.modifyBox(128,null),e.modifyBox(256,null)),e.data(_.GRID,"mainData",r)}return{output:""}}}],[{key:"createDataAttribute",value:function(){return{paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,columnCount:0}}},{key:"createDataCellAttribute",value:function(){return{inherit:!0,rowSpan:0,columnSpan:0,index:-1,cellStart:!1,cellEnd:!1,rowEnd:!1,rowStart:!1,siblings:[]}}}]),t}();function Ut(e){return e.visibleStyle.backgroundImage&&!e.visibleStyle.backgroundRepeat}var Yt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e){return f(c(t.prototype),"condition",this).call(this,e)&&e.length>0&&(e.every(function(e){return e.blockStatic})||e.every(function(e){return e.inlineVertical})||e.every(function(e){return e.floating})&&1===Ye.floated(e.children).size||e.every(function(t,n){return!t.floating&&(0===n||n===e.length-1||t.blockStatic||t.inlineFlow&&e.item(n-1).blockStatic&&e.item(n+1).blockStatic)}))&&(e.some(function(e){return"list-item"===e.display&&("none"!==e.css("listStyleType")||Ut(e))})||e.every(function(e){return"LI"!==e.tagName&&"none"===e.cssInitial("listStyleType")&&Ut(e)}))}},{key:"processNode",value:function(e,n){var i=0;return e.each(function(e){var n=t.createDataAttribute();if("list-item"===e.display||e.has("listStyleType")||Ut(e)){var r=e.css("listStyleImage");if(r&&"none"!==r)n.imageSrc=r;else switch(e.css("listStyleType")){case"disc":n.ordinal="";break;case"square":n.ordinal="";break;case"decimal":n.ordinal="".concat(""+(i+1),".");break;case"decimal-leading-zero":n.ordinal="".concat((i<9?"0":"")+(i+1),".");break;case"lower-alpha":case"lower-latin":n.ordinal="".concat(H(i).toLowerCase(),".");break;case"upper-alpha":case"upper-latin":n.ordinal="".concat(H(i),".");break;case"lower-roman":n.ordinal="".concat(G(i+1).toLowerCase(),".");break;case"upper-roman":n.ordinal="".concat(G(i+1),".");break;case"none":r="";var a="";e.visibleStyle.backgroundRepeat||(r=e.css("backgroundImage"),a=e.css("backgroundPosition")),r&&"none"!==r&&(n.imageSrc=r,n.imagePosition=a,e.exclude({resource:x.IMAGE_SOURCE}));break;default:n.ordinal=""}i++}e.data(_.LIST,"mainData",n)}),{output:""}}},{key:"postBaseLayout",value:function(e){e.modifyBox(16,null),e.modifyBox(256,null)}}],[{key:"createDataAttribute",value:function(){return{ordinal:"",imageSrc:"",imagePosition:""}}}]),t}();function qt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.bounds.left-=t,e.bounds.width+=Math.max(e.marginLeft<0?e.marginLeft+t:t,0),e.css("marginLeft",W(e.marginLeft+t*(n?-1:1)),!0),e.setBounds(!0)}var $t=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"afterInit",value:function(){for(var e=function(){if(t){if(n>=i.length)return"break";r=i[n++]}else{if((n=i.next()).done)return"break";r=n.value}var e=r;if(e.some(function(t,n){return t.pageFlow?"right"!==t.float&&t.marginLeft<0&&e.marginLeft>=Math.abs(t.marginLeft)&&(Math.abs(t.marginLeft)>=t.bounds.width||e.documentRoot):t.left<0&&(0===n&&e.marginLeft>0||e.marginLeft>=Math.abs(t.left))||t.right<0&&Math.abs(t.right)>=t.bounds.width})){var a=[],o=[];if(e.each(function(t,n){var i=0;if(t.pageFlow){var r=t.marginLeft;r<0&&e.marginLeft>=Math.abs(r)&&(i=1)}else{var s=(t.left||0)+t.marginLeft,l=t.right||0;s<0?(0===n||e.marginLeft>=Math.abs(s))&&(i=2):l<0&&Math.abs(l)>=t.bounds.width&&o.push(t)}a.push(i)}),o.length){var s=g(e.partition(function(e){return!o.includes(e)}),2),l=s[0],c=s[1];if(l.length&&c.length){e.style.marginLeft&&e.autoMargin.left&&e.css("marginLeft",e.style.marginLeft,!0),e.modifyBox(4,null);var h=e.has("width",2)?e.toInt("width"):oe(c.map(function(e){return e.bounds.width})),u=oe(c.map(function(e){return Math.abs(e.toInt("right"))}));l.forEach(function(e){return e.pageFlow&&!e.hasWidth&&e.css(e.textElement?"maxWidth":"width",W(h))}),e.css("width",W(h+u),!0)}}var d=oe(a);if(d>0){var f=Ye.partitionRows(e.children.filter(function(e){return e.pageFlow})),p=[];f.forEach(function(e){p.push(e[0]);for(var t=1;t<e.length;t++)e[t].multiLine&&p.push(e[t])}),e.each(function(t,n){if(2===a[n]){var i=t.toInt("left")+e.marginLeft;t.css("left",W(Math.max(i,0))),i<0&&(t.css("marginLeft",W(t.marginLeft+i),!0),qt(t,i))}else p.includes(t)&&(2===d||t.pageFlow&&!t.plainText&&a.includes(1))&&qt(t,e.marginLeft)}),e.has("width",2)&&e.css("width",W(e.toInt("width")+e.marginLeft),!0),qt(e,e.marginLeft,!0)}}},t=Array.isArray(i=this.application.processing.cache.elements),n=0,i=t?i:i[Symbol.iterator]();;){var r;if("break"===e())break}}}]),t}(),Kt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e,t){return this.included(e.element)||0===e.alignmentType&&e.pageFlow&&e.has("width",32,{not:"100%"})&&!e.imageElement&&t.layoutVertical}}]),t}(),Zt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"afterConstraints",value:function(){for(var e=Array.isArray(n=this.application.session.cache),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i;if(r.positionRelative){var a=r.renderParent;(!r.baseline||a&&!a.support.container.positionRelative)&&(0!==r.top?r.modifyBox(2,r.top):0!==r.bottom&&r.modifyBox(2,-1*r.bottom),0!==r.left&&(r.rightAligned?r.modifyBox(4,-1*r.left):r.modifyBox(16,r.left)))}}}}]),t}(),Qt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e){var t=!1;if(e.hasWidth&&e.hasHeight&&0===e.length&&!e.inlineText){var n=e.css("backgroundImage");if(!n||"none"===n){n="";var i=T.CSS_URL.exec(e.css("background"));i&&(n=i[0])}if(""!==n){n=_e(n);var r=this.application.session.image.get(n);if(r){var a=e.dpi,o=e.fontSize,s=ke(e.has("width")?e.css("width"):e.css("minWidth"),e.bounds.width,a,o),l=ke(e.has("height")?e.css("width"):e.css("minHeight"),e.bounds.height,a,o),c=Fe("".concat(e.css("backgroundPositionX")," ").concat(e.css("backgroundPositionY")),e.bounds,a,o);s>0&&c.left<=0&&r.width>s&&l>0&&c.top<=0&&r.height>l&&(r.position={x:c.left,y:c.top},e.data(_.SPRITE,"mainData",r),t=!0)}}}return t&&(!le(e.dataset.include)||this.included(e.element))}}]),t}(),Jt=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"processNode",value:function(e){function n(t){t.data(_.TABLE,"percent","".concat(Math.round(t.bounds.width/e.bounds.width*100),"%")),t.data(_.TABLE,"expand",!0)}function i(e){e.css("width",W(e.bounds.width),!0)}var r=t.createDataAttribute(),a=[],o=e.filter(function(e){return"THEAD"===e.tagName}),s=e.filter(function(e){return"TBODY"===e.tagName}),l=e.filter(function(e){return"TFOOT"===e.tagName}),c=Array.from(e.element.children).find(function(e){return"COLGROUP"===e.tagName});o.length&&(o[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(o[0],"styleMap")}),a.push.apply(a,p(o[0].children)),o.forEach(function(e){return e.hide()})),s.length&&s.forEach(function(e){a.push.apply(a,p(e.children)),e.hide()}),l.length&&(l[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(l[0],"styleMap")}),a.push.apply(a,p(l[0].children)),l.forEach(function(e){return e.hide()}));var h="fixed"===e.css("tableLayout"),u="collapse"===e.css("borderCollapse"),d=g(u?[0,0]:e.css("borderSpacing").split(" ").map(function(e){return parseInt(e)}),2),f=d[0],v=d[1];f>0?(e.modifyBox(256,f),e.modifyBox(64,f)):(e.modifyBox(256,null),e.modifyBox(64,null)),v>0?(e.modifyBox(32,v),e.modifyBox(128,v)):(e.modifyBox(32,null),e.modifyBox(128,null));for(var m=W(f>1?Math.round(f/2):f),y=W(v>1?Math.round(v/2):v),b=[],x=[],k=[],A=Array(a.length).fill(0),S=[],E=0,w=0;w<a.length;w++){var T=a[w];b[w]=f,k[w]=[];for(var B=0;B<T.length;B++){for(var I=T.item(B),C=I.element,F=0;F<C.rowSpan-1;F++){var R=w+1+F;void 0!==A[R]&&(A[R]+=C.colSpan)}if(!I.visibleStyle.backgroundImage&&!I.visibleStyle.backgroundColor)if(c){var N=Ee(c.children[A[w]]);N.background?C.style.background=N.background:N.backgroundColor&&(C.style.backgroundColor=N.backgroundColor)}else{var M=Te(C,"background",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]);""!==M?C.style.background=M:""!==(M=Te(C,"backgroundColor",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]))&&(C.style.backgroundColor=M)}switch(I.tagName){case"TH":I.cssInitial("textAlign")||I.css("textAlign","center");case"TD":I.cssInitial("verticalAlign")||I.css("verticalAlign","middle")}var L=I.cssInitial("width"),O=A[w],V=void 0===S[O]||"auto"===S[O];if(0===w||V||!h)if(""===L||"auto"===L)void 0===S[O]?(S[O]=L||"0px",x[O]=0):w===a.length-1&&V&&0===x[O]&&(x[O]=I.bounds.width);else{var H=$(L),G=q(S[O]);(V||I.bounds.width<x[O]||I.bounds.width===x[O]&&(H||G||H&&G||H&&$(S[O])&&P(L)>P(S[O])||G&&q(L)&&D(L)>D(S[O])))&&(S[O]=L),(V||1===C.colSpan)&&(x[O]=I.bounds.width)}0===E&&(E=I.multiLine),(I.length||I.inlineText)&&(b[w]+=I.bounds.width+f),I.css({marginTop:0===w?"0px":y,marginRight:B<T.length-1?m:"0px",marginBottom:w+C.rowSpan-1>=a.length-1?"0px":y,marginLeft:0===A[w]?"0px":m},"",!0),A[w]+=C.colSpan}}if(e.has("width",2)&&S.some(function(e){return $(e)})&&(S=S.map(function(e,t){return"auto"===e&&x[t]>0&&(e=W(x[t])),e})),S.every(function(e){return $(e)})&&S.reduce(function(e,t){return e+parseFloat(t)},0)>1){var j=100;S=S.map(function(e){var t=parseFloat(e);return j<=0?e="0px":j-t<0&&(e=z(j)),j-=t,e})}else if(S.every(function(e){return q(e)})){var X=S.reduce(function(e,t){return e+parseInt(t)},0);e.has("width",32)||X<e.width?S=S.map(function(e){return"0px"!==e?"".concat(parseInt(e)/X*100,"%"):e}):X>e.width&&(e.css("width","auto",!0),h||e.cascade().forEach(function(e){return e.css("width","auto",!0)}))}var U=S.reduce(function(e,t){return e+($(t)?parseFloat(t):0)},0);r.layoutType=function(){if(S.some(function(e){return $(e)})||S.every(function(e){return q(e)&&"0px"!==e}))return 3;if(S.every(function(e){return e===S[0]})){if(E)return e.some(function(e){return e.has("height")})?2:3;if("auto"===S[0])return e.has("width")?3:0;if(e.hasWidth)return 2}return S.every(function(e){return"auto"===e||q(e)&&"0px"!==e})?1:0}(),(E||1===r.layoutType&&!e.hasWidth)&&(r.expand=!0);var Y=oe(A),K=a.length,Z=e.find(function(e){return"CAPTION"===e.tagName});e.clear(),Z&&(Z.hasWidth||me(8)||(Z.textElement?Z.has("maxWidth")||Z.css("maxWidth",W(Z.bounds.width)):Z.bounds.width>oe(b)&&i(Z)),Z.cssInitial("textAlign")||Z.css("textAlign","center"),K++,Z.data(_.TABLE,"colSpan",Y),Z.parent=e),A=Array(a.length).fill(0);for(var Q=e.hasWidth,J=0;J<a.length;J++){for(var ee=a[J],te=ee.duplicate(),ne=0;ne<te.length;ne++){for(var ie=te[ne],re=ie.element,ae=re.rowSpan,se=re.colSpan,le=0;le<ae-1;le++){var ce=J+1+le;void 0!==A[ce]&&(A[ce]+=se)}ae>1&&ie.data(_.TABLE,"rowSpan",ae),se>1&&ie.data(_.TABLE,"colSpan",se),ie.has("verticalAlign")||ie.css("verticalAlign","middle");var he=S[A[J]];if("undefined"!==he)switch(r.layoutType){case 3:"auto"===he?U>=1?(i(ie),ie.data(_.TABLE,"exceed",!Q),ie.data(_.TABLE,"downsized",!0)):n(ie):$(he)?(ie.data(_.TABLE,"percent",he),ie.data(_.TABLE,"expand",!0)):q(he)&&parseInt(he)>0?ie.bounds.width>=parseInt(he)?(i(ie),ie.data(_.TABLE,"expand",!1),ie.data(_.TABLE,"downsized",!1)):h?(n(ie),ie.data(_.TABLE,"downsized",!0)):(i(ie),ie.data(_.TABLE,"expand",!1)):(ie.has("width")&&!ie.has("width",32)||i(ie),ie.data(_.TABLE,"expand",!1));break;case 2:ie.css("width","0px");break;case 1:"auto"===he?ie.css("width","0px"):(h?ie.data(_.TABLE,"downsized",!0):i(ie),ie.data(_.TABLE,"expand",!1))}A[J]+=se;for(var ue=0;ue<ae;ue++)for(var de=0;de<se;de++)k[J+ue].push(ie);ie.parent=e}if(A[J]<Y)te[te.length-1].data(_.TABLE,"spaceSpan",Y-A[J]);ee.hide()}if(u){for(var fe=e.css("borderTopColor"),ge=e.css("borderTopStyle"),pe=e.css("borderTopWidth"),ve=e.css("borderRightColor"),ye=e.css("borderRightStyle"),be=e.css("borderRightWidth"),xe=e.css("borderBottomColor"),ke=e.css("borderBottomStyle"),Ae=e.css("borderBottomWidth"),Se=e.css("borderLeftColor"),we=e.css("borderLeftStyle"),_e=e.css("borderLeftWidth"),Be=0;Be<K;Be++)for(var Ie=0;Ie<Y;Ie++){var Ce=k[Be][Ie];if(Ce&&"visible"===Ce.css("visibility")){if(0===Be&&Ce.borderTopWidth<parseInt(pe)&&Ce.css({borderTopColor:fe,borderTopStyle:ge,borderTopWidth:pe}),Be>=0&&Be<K-1){var Fe=k[Be+1][Ie];Fe&&Fe!==Ce&&"visible"===Fe.css("visibility")&&(Ce.borderBottomWidth>=Fe.borderTopWidth?Fe.css("borderTopWidth","0px"):Ce.css("borderBottomWidth","0px"))}if(Be===K-1&&Ce.borderBottomWidth<parseInt(Ae)&&Ce.css({borderBottomColor:xe,borderBottomStyle:ke,borderBottomWidth:Ae}),0===Ie&&Ce.borderLeftWidth<parseInt(_e)&&Ce.css({borderLeftColor:Se,borderLeftStyle:we,borderLeftWidth:_e}),Ie>=0&&Ie<Y-1){var Re=k[Be][Ie+1];Re&&Re!==Ce&&"visible"===Re.css("visibility")&&(Ce.borderRightWidth>=Re.borderLeftWidth?Re.css("borderLeftWidth","0px"):Ce.css("borderRightWidth","0px"))}Ie===Y-1&&Ce.borderRightWidth<parseInt(be)&&Ce.css({borderRightColor:ve,borderRightStyle:ye,borderRightWidth:be})}}e.css({borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"})}return r.rowCount=K,r.columnCount=Y,e.data(_.TABLE,"mainData",r),{output:""}}}],[{key:"createDataAttribute",value:function(){return{layoutType:0,rowCount:0,columnCount:0,expand:!1}}}]),t}(),en=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"condition",value:function(e){return e.block&&e.length>1&&e.some(function(e){return e.inlineVertical&&0!==D(e.verticalAlign)})&&Ye.linearX(e.children)}},{key:"processNode",value:function(e){var t=[],n=Number.MAX_VALUE;if(e.each(function(e){e.inlineVertical&&e.linear.top<=n&&(e.linear.top<n&&(t.length=0),t.push(e),n=e.linear.top)}),t.length!==e.length){var i=[];e.each(function(e){var n=!1;t.includes(e)?n=!0:(e.inlineVertical||e.plainText)&&q(e.verticalAlign)&&(e.modifyBox(2,e.linear.top-t[0].linear.top),i.push(e),n=!0),n&&e.css("verticalAlign","0px",!0)}),e.data(_.VERTICAL_ALIGN,"mainData",{belowBaseline:i,aboveBaseline:t})}return{output:""}}},{key:"postConstraints",value:function(e){var t=e.data(_.VERTICAL_ALIGN,"mainData"),n=e.find(function(e){return e.baselineActive});t&&n&&n.modifyBox(2,n.linear.top-t.aboveBaseline[0].linear.top)}}]),t}();function tn(e,t){var n=e.has("minHeight",2)?e.toInt("minHeight"):0;e.css("minHeight",W(Math.max(t,n)))}function nn(e,t,n){t.lineBreak||t.plainText||t!==e.renderChildren["Top"===n?0:e.renderChildren.length-1]||e["margin".concat(n)]>0&&0===e["padding".concat(n)]&&0===e["border".concat(n,"Width")]&&t.modifyBox("Top"===n?2:8,null)}var rn,an,on=function(e){function t(){return r(this,t),u(this,c(t).apply(this,arguments))}return l(t,bt),o(t,[{key:"afterBaseLayout",value:function(){for(var e=new Set,t=Array.isArray(i=this.application.session.cache),n=0,i=t?i:i[Symbol.iterator]();;){var r;if(t){if(n>=i.length)break;r=i[n++]}else{if((n=i.next()).done)break;r=n.value}var a=r;if(a.htmlElement&&a.blockStatic){for(var o=void 0,s=void 0,l=0;l<a.element.children.length;l++){var c=Xe(a.element.children[l]);if(c&&c.pageFlow&&(void 0===o&&(o=c),s=c,!c.lineBreak&&c.blockStatic)){var h=c.previousSiblings();if(h.length){var u=h[0];if(u.blockStatic&&!u.lineBreak)if(c=c.renderAs||c,(u=u.renderAs||u).excluded&&!c.excluded){var d=Math.min(u.marginTop,u.marginBottom);if(d<0){var f=D(c.cssInitial("marginTop",!1,!0));c.modifyBox(2,Math.abs(d)>=f?null:d),e.add(u)}}else if(!u.excluded&&c.excluded){var g=Math.min(c.marginTop,c.marginBottom);if(g<0){var p=D(u.cssInitial("marginBottom",!1,!0));u.modifyBox(8,Math.abs(g)>=p?null:g),e.add(c)}}else{var v=D(c.cssInitial("marginTop",!1,!0)),m=D(u.cssInitial("marginBottom",!1,!0));m>0&&v>0&&(v<=m?c.modifyBox(2,null):u.modifyBox(8,null))}}}}o&&nn(a,o,"Top"),s&&nn(a,s,"Bottom")}}for(var y=Array.isArray(x=this.application.parseElements),b=0,x=y?x:x[Symbol.iterator]();;){var k;if(y){if(b>=x.length)break;k=x[b++]}else{if((b=x.next()).done)break;k=b.value}de(Array.from(k.getElementsByTagName("BR")),function(e){return Xe(e)}).forEach(function(t){if(!e.has(t)){var n=t.actualParent,i=t.previousSiblings(!0,!0,!0),r=t.nextSiblings(!0,!0,!0),a=!1;if(i.length&&r.length){if(r[0].lineBreak)return;a=!0;var o,s,l=i.pop(),c=r.pop();if(l.inlineStatic&&c.inlineStatic&&0===i.length)return void e.add(t);l.lineHeight>0&&l.cssTry("lineHeight","0px")?(o=l.element.getBoundingClientRect().bottom+l.marginBottom,l.cssFinally("lineHeight")):o=l.linear.bottom,c.lineHeight>0&&c.cssTry("lineHeight","0px")?(s=c.element.getBoundingClientRect().top-c.marginTop,c.cssFinally("lineHeight")):s=c.linear.top;var h=l.visible?l.renderParent:void 0,u=c.visible?c.renderParent:void 0,d=s-o;d>0&&(u&&u.groupParent&&u.firstChild()===c?u.modifyBox(2,d):h&&h.groupParent&&h.lastChild()===l?h.modifyBox(8,d):u&&u.layoutVertical&&(c.visible||c.renderAs)?(c.renderAs||c).modifyBox(2,d):h&&h.layoutVertical&&(l.visible||l.renderAs)?(l.renderAs||l).modifyBox(8,d):!u&&!h&&n&&n.visible?c.lineBreak||c.excluded?n.modifyBox(128,d):l.lineBreak||l.excluded?n.modifyBox(32,d):a=!1:a=!1)}else if(n&&n.visible){if(!n.documentRoot&&i.length){var f=i[i.length-1],g=n.box.bottom-f.linear[f.lineBreak||f.excluded?"top":"bottom"];g>0&&(f.visible?n.modifyBox(128,g):n.hasHeight||tn(n,g))}else if(r.length){var p=r[r.length-1],v=p.linear[p.lineBreak||p.excluded?"bottom":"top"]-n.box.top;v>0&&(p.visible?n.modifyBox(32,v):n.hasHeight||tn(n,v))}a=!0}a&&(e.add(t),i.forEach(function(t){return e.add(t)}),r.forEach(function(t){return e.add(t)}))}})}for(var A=Array.isArray(E=this.application.session.excluded),S=0,E=A?E:E[Symbol.iterator]();;){var w;if(A){if(S>=E.length)break;w=E[S++]}else{if((S=E.next()).done)break;w=S.value}var _=w;if(!e.has(_)&&!_.lineBreak){var T=_.marginTop+_.marginBottom;if(0!==T){var B=_.nextSiblings(!0,!0,!0);if(B.length){var I=B.pop();I.visible&&(I.modifyBox(2,T),e.add(_))}}}}}},{key:"afterConstraints",value:function(){for(var e=Array.isArray(n=this.application.session.cache),t=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(t>=n.length)break;i=n[t++]}else{if((t=n.next()).done)break;i=t.value}var r=i,a=r.renderAs?r.renderAs.renderParent:r.renderParent;if(a&&r.pageFlow&&!a.hasAlign(4)&&!r.alignParent("left")&&r.styleElement&&r.inlineVertical)for(var o=[],s=r;;){if(o.push.apply(o,p(s.previousSiblings())),o.length&&!o.some(function(e){return e.lineBreak||e.excluded&&e.blockStatic})){var l=o[o.length-1];if(l.inlineVertical){var c=r.linear.left-o[o.length-1].actualRight();c>0&&(r.renderAs||r).modifyBox(16,c)}else if(l.floating){o.length=0,s=l;continue}}break}}}}]),t}();e.settings={},e.system={};var sn=new Set,ln=new Map;function cn(e){if(rn){if(e instanceof bt)return rn.includeExtension(e);if(U(e)){e=e.trim();var t=rn.builtInExtensions[e]||un(e);if(t)return rn.includeExtension(t)}}return!1}function hn(n,i){if("object"===t(i)){if(n instanceof bt)return Object.assign(n.options,i),!0;if(U(n)&&rn){n=n.trim();var r=rn.retrieveExtension(n)||Array.from(sn).find(function(e){return e.name===n});if(r)return Object.assign(r.options,i),!0;if(ln.set(n,i),e.settings.handleExtensionsAsync)return!0}}return!1}function un(e){return rn&&rn.retrieveExtension(e)}function dn(){rn&&rn.reset()}var fn={base:{Application:mt,Container:ve,Controller:yt,Extension:bt,File:xt,Layout:qe,Node:kt,NodeGroup:At,NodeList:Ye,Resource:gt,Svg:Mt,SvgElement:Ft,SvgGroup:Ct,SvgImage:Rt,SvgPath:Nt},extensions:{Accessibility:Lt,CssGrid:Wt,External:jt,Flexbox:zt,Grid:Xt,List:Yt,Origin:$t,Percent:Kt,Relative:Zt,Sprite:Qt,Table:Jt,VerticalAlign:en,WhiteSpace:on},color:lt,constant:B,dom:Ue,enumeration:A,svg:Bt,util:pe,xml:ft};e.setFramework=function(t){if(an!==t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.cached():t.create();if(e.settings=rn||0===Object.keys(e.settings).length?n.userSettings:Object.assign(n.userSettings,e.settings),(rn=n.application).userSettings=e.settings,Array.isArray(e.settings.builtInExtensions)){for(var i=new Set,r=Array.isArray(o=e.settings.builtInExtensions),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}var l=s;if(l=l.trim(),rn.builtInExtensions[l])i.add(rn.builtInExtensions[l]);else for(var c in rn.builtInExtensions)c.startsWith("".concat(l,"."))&&i.add(rn.builtInExtensions[c])}i.forEach(function(e){return rn.includeExtension(e)})}an=t,e.system=t.system}dn()},e.parseDocument=function t(){for(var n=arguments,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];if(rn&&!rn.closed){var o;if(e.settings.handleExtensionsAsync){sn.forEach(function(e){return rn.includeExtension(e)});var s=ln.entries(),l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){var h;if(l){if(c>=s.length)break;h=s[c++]}else{if((c=s.next()).done)break;h=c.value}var u=g(h,2);hn(u[0],u[1])}sn.clear(),ln.clear()}return(o=rn).parseDocument.apply(o,r)}return{then:function(e){rn?rn.closed&&confirm("ERROR: Document is closed. Reset and rerun?")&&(rn.reset(),t.call.apply(t,[null].concat(p(n))).then(e)):alert("ERROR: Framework not installed.")}}},e.include=cn,e.includeAsync=function(t){return!!cn(t)||!!(t instanceof bt&&(sn.add(t),e.settings.handleExtensionsAsync))},e.exclude=function(e){if(rn){if(e instanceof bt)return sn.has(e)?(sn.delete(e),rn.excludeExtension(e),!0):rn.excludeExtension(e);if(U(e)){e=e.trim();var t=rn.retrieveExtension(e);if(t)return rn.excludeExtension(t)}}return!1},e.configure=hn,e.ext=function(e,n){return e instanceof bt?cn(e):!!U(e)&&(e=e.trim(),"object"===t(n)?hn(e,n):un(e))},e.retrieve=un,e.ready=function(){return rn&&!rn.initialized&&!rn.closed},e.close=function(){rn&&!rn.initialized&&rn.size>0&&rn.finalize()},e.reset=dn,e.saveAllToDisk=function(){rn&&!rn.initialized&&rn.size>0&&(rn.closed||rn.finalize(),rn.saveAllToDisk())},e.toString=function(){return rn?""+rn:""},e.lib=fn,Object.defineProperty(e,"__esModule",{value:!0})});
